"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9046],{7617:function(e,s,a){a.d(s,{q:function(){return l}});var i=a(24246),t=a(86920);let l=e=>{let{label:s,isDisabled:a,...l}=e;return(0,i.jsx)(t.OK9,{"data-testid":"tab-".concat(s),_selected:{fontWeight:"600",color:"complimentary.500",borderColor:"complimentary.500"},fontSize:l.fontSize,fontWeight:"500",color:"gray.500",isDisabled:a||!1,children:s})};s.Z=e=>{let{data:s,border:a="partial",...r}=e;return(0,i.jsxs)(t.mQc,{colorScheme:"complimentary",...r,children:[(0,i.jsx)(t.tdY,{width:"partial"===a?"max-content":void 0,children:s.map(e=>(0,i.jsx)(l,{label:e.label,isDisabled:e.isDisabled,fontSize:r.fontSize},e.label))}),(0,i.jsx)(t.nPR,{children:s.map(e=>(0,i.jsx)(t.x45,{px:0,"data-testid":"tab-panel-".concat(e.label),children:e.content},e.label))})]})}},66379:function(e,s,a){var i=a(24246),t=a(86920),l=a(7617);s.Z=e=>{let{data:s,border:a="partial",borderWidth:r=2,...n}=e;return(0,i.jsx)(t.mQc,{colorScheme:"complimentary",...n,children:(0,i.jsx)(t.tdY,{width:"partial"===a?"max-content":void 0,borderBottomWidth:r,children:s.map(e=>(0,i.jsx)(l.q,{label:e.label,"data-testid":e.label,isDisabled:e.isDisabled,fontSize:n.fontSize},e.label))})})}},12627:function(e,s,a){var i=a(24246),t=a(79283),l=a(34929);s.Z=e=>{let{selectedTaxonomies:s,showDisabled:a=!1,...r}=e,{getDataCategoryDisplayNameProps:n,getDataCategories:o}=(0,l.Z)(),d=(a?o():o().filter(e=>e.active)).filter(e=>!s.includes(e.fides_key)).map(e=>{let{name:s,primaryName:a}=n(e.fides_key);return{value:e.fides_key,name:s,primaryName:a,description:e.description||""}});return(0,i.jsx)(t.l,{options:d,...r})}},45896:function(e,s,a){var i=a(24246),t=a(66379);s.Z=e=>{let{filterTabs:s,onChange:a,filterTabIndex:l}=e;return(0,i.jsx)(t.Z,{border:"full-width",mb:5,size:"sm",data:s,borderWidth:1,index:l,onChange:a})}},69828:function(e,s,a){a.d(s,{Y:function(){return r}});var i=a(24246),t=a(86920),l=a(70788);let r=[(0,i.jsx)(t.PJP.S9g,{},"layers"),(0,i.jsx)(t.PJP.ehp,{},"dataset"),(0,i.jsx)(t.PJP.iA_,{},"table"),(0,i.jsx)(t.PJP.$4y,{style:{transform:"rotate(-90deg)"}},"field")];s.Z=e=>{let{resourceUrn:s,parentLink:a,onPathClick:t=()=>{}}=e,n=[];if(s||n.push({title:"All activity"}),s){n.push({title:"All activity",href:a});let e=s.split(".");e.forEach((s,a)=>{0!==a&&n.push({title:s,icon:r[a-1],onClick:s=>{s.preventDefault(),t(e.slice(0,a+1).join("."))}})})}return(0,i.jsx)(l.m,{"data-testid":"results-breadcrumb",items:n})}},11904:function(e,s,a){a.d(s,{Z:function(){return z}});var i,t,l=a(24246),r=a(59003),n=a(92222),o=a(86920),d=a(86677),c=a(27378),u=a(47935),g=a(45896),x=a(70675),j=a(72625),h=a(79947),m=a(50169),f=a(28278),p=a(74241),I=a(68309),v=a(91761),b=a(61099),C=a(87667),_=e=>{let{resourceType:s}=e,a=(0,n.Cl)();return s===I.D$.SCHEMA?{columns:[a.accessor(e=>e.name,{id:"name",cell:e=>(0,l.jsx)(C.Z,{result:e.row.original,changeTypeOverride:f.E.CLASSIFICATION}),header:e=>(0,l.jsx)(u.Rr,{value:"Name",...e}),size:300}),a.accessor(e=>e.urn,{id:"project",cell:e=>(0,l.jsx)(u.G3,{value:(0,p.Z)(e.getValue())}),header:e=>(0,l.jsx)(u.Rr,{value:"Project",...e})}),a.display({id:"status",cell:e=>(0,l.jsx)(m.Z,{result:e.row.original}),header:e=>(0,l.jsx)(u.Rr,{value:"Status",...e})}),a.accessor(e=>e.system,{id:"system",cell:e=>(0,l.jsx)(u.G3,{value:e.getValue()}),header:e=>(0,l.jsx)(u.Rr,{value:"System",...e})}),a.accessor(e=>e.monitor_config_id,{id:"monitor",cell:e=>(0,l.jsx)(u.G3,{value:e.getValue()}),header:e=>(0,l.jsx)(u.Rr,{value:"Detected by",...e})}),a.accessor(e=>e.updated_at,{id:"time",cell:e=>(0,l.jsx)(j.Cy,{time:e.getValue()}),header:e=>(0,l.jsx)(u.Rr,{value:"When",...e})}),a.display({id:"action",cell:e=>e.row.original.diff_status!==I.LL.MUTED?(0,l.jsx)(v.Z,{resource:e.row.original}):(0,l.jsx)(u.G3,{value:"--"}),header:"Actions",size:235,meta:{disableRowClick:!0}})]}:s===I.D$.TABLE?{columns:[a.display({id:"select",cell:e=>{var s;let{row:a}=e;return(0,l.jsx)(j.k,{isChecked:a.getIsSelected(),onChange:a.getToggleSelectedHandler(),dataTestId:"select-".concat(null!==(s=a.original.name)&&void 0!==s?s:a.id)})},header:e=>{let{table:s}=e;return(0,l.jsx)(j.k,{isChecked:s.getIsAllPageRowsSelected(),isIndeterminate:s.getIsSomeRowsSelected(),onChange:s.getToggleAllRowsSelectedHandler(),dataTestId:"select-all-rows"})},maxSize:40}),a.accessor(e=>e.name,{id:"tables",cell:e=>(0,l.jsx)(C.Z,{result:e.row.original}),header:e=>(0,l.jsx)(u.Rr,{value:"Table name",...e}),size:300}),a.accessor(e=>e.description,{id:"description",cell:e=>(0,l.jsx)(u.G3,{value:e.getValue(),cellProps:e}),header:e=>(0,l.jsx)(u.Rr,{value:"Description",...e}),meta:{showHeaderMenu:!0}}),a.display({id:"status",cell:e=>(0,l.jsx)(m.Z,{result:e.row.original}),header:e=>(0,l.jsx)(u.Rr,{value:"Status",...e})}),a.display({id:"type",cell:()=>(0,l.jsx)(u.G3,{value:"Table"}),header:"Type"}),a.accessor(e=>e.updated_at,{id:"time",cell:e=>(0,l.jsx)(j.Cy,{time:e.getValue()}),header:"Time"}),a.display({id:"actions",cell:e=>(0,l.jsx)(v.Z,{resource:e.row.original}),header:"Actions",size:235,meta:{disableRowClick:!0}})]}:s===I.D$.FIELD?{columns:[a.accessor(e=>e.name,{id:"name",cell:e=>(0,l.jsx)(C.Z,{result:e.row.original}),header:e=>(0,l.jsx)(u.Rr,{value:"Field name",...e}),size:300}),a.accessor(e=>e.source_data_type,{id:"data-type",cell:e=>(0,l.jsx)(h.Z,{type:e.getValue()}),header:e=>(0,l.jsx)(u.Rr,{value:"Data type",...e})}),a.accessor(e=>e.description,{id:"description",cell:e=>(0,l.jsx)(u.G3,{value:e.getValue(),cellProps:e}),header:e=>(0,l.jsx)(u.Rr,{value:"Description",...e}),meta:{showHeaderMenu:!0}}),a.display({id:"status",cell:e=>(0,l.jsx)(m.Z,{result:e.row.original}),header:e=>(0,l.jsx)(u.Rr,{value:"Status",...e})}),a.display({id:"type",cell:()=>(0,l.jsx)(u.G3,{value:"Field"}),header:"Type"}),a.display({id:"classifications",cell:e=>{let{row:s}=e;return(0,l.jsx)(b.Z,{resource:s.original})},meta:{overflow:"visible",disableRowClick:!0},header:"Data category",minSize:280}),a.accessor(e=>e.updated_at,{id:"time",cell:e=>(0,l.jsx)(j.Cy,{time:e.getValue()}),header:e=>(0,l.jsx)(u.Rr,{value:"When",...e})}),a.display({id:"actions",cell:e=>(0,l.jsx)(v.Z,{resource:e.row.original}),header:"Actions",size:235,meta:{disableRowClick:!0}})]}:s===I.D$.ENDPOINT?{columns:[a.accessor(e=>e.name,{id:"name",cell:e=>(0,l.jsx)(C.Z,{result:e.row.original}),header:e=>(0,l.jsx)(u.Rr,{value:"Object",...e}),size:300}),a.accessor(e=>e.description,{id:"description",cell:e=>(0,l.jsx)(u.G3,{value:e.getValue(),cellProps:e}),header:e=>(0,l.jsx)(u.Rr,{value:"Description",...e}),meta:{showHeaderMenu:!0}}),a.display({id:"status",cell:e=>(0,l.jsx)(m.Z,{result:e.row.original}),header:e=>(0,l.jsx)(u.Rr,{value:"Status",...e})}),a.display({id:"type",cell:()=>(0,l.jsx)(u.G3,{value:"Endpoint"}),header:"Type"}),a.display({id:"classifications",cell:e=>{let{row:s}=e;return(0,l.jsx)(b.Z,{resource:s.original})},meta:{overflow:"visible",disableRowClick:!0},header:"Data category",minSize:280}),a.accessor(e=>e.updated_at,{id:"time",cell:e=>(0,l.jsx)(j.Cy,{time:e.getValue()}),header:e=>(0,l.jsx)(u.Rr,{value:"When",...e})}),a.display({id:"actions",cell:e=>(0,l.jsx)(v.Z,{resource:e.row.original}),header:"Actions",size:235,meta:{disableRowClick:!0}})]}:{columns:[]}};(i=t||(t={}))[i.ACTION_REQUIRED=0]="ACTION_REQUIRED",i[i.UNMONITORED=1]="UNMONITORED";var y=e=>{let{initialFilterTabIndex:s=0}=e,[a,i]=(0,c.useState)(s),t=(0,c.useMemo)(()=>[{label:"Action Required",filters:[I.LL.CLASSIFICATION_ADDITION,I.LL.CLASSIFICATION_UPDATE],childFilters:[I.LL.CLASSIFICATION_ADDITION,I.LL.CLASSIFICATION_UPDATE]},{label:"In progress",filters:[I.LL.CLASSIFYING,I.LL.CLASSIFICATION_QUEUED],childFilters:[I.LL.CLASSIFYING,I.LL.CLASSIFICATION_QUEUED]},{label:"Unmonitored",filters:[I.LL.MUTED],childFilters:[]}],[]);return{filterTabs:t,filterTabIndex:a,setFilterTabIndex:i,activeDiffFilters:t[a].filters,activeChildDiffFilters:t[a].childFilters}},L=a(47182),S=a(38347),w=a(79494),A=e=>{let{resourceUrn:s}=e,[a,{isLoading:i}]=(0,x.Hf)(),[t,{isLoading:r}]=(0,x.zV)(),n=i||r,d=async e=>{await t({staged_resource_urns:e})},c=async e=>{await a({staged_resource_urns:e})};return(0,l.jsx)(o.jqI,{"data-testid":"bulk-actions-menu",children:(0,l.jsxs)("div",{className:"flex gap-2",children:[(0,l.jsx)(w.Z,{title:"Confirm all",icon:(0,l.jsx)(o.nQG,{}),onClick:()=>c([s]),disabled:n,loading:i,type:"primary",size:"middle"}),(0,l.jsx)(w.Z,{title:"Ignore all",icon:(0,l.jsx)(o.tpL,{}),onClick:()=>d([s]),disabled:n,loading:r,size:"middle"})]})})},D=e=>{let{selectedUrns:s}=e,[a,{isLoading:i}]=(0,x.Hf)(),[t,{isLoading:r}]=(0,x.zV)(),n=i||r,d=async e=>{await a({staged_resource_urns:e})},c=async e=>{await t({staged_resource_urns:e})};return s.length?(0,l.jsxs)(o.jqI,{className:"items-center","data-testid":"bulk-actions-menu",children:[(0,l.jsx)(o.xvT,{fontSize:"xs",fontWeight:"semibold",minW:16,mr:4,children:"".concat(s.length," selected")}),(0,l.jsxs)(o.jqI,{className:"gap-2",children:[(0,l.jsx)(w.Z,{title:"Confirm",icon:(0,l.jsx)(o.nQG,{}),onClick:()=>d(s),disabled:n,loading:i,type:"primary",size:"middle"}),(0,l.jsx)(w.Z,{title:"Ignore",icon:(0,l.jsx)(o.tpL,{}),disabled:n,loading:r,onClick:()=>c(s),size:"middle"})]})]}):null},T=a(7940),R=a(80285),N=a(36168),Z=a(30952);let k={items:[],total:0,page:1,size:50,pages:1},F=()=>(0,l.jsx)(o.gCW,{mt:6,p:10,spacing:4,borderRadius:"base",maxW:"70%","data-testid":"empty-state",alignSelf:"center",margin:"auto",children:(0,l.jsxs)(o.gCW,{children:[(0,l.jsx)(o.xvT,{fontSize:"md",fontWeight:"600",children:"No activity found"}),(0,l.jsx)(o.xvT,{fontSize:"sm",children:"You're up to date!"})]})});var z=e=>{var s,a;let{resourceUrn:i}=e,j=(0,d.useRouter)(),[h,m]=(0,c.useState)(""),{filterTabs:f,setFilterTabIndex:p,filterTabIndex:v,activeDiffFilters:b,activeChildDiffFilters:C}=y({initialFilterTabIndex:(null===(s=j.query)||void 0===s?void 0:s.filterTabIndex)?Number(null===(a=j.query)||void 0===a?void 0:a.filterTabIndex):void 0}),[w,z]=(0,c.useState)({}),{PAGE_SIZES:E,pageSize:O,setPageSize:P,onPreviousPageClick:U,isPreviousPageDisabled:G,onNextPageClick:M,isNextPageDisabled:V,startRange:W,endRange:$,pageIndex:q,setTotalPages:Q,resetPageIndexToDefault:H}=(0,u.oi)();(0,c.useEffect)(()=>{H()},[i,h,H,b,C]);let{isFetching:Y,isLoading:B,data:J}=(0,x.z8)({staged_resource_urn:i,page:q,size:O,child_diff_status:C,diff_status:b,search:h}),K=(0,T.G)(null==J?void 0:J.items[0]),{items:X,total:ee,pages:es}=(0,c.useMemo)(()=>null!=J?J:k,[J]);(0,c.useEffect)(()=>{Q(es)},[es,Q]);let{columns:ea}=_({resourceType:K}),ei=(0,c.useMemo)(()=>ea,[ea]),{navigateToDiscoveryResults:et}=(0,L.Z)(),el=(0,r.b7)({getCoreRowModel:(0,n.sC)(),getGroupedRowModel:(0,n.qe)(),getExpandedRowModel:(0,n.rV)(),columns:ei,manualPagination:!0,onRowSelectionChange:z,state:{rowSelection:w},getRowId:R.Z,data:X,columnResizeMode:"onChange"}),er=Object.keys(w).filter(e=>w[e]);return B?(0,l.jsx)(u.I4,{rowHeight:36,numRows:36}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(g.Z,{filterTabs:f,filterTabIndex:v,onChange:p}),(0,l.jsxs)(u.Q$,{children:[(0,l.jsxs)(o.kCb,{gap:6,align:"center",children:[(0,l.jsx)(o.xuv,{flexShrink:0,children:(0,l.jsx)(Z.f,{value:h,onChange:m})}),(0,l.jsx)(S.Z,{})]}),K===I.D$.TABLE&&!!er.length&&(0,l.jsx)(D,{selectedUrns:er}),K===I.D$.FIELD&&v!==t.UNMONITORED&&(0,l.jsx)(A,{resourceUrn:i})]}),(0,l.jsx)(u.ZK,{tableInstance:el,onRowClick:e=>et({resourceUrn:e.urn,filterTabIndex:v}),getRowIsClickable:e=>K!==I.D$.FIELD||(0,N.Z)(e),emptyTableNotice:(0,l.jsx)(F,{})}),(0,l.jsx)(u.s8,{totalRows:ee||0,pageSizes:E,setPageSize:P,onPreviousPageClick:U,isPreviousPageDisabled:G||Y,onNextPageClick:M,isNextPageDisabled:V||Y,startRange:W,endRange:$})]})}},91761:function(e,s,a){var i=a(24246),t=a(86920),l=a(812),r=a(14047),n=a(7940),o=a(98559),d=a(68309),c=a(79494),u=a(70675);s.Z=e=>{let{resource:s}=e,[a,{isLoading:g}]=(0,u.v8)(),[x,{isLoading:j}]=(0,u.cM)(),[h,{isLoading:m}]=(0,u.vi)(),f=j||m||g,{diff_status:p,child_diff_statuses:I,top_level_field_name:v}=s,{successAlert:b,errorAlert:C}=(0,r.V)(),_=p===d.LL.CLASSIFICATION_ADDITION||p===d.LL.CLASSIFICATION_UPDATE,y=I&&(I[d.LL.CLASSIFICATION_ADDITION]||I[d.LL.CLASSIFICATION_UPDATE]),L=(_||y)&&!v,S=_||y,w=(0,n.G)(s)!==d.D$.FIELD,A=L&&S&&w,D=async()=>{let e=await x({staged_resource_urn:s.urn});(0,l.D4)(e)?C((0,l.e$)(e.error),"Failed to promote resource"):b('These changes have been added to a Fides dataset. To view, navigate to "Manage datasets".',"Table changes confirmed")},T=async()=>{let e=await h({staged_resource_urn:s.urn});(0,l.D4)(e)?C((0,l.e$)(e.error),"Failed to mute resource"):b("Ignored changes will not be added to a Fides dataset.","".concat(s.name||"Changes"," ignored"))},R=async()=>{let e=await a({staged_resource_urn:s.urn,monitor_config_id:s.monitor_config_id,start_classification:!0,diff_statuses_to_classify:[d.LL.CLASSIFICATION_ADDITION,d.LL.CLASSIFICATION_UPDATE,d.LL.CLASSIFYING,d.LL.CLASSIFICATION_QUEUED]});(0,l.D4)(e)?C((0,l.e$)(e.error),"Failed to reclassify resource"):b("Reclassification of ".concat((0,o.Z)(s)||"the resource"," has begun.  The results may take some time to appear in the “Data discovery“ tab."),"Reclassification started")};return(0,i.jsxs)(t.Ugi,{gap:2,children:[L&&(0,i.jsx)(c.Z,{title:"Confirm",icon:(0,i.jsx)(t.nQG,{}),onClick:D,disabled:f,loading:j}),S&&(0,i.jsx)(c.Z,{title:"Ignore",icon:(0,i.jsx)(t.tpL,{}),onClick:T,disabled:f,loading:m}),w&&!A&&(0,i.jsx)(c.Z,{title:"Reclassify",icon:(0,i.jsx)(t.nyI,{}),onClick:R,disabled:f,loading:g}),A&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.LZC,{}),(0,i.jsxs)(t.v2r,{children:[(0,i.jsx)(t.j2t,{as:t.wpx,size:"small",type:"text",icon:(0,i.jsx)(t.nXP,{transform:"rotate(90deg)"}),className:"w-6 gap-0","data-testid":"actions-overflow-btn"}),(0,i.jsx)(t.qyq,{children:(0,i.jsx)(t.sNh,{onClick:R,icon:(0,i.jsx)(t.nyI,{}),"data-testid":"action-reclassify",children:"Reclassify"})})]})]})]})}},61099:function(e,s,a){var i=a(24246),t=a(86920),l=a(27378),r=a(12627),n=a(34929),o=a(26183),d=a(70675);s.Z=e=>{var s,a,c;let{resource:u}=e,[g,x]=(0,l.useState)(!1),{getDataCategoryDisplayName:j}=(0,n.Z)(),[h]=(0,d.NA)(),m=(null===(s=u.classifications)||void 0===s?void 0:s.length)?u.classifications[0].label:null,f=null!==(c=u.user_assigned_data_categories)&&void 0!==c?c:[],p=!m&&!(null==f?void 0:f.length),I=null===(a=u.sub_field_urns)||void 0===a?void 0:a.length,v=e=>{h({staged_resource_urn:u.urn,monitor_config_id:u.monitor_config_id,user_assigned_data_categories:[...f,e]})},b=e=>{var s;h({staged_resource_urn:u.urn,monitor_config_id:u.monitor_config_id,user_assigned_data_categories:null!==(s=null==f?void 0:f.filter(s=>s!==e))&&void 0!==s?s:[]})},C=!g&&!!f.length,_=!g&&!!m&&!f.length;return(0,i.jsxs)(o.Z,{"data-testid":"edit-category-cell",children:[p&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.j8w,{"data-testid":"no-classifications",color:"white",children:"None"}),!I&&(0,i.jsx)(t.j8w,{onClick:()=>x(!0),addable:!0,"data-testid":"taxonomy-add-btn","aria-label":"Add category"})]}),C&&(0,i.jsxs)(i.Fragment,{children:[f.map(e=>(0,i.jsx)(t.j8w,{"data-testid":"user-classification-".concat(e),color:"white",closable:!0,onClose:()=>b(e),closeButtonLabel:"Remove category",children:j(e)},e)),(0,i.jsx)(t.j8w,{onClick:()=>x(!0),addable:!0,"data-testid":"taxonomy-add-btn","aria-label":"Add category"})]}),_&&(0,i.jsxs)(t.j8w,{onClick:()=>x(!0),color:"white","data-testid":"classification-".concat(m),hasSparkle:!0,children:[j(m),(0,i.jsx)(t.PJP.I8b,{size:10})]}),g&&(0,i.jsx)(t.xuv,{className:"select-wrapper",position:"absolute",zIndex:10,top:"0",left:"0",width:"100%",height:"max",bgColor:"#fff",children:(0,i.jsx)(r.Z,{selectedTaxonomies:f,onChange:e=>{x(!1),v(e)},onBlur:()=>x(!1),open:!0})})]})}},79947:function(e,s,a){var i=a(24246),t=a(86920);s.Z=e=>{let{type:s}=e;return(0,i.jsx)(t.kCb,{align:"center",h:"full",children:!!s&&(0,i.jsx)(t.j8w,{children:s})})}}}]);