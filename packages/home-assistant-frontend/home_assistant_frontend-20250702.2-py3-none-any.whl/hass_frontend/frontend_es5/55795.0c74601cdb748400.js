"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([["55795"],{55815:function(t,a,e){e.d(a,{Eu:function(){return o},hZ:function(){return r},o9:function(){return c}});e(24819),e(54480);var i=e(28105),n=e(45657),s=["#4269d0","#f4bd4a","#ff725c","#6cc5b0","#a463f2","#ff8ab7","#9c6b4e","#97bbf5","#01ab63","#094bad","#c99000","#d84f3e","#49a28f","#048732","#d96895","#8043ce","#7599d1","#7a4c31","#6989f4","#ffd444","#ff957c","#8fe9d3","#62cc71","#ffadda","#c884ff","#badeff","#bf8b6d","#927acc","#97ee3f","#bf3947","#9f5b00","#f48758","#8caed6","#f2b94f","#eff26e","#e43872","#d9b100","#9d7a00","#698cff","#00d27e","#d06800","#009f82","#c49200","#cbe8ff","#fecddf","#c27eb6","#8cd2ce","#c4b8d9","#f883b0","#a49100","#f48800","#27d0df","#a04a9b"];function o(t){return s[t%s.length]}function r(t,a){var e=a.getPropertyValue("--graph-color-".concat(t+1))||o(t);return(0,n.Rq)(e)}var c=(0,i.Z)(function(t){return s.map(function(a,e){return r(e,t)})},function(t,a){return t[0].getPropertyValue("--graph-color-1")===a[0].getPropertyValue("--graph-color-1")})},56665:function(t,a,e){e.a(t,async function(t,i){try{e.d(a,{O:function(){return M}});var n,s,o,r,c,d=e(10354),h=e(42385),u=e(54982),l=e(29694),p=e(75778),f=e(54521),m=e(4490),y=e(20129),_=e(85297),v=(e(12212),e(25518),e(39710),e(26847),e(24819),e(2394),e(18574),e(81738),e(94814),e(22960),e(6989),e(96821),e(32396),e(48454),e(24533),e(54480),e(11353),e(67886),e(65451),e(46015),e(38334),e(94880),e(75643),e(29761),e(56389),e(48694),e(67398),e(27530),e(73742)),b=e(59048),g=e(7616),x=e(20480),D=e(28105),S=e(55815),T=e(37528),w=e(74266),A=e(28598),C=e(27417),k=e(97050),Z=e(7214),Y=e(37008),L=t([Y,A,w]);[Y,A,w]=L.then?(await L)():L;var M={mean:"mean",min:"min",max:"max",sum:"sum",state:"sum",change:"sum"},N=function(t){function a(){var t;(0,f.Z)(this,a);for(var e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];return(t=(0,y.Z)(this,a,[].concat(i))).statTypes=["sum","min","mean","max"],t.chartType="line",t.fitYData=!1,t.hideLegend=!1,t.logarithmicScale=!1,t.isLoadingData=!1,t.clickForMoreInfo=!0,t._chartData=[],t._legendData=[],t._statisticIds=[],t._hiddenStats=new Set,t._renderTooltip=function(a){var e={},i=t.unit?"".concat((0,C.L)(t.unit,t.hass.locale)).concat(t.unit):"";return a.map(function(a,n){var s,o;if(e[a.seriesName])return"";e[a.seriesName]=!0;var r=t._statisticIds[a.seriesIndex],c=t.hass.states[r],d=t.hass.entities[r],h=String(null!==(s=a.value[2])&&void 0!==s?s:a.value[1]),u=null!==(o=(0,A.l4)(c,d))&&void 0!==o?o:{maximumFractionDigits:2},l="".concat((0,A.uf)(h,t.hass.locale,u)).concat(i),p=0===n?(0,w.E8)(new Date(a.value[0]),t.hass.locale,t.hass.config)+"<br>":"";return"".concat(p).concat(a.marker," ").concat(a.seriesName,": ").concat(l)}).filter(Boolean).join("<br>")},t._getStatisticsMetaData=(0,D.Z)(function(){var a=(0,p.Z)((0,l.Z)().m(function a(e){var i,n;return(0,l.Z)().w(function(a){for(;;)switch(a.n){case 0:return a.n=1,(0,Z.Py)(t.hass,e);case 1:return i=a.v,n={},i.forEach(function(t){n[t.statistic_id]=t}),a.a(2,n)}},a)}));return function(t){return a.apply(this,arguments)}}()),t}return(0,_.Z)(a,t),(0,m.Z)(a,[{key:"shouldUpdate",value:function(t){return t.size>1||!t.has("hass")}},{key:"willUpdate",value:function(t){(t.has("statisticsData")||t.has("statTypes")||t.has("chartType")||t.has("hideLegend")||t.has("_hiddenStats"))&&this._generateData(),(!this.hasUpdated||t.has("unit")||t.has("period")||t.has("chartType")||t.has("minYAxis")||t.has("maxYAxis")||t.has("fitYData")||t.has("logarithmicScale")||t.has("hideLegend")||t.has("startTime")||t.has("endTime")||t.has("_legendData")||t.has("_chartData"))&&this._createOptions()}},{key:"firstUpdated",value:function(){this._computedStyle=getComputedStyle(this)}},{key:"render",value:function(){return(0,T.p)(this.hass,"history")?this.isLoadingData&&!this.statisticsData?(0,b.dy)(s||(s=(0,u.Z)(['<div class="info"> '," </div>"])),this.hass.localize("ui.components.statistics_charts.loading_statistics")):this.statisticsData&&Object.keys(this.statisticsData).length?(0,b.dy)(r||(r=(0,u.Z)([' <ha-chart-base .hass="','" .data="','" .options="','" .height="','" style="','" @dataset-hidden="','" @dataset-unhidden="','" .expandLegend="','"></ha-chart-base> '])),this.hass,this._chartData,this._chartOptions,this.height,(0,x.V)({height:this.height}),this._datasetHidden,this._datasetUnhidden,this.expandLegend):(0,b.dy)(o||(o=(0,u.Z)(['<div class="info"> '," </div>"])),this.hass.localize("ui.components.statistics_charts.no_statistics_found")):(0,b.dy)(n||(n=(0,u.Z)(['<div class="info"> '," </div>"])),this.hass.localize("ui.components.history_charts.history_disabled"))}},{key:"_datasetHidden",value:function(t){this._hiddenStats.add(t.detail.name),this.requestUpdate("_hiddenStats")}},{key:"_datasetUnhidden",value:function(t){this._hiddenStats.delete(t.detail.name),this.requestUpdate("_hiddenStats")}},{key:"_createOptions",value:function(){var t,a,e=this,i=null!==(t=this.daysToShow)&&void 0!==t?t:1,n=this.minYAxis,s=this.maxYAxis;"number"==typeof n?this.fitYData&&(n=function(t){var a=t.min;return Math.min(e._roundYAxis(a,Math.floor),e.minYAxis)}):this.logarithmicScale&&(n=function(t){var a=t.min,i=a>0?.95*a:1.05*a;return e._roundYAxis(i,Math.floor)}),"number"==typeof s?this.fitYData&&(s=function(t){var a=t.max;return Math.max(e._roundYAxis(a,Math.ceil),e.maxYAxis)}):this.logarithmicScale&&(s=function(t){var a=t.max,i=a>0?1.05*a:.95*a;return e._roundYAxis(i,Math.ceil)});var o=null!==(a=this.endTime)&&void 0!==a?a:new Date,r=this.startTime;r||(this._chartData.forEach(function(t){var a;if(Array.isArray(t.data)&&t.data[0]){var e=t.data[0],i=Array.isArray(e)?e[0]:null===(a=e.value)||void 0===a?void 0:a[0];i&&(!r||new Date(i)<r)&&(r=new Date(i))}}),r||(r=new Date(o.getTime()-24*i*3600*1e3))),this._chartOptions={xAxis:[{id:"xAxis",type:"time",min:r,max:this.endTime},{id:"hiddenAxis",type:"time",show:!1}],yAxis:{type:this.logarithmicScale?"log":"value",name:this.unit,nameGap:2,nameTextStyle:{align:"left"},position:(0,k.HE)(this.hass)?"right":"left",scale:"bar"!==this.chartType||this.logarithmicScale||void 0!==n||void 0!==s,min:this._clampYAxis(n),max:this._clampYAxis(s),splitLine:{show:!0}},legend:{type:"custom",show:!this.hideLegend,data:this._legendData},grid:{top:15,left:1,right:1,bottom:0,containLabel:!0},tooltip:{trigger:"axis",appendTo:document.body,formatter:this._renderTooltip}}}},{key:"_generateData",value:(e=(0,p.Z)((0,l.Z)().m(function t(){var a,e,i,n,s,o,r,c,u,p=this;return(0,l.Z)().w(function(t){for(;;)switch(t.n){case 0:if(this.statisticsData){t.n=1;break}return t.a(2);case 1:if(u=this.metadata){t.n=3;break}return t.n=2,this._getStatisticsMetaData(Object.keys(this.statisticsData));case 2:u=t.v;case 3:if(a=u,e=0,i=Object.entries(this.statisticsData),n=[],s=[],o=[],0!==i.length){t.n=4;break}return t.a(2);case 4:(this.endTime||new Date(Math.max.apply(Math,(0,h.Z)(i.map(function(t){var a=(0,d.Z)(t,2),e=(a[0],a[1]);return new Date(e[e.length-1].start).getTime()})))))>new Date&&new Date,c=this.names||{},i.forEach(function(t){var i=(0,d.Z)(t,2),u=i[0],l=i[1],f=null==a?void 0:a[u],m=c[u];void 0===m&&(m=(0,Z.Kd)(p.hass,u,f)),p.unit||(void 0===r?r=(0,Z.dO)(p.hass,u,f):null!==r&&r!==(0,Z.dO)(p.hass,u,f)&&(r=null));var y,_=null,v=[],b=[],g=(0,S.hZ)(e,p._computedStyle||getComputedStyle(p));e++;var x=[],D=p.statTypes.includes("mean")&&(0,Z.Nw)(l,"mean"),T=p.statTypes.includes("max")&&(0,Z.Nw)(l,"max"),w=p.statTypes.includes("min")&&(0,Z.Nw)(l,"min"),A=[D,T,w].filter(Boolean).length>1,C=T?"max":"mean",k=w?"min":"mean",Y=A?(0,h.Z)(p.statTypes).sort(function(t,a){return"min"===t||"max"===a?-1:"max"===t||"min"===a?1:0}):p.statTypes,L=!1;Y.forEach(function(t){if((0,Z.Nw)(l,t)){var a=A&&(t===C||t===k);x.push(t);var e=a&&w&&T&&D?g+(p.hideLegend?"00":"7F"):g,i=a?g+"3F":g+"7F",n={id:"".concat(u,"-").concat(t),type:p.chartType,smooth:"line"===p.chartType&&.4,smoothMonotone:"x",cursor:"default",data:[],name:m?"".concat(m," (").concat(p.hass.localize("ui.components.statistics_charts.statistic_types.".concat(t)),")"):p.hass.localize("ui.components.statistics_charts.statistic_types.".concat(t)),symbol:"none",sampling:"minmax",animationDurationUpdate:0,lineStyle:{width:1.5},itemStyle:"bar"===p.chartType?{borderRadius:[4,4,0,0],borderColor:e,borderWidth:1.5}:void 0,color:"bar"===p.chartType?i:e};if(a&&"line"===p.chartType&&(n.stack="band-".concat(u),n.stackStrategy="all",A&&t===C&&(n.areaStyle={color:g+"3F"})),!p.hideLegend){var s,r=D?"mean"===t:!1===L;r&&b.push({name:m,color:n.color,borderColor:null===(s=n.itemStyle)||void 0===s?void 0:s.borderColor}),L=L||r}v.push(n),o.push(u)}});var M=null,N=null;l.forEach(function(t){var a=new Date(t.start);if(M!==a){M=a;var e=[];x.forEach(function(a){var i=[];if("sum"===a)null==N?(i.push(0),N=t.sum):i.push((t.sum||0)-N);else if(a===C&&"line"===p.chartType&&A){var n=t[C]||0;i.push(Math.abs(n-(t[k]||0))),i.push(n)}else{var s;i.push(null!==(s=t[a])&&void 0!==s?s:null)}e.push(i)}),p._hiddenStats.has(m)||function(t,a,e){e.length&&(t>a||(v.forEach(function(a,i){"line"===p.chartType&&y&&_&&y.getTime()!==t.getTime()&&(a.data.push(p._transformDataValue([y].concat((0,h.Z)(_[i])))),a.data.push([y,null])),a.data.push(p._transformDataValue([t].concat((0,h.Z)(e[i]))))}),_=e,y=a))}(a,new Date(t.end),e)}}),Array.prototype.push.apply(n,v),Array.prototype.push.apply(s,b)}),r&&(this.unit=r),s.forEach(function(t){var a=t.name,e=t.color,i=t.borderColor;n.push({id:a+"-legend",name:a,color:e,itemStyle:{borderColor:i},type:p.chartType,data:[],xAxisIndex:1})}),this._chartData=n,s.length!==this._legendData.length&&(this._legendData=s.map(function(t){return t.name})),this._statisticIds=o;case 5:return t.a(2)}},t,this)})),function(){return e.apply(this,arguments)})},{key:"_transformDataValue",value:function(t){return"bar"===this.chartType&&t[1]&&t[1]<0?{value:t,itemStyle:{borderRadius:[0,0,4,4]}}:t}},{key:"_clampYAxis",value:function(t){if(this.logarithmicScale){if("number"==typeof t)return Math.max(t,Number.EPSILON);if("function"==typeof t)return function(a){return Math.max(t(a),Number.EPSILON)}}return t}},{key:"_roundYAxis",value:function(t,a){return Math.abs(t)<1?t:a(t)}}]);var e}(b.oi);N.styles=(0,b.iv)(c||(c=(0,u.Z)([":host{display:block;min-height:60px}.info{text-align:center;line-height:60px;color:var(--secondary-text-color)}"]))),(0,v.__decorate)([(0,g.Cb)({attribute:!1})],N.prototype,"hass",void 0),(0,v.__decorate)([(0,g.Cb)({attribute:!1})],N.prototype,"statisticsData",void 0),(0,v.__decorate)([(0,g.Cb)({attribute:!1})],N.prototype,"metadata",void 0),(0,v.__decorate)([(0,g.Cb)({attribute:!1})],N.prototype,"names",void 0),(0,v.__decorate)([(0,g.Cb)()],N.prototype,"unit",void 0),(0,v.__decorate)([(0,g.Cb)({attribute:!1})],N.prototype,"startTime",void 0),(0,v.__decorate)([(0,g.Cb)({attribute:!1})],N.prototype,"endTime",void 0),(0,v.__decorate)([(0,g.Cb)({attribute:!1,type:Array})],N.prototype,"statTypes",void 0),(0,v.__decorate)([(0,g.Cb)({attribute:!1})],N.prototype,"chartType",void 0),(0,v.__decorate)([(0,g.Cb)({attribute:!1,type:Number})],N.prototype,"minYAxis",void 0),(0,v.__decorate)([(0,g.Cb)({attribute:!1,type:Number})],N.prototype,"maxYAxis",void 0),(0,v.__decorate)([(0,g.Cb)({attribute:"fit-y-data",type:Boolean})],N.prototype,"fitYData",void 0),(0,v.__decorate)([(0,g.Cb)({attribute:"hide-legend",type:Boolean})],N.prototype,"hideLegend",void 0),(0,v.__decorate)([(0,g.Cb)({attribute:"logarithmic-scale",type:Boolean})],N.prototype,"logarithmicScale",void 0),(0,v.__decorate)([(0,g.Cb)({attribute:"is-loading-data",type:Boolean})],N.prototype,"isLoadingData",void 0),(0,v.__decorate)([(0,g.Cb)({attribute:"click-for-more-info",type:Boolean})],N.prototype,"clickForMoreInfo",void 0),(0,v.__decorate)([(0,g.Cb)()],N.prototype,"period",void 0),(0,v.__decorate)([(0,g.Cb)({attribute:"days-to-show",type:Number})],N.prototype,"daysToShow",void 0),(0,v.__decorate)([(0,g.Cb)({type:String})],N.prototype,"height",void 0),(0,v.__decorate)([(0,g.Cb)({attribute:"expand-legend",type:Boolean})],N.prototype,"expandLegend",void 0),(0,v.__decorate)([(0,g.SB)()],N.prototype,"_chartData",void 0),(0,v.__decorate)([(0,g.SB)()],N.prototype,"_legendData",void 0),(0,v.__decorate)([(0,g.SB)()],N.prototype,"_statisticIds",void 0),(0,v.__decorate)([(0,g.SB)()],N.prototype,"_chartOptions",void 0),(0,v.__decorate)([(0,g.SB)()],N.prototype,"_hiddenStats",void 0),N=(0,v.__decorate)([(0,g.Mo)("statistics-chart")],N),i()}catch(B){i(B)}})}}]);
//# sourceMappingURL=55795.0c74601cdb748400.js.map