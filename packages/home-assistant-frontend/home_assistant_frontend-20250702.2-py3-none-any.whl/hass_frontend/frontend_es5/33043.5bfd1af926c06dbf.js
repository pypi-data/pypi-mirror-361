"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([["33043"],{64961:function(e,t,s){s.a(e,async function(e,n){try{s.r(t),s.d(t,{EnergySetupWizard:function(){return H}});var r,i,a,h,c,o,u,l,f,p,d,_,g=s(29694),y=s(75778),v=s(54982),k=s(54521),Z=s(4490),b=s(20129),w=s(85297),m=(s(12212),s(73742)),C=(s(98334),s(59048)),x=s(7616),z=s(39884),A=s(6640),D=s(72242),S=s(95814),Y=s(99622),B=s(11714),M=s(43349),X=s(74119),E=s(4338),F=s(94968),j=e([Y,B,M,X,E,F,A]);[Y,B,M,X,E,F,A]=j.then?(await j)():j;var H=function(e){function t(){var e;(0,k.Z)(this,t);for(var s=arguments.length,n=new Array(s),r=0;r<s;r++)n[r]=arguments[r];return(e=(0,b.Z)(this,t,[].concat(n)))._step=0,e._preferences={energy_sources:[],device_consumption:[]},e}return(0,w.Z)(t,e),(0,Z.Z)(t,[{key:"getCardSize",value:function(){return 10}},{key:"setConfig",value:function(e){e.preferences&&(this._preferences=e.preferences)}},{key:"firstUpdated",value:function(){this.hass.loadFragmentTranslation("config"),this._fetchconfig()}},{key:"render",value:function(){return(0,C.dy)(r||(r=(0,v.Z)([" <p> "," </p> ",' <div class="buttons"> '," "," </div> "])),this.hass.localize("ui.panel.energy.setup.step",{step:this._step+1,steps:6}),0===this._step?(0,C.dy)(i||(i=(0,v.Z)(['<ha-energy-grid-settings .hass="','" .preferences="','" @value-changed="','"></ha-energy-grid-settings>'])),this.hass,this._preferences,this._prefsChanged):1===this._step?(0,C.dy)(a||(a=(0,v.Z)(['<ha-energy-solar-settings .hass="','" .preferences="','" .info="','" @value-changed="','"></ha-energy-solar-settings>'])),this.hass,this._preferences,this._info,this._prefsChanged):2===this._step?(0,C.dy)(h||(h=(0,v.Z)(['<ha-energy-battery-settings .hass="','" .preferences="','" @value-changed="','"></ha-energy-battery-settings>'])),this.hass,this._preferences,this._prefsChanged):3===this._step?(0,C.dy)(c||(c=(0,v.Z)(['<ha-energy-gas-settings .hass="','" .preferences="','" @value-changed="','"></ha-energy-gas-settings>'])),this.hass,this._preferences,this._prefsChanged):4===this._step?(0,C.dy)(o||(o=(0,v.Z)(['<ha-energy-water-settings .hass="','" .preferences="','" @value-changed="','"></ha-energy-water-settings>'])),this.hass,this._preferences,this._prefsChanged):(0,C.dy)(u||(u=(0,v.Z)(['<ha-energy-device-settings .hass="','" .preferences="','" @value-changed="','"></ha-energy-device-settings>'])),this.hass,this._preferences,this._prefsChanged),this._step>0?(0,C.dy)(l||(l=(0,v.Z)(['<mwc-button outlined @click="','">',"</mwc-button>"])),this._back,this.hass.localize("ui.panel.energy.setup.back")):(0,C.dy)(f||(f=(0,v.Z)(["<div></div>"]))),this._step<4?(0,C.dy)(p||(p=(0,v.Z)(['<mwc-button unelevated @click="','">',"</mwc-button>"])),this._next,this.hass.localize("ui.panel.energy.setup.next")):(0,C.dy)(d||(d=(0,v.Z)(['<mwc-button unelevated @click="','"> '," </mwc-button>"])),this._setupDone,this.hass.localize("ui.panel.energy.setup.done")))}},{key:"_fetchconfig",value:(n=(0,y.Z)((0,g.Z)().m(function e(){return(0,g.Z)().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,(0,A.xZ)(this.hass);case 1:this._info=e.v;case 2:return e.a(2)}},e,this)})),function(){return n.apply(this,arguments)})},{key:"_prefsChanged",value:function(e){this._preferences=e.detail.value}},{key:"_back",value:function(){0!==this._step&&this._step--}},{key:"_next",value:function(){5!==this._step&&this._step++}},{key:"_setupDone",value:(s=(0,y.Z)((0,g.Z)().m(function e(){var t;return(0,g.Z)().w(function(e){for(;;)switch(e.n){case 0:if(this._preferences){e.n=1;break}return e.a(2);case 1:if(0!==this._preferences.device_consumption.length||0!==this._preferences.energy_sources.length){e.n=2;break}return(0,D.showAlertDialog)(this,{title:this.hass.localize("ui.panel.energy.setup.no_statistics_selected_title"),text:this.hass.localize("ui.panel.energy.setup.no_statistics_selected_description")}),e.a(2);case 2:return e.p=2,e.n=3,(0,A._Z)(this.hass,this._preferences);case 3:this._preferences=e.v,e.n=5;break;case 4:e.p=4,t=e.v,(0,D.showAlertDialog)(this,{title:"Failed to save config: ".concat(t.message)});case 5:(0,z.B)(this,"reload-energy-panel");case 6:return e.a(2)}},e,this,[[2,4]])})),function(){return s.apply(this,arguments)})}],[{key:"styles",get:function(){return[S.Qx,(0,C.iv)(_||(_=(0,v.Z)([":host{display:block;padding:16px;max-width:700px;margin:0 auto}mwc-button{margin-top:8px}.buttons{display:flex;justify-content:space-between}"])))]}}]);var s,n}(C.oi);(0,m.__decorate)([(0,x.Cb)({attribute:!1})],H.prototype,"hass",void 0),(0,m.__decorate)([(0,x.Cb)({attribute:!1})],H.prototype,"lovelace",void 0),(0,m.__decorate)([(0,x.SB)()],H.prototype,"_info",void 0),(0,m.__decorate)([(0,x.SB)()],H.prototype,"_step",void 0),(0,m.__decorate)([(0,x.SB)()],H.prototype,"_preferences",void 0),H=(0,m.__decorate)([(0,x.Mo)("energy-setup-wizard-card")],H),n()}catch(I){n(I)}})},88245:function(e,t,s){s.d(t,{r:function(){return p}});var n=s(10354),r=s(75706),i=s(54521),a=s(4490),h=s(20129),c=s(85297),o=(s(40777),s(26847),s(7175),s(54480),s(48694),s(27530),s(35340)),u=s(83522),l=s(5277),f=function(e,t,s){for(var n=new Map,r=t;r<=s;r++)n.set(e[r],r);return n},p=(0,u.XM)(function(e){function t(e){var s;if((0,i.Z)(this,t),s=(0,h.Z)(this,t,[e]),e.type!==u.pX.CHILD)throw Error("repeat() can only be used in text expressions");return s}return(0,c.Z)(t,e),(0,a.Z)(t,[{key:"dt",value:function(e,t,s){var n;void 0===s?s=t:void 0!==t&&(n=t);var i,a=[],h=[],c=0,o=(0,r.Z)(e);try{for(o.s();!(i=o.n()).done;){var u=i.value;a[c]=n?n(u,c):c,h[c]=s(u,c),c++}}catch(l){o.e(l)}finally{o.f()}return{values:h,keys:a}}},{key:"render",value:function(e,t,s){return this.dt(e,t,s).values}},{key:"update",value:function(e,t){var s,r=(0,n.Z)(t,3),i=r[0],a=r[1],h=r[2],c=(0,l.i9)(e),u=this.dt(i,a,h),p=u.values,d=u.keys;if(!Array.isArray(c))return this.ut=d,p;for(var _,g,y=null!==(s=this.ut)&&void 0!==s?s:this.ut=[],v=[],k=0,Z=c.length-1,b=0,w=p.length-1;k<=Z&&b<=w;)if(null===c[k])k++;else if(null===c[Z])Z--;else if(y[k]===d[b])v[b]=(0,l.fk)(c[k],p[b]),k++,b++;else if(y[Z]===d[w])v[w]=(0,l.fk)(c[Z],p[w]),Z--,w--;else if(y[k]===d[w])v[w]=(0,l.fk)(c[k],p[w]),(0,l._Y)(e,v[w+1],c[k]),k++,w--;else if(y[Z]===d[b])v[b]=(0,l.fk)(c[Z],p[b]),(0,l._Y)(e,c[k],c[Z]),Z--,b++;else if(void 0===_&&(_=f(d,b,w),g=f(y,k,Z)),_.has(y[k]))if(_.has(y[Z])){var m=g.get(d[b]),C=void 0!==m?c[m]:null;if(null===C){var x=(0,l._Y)(e,c[k]);(0,l.fk)(x,p[b]),v[b]=x}else v[b]=(0,l.fk)(C,p[b]),(0,l._Y)(e,c[k],C),c[m]=null;b++}else(0,l.ws)(c[Z]),Z--;else(0,l.ws)(c[k]),k++;for(;b<=w;){var z=(0,l._Y)(e,v[w+1]);(0,l.fk)(z,p[b]),v[b++]=z}for(;k<=Z;){var A=c[k++];null!==A&&(0,l.ws)(A)}return this.ut=d,(0,l.hl)(e,v),o.Jb}}])}(u.Xe))}}]);
//# sourceMappingURL=33043.5bfd1af926c06dbf.js.map