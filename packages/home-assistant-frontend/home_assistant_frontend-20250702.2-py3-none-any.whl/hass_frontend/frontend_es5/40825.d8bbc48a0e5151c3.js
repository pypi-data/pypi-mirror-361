"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([["40825"],{55815:function(e,t,a){a.d(t,{Eu:function(){return o},hZ:function(){return s},o9:function(){return c}});a(24819),a(54480);var r=a(28105),n=a(45657),i=["#4269d0","#f4bd4a","#ff725c","#6cc5b0","#a463f2","#ff8ab7","#9c6b4e","#97bbf5","#01ab63","#094bad","#c99000","#d84f3e","#49a28f","#048732","#d96895","#8043ce","#7599d1","#7a4c31","#6989f4","#ffd444","#ff957c","#8fe9d3","#62cc71","#ffadda","#c884ff","#badeff","#bf8b6d","#927acc","#97ee3f","#bf3947","#9f5b00","#f48758","#8caed6","#f2b94f","#eff26e","#e43872","#d9b100","#9d7a00","#698cff","#00d27e","#d06800","#009f82","#c49200","#cbe8ff","#fecddf","#c27eb6","#8cd2ce","#c4b8d9","#f883b0","#a49100","#f48800","#27d0df","#a04a9b"];function o(e){return i[e%i.length]}function s(e,t){var a=t.getPropertyValue("--graph-color-".concat(e+1))||o(e);return(0,n.Rq)(a)}var c=(0,r.Z)(function(e){return i.map(function(t,a){return s(a,e)})},function(e,t){return e[0].getPropertyValue("--graph-color-1")===t[0].getPropertyValue("--graph-color-1")})},51676:function(e,t,a){a.a(e,async function(e,t){try{var r,n,i=a(54982),o=a(42385),s=a(54521),c=a(4490),u=a(67063),l=a(20129),d=a(85297),f=(a(12212),a(25518),a(70021),a(14487),a(24674),a(26847),a(24819),a(2394),a(44438),a(18574),a(20678),a(81738),a(94814),a(29981),a(22960),a(6989),a(93190),a(7175),a(87799),a(54480),a(11353),a(67886),a(65451),a(46015),a(38334),a(94880),a(75643),a(29761),a(48694),a(67398),a(27530),a(73742)),h=a(7616),v=a(59048),p=a(8e4),_=a(28105),g=a(64346),y=a(3901),b=a(37008),m=a(28996),k=(a(12942),e([b,g]));[b,g]=k.then?(await k)():k;var x=function(e){function t(){var e;(0,s.Z)(this,t);for(var a=arguments.length,r=new Array(a),n=0;n<a;n++)r[n]=arguments[n];return(e=(0,l.Z)(this,t,[].concat(r))).data={nodes:[],links:[]},e.vertical=!1,e._sizeController=new g.Z((0,u.Z)(e),{callback:function(e){var t;return null===(t=e[0])||void 0===t?void 0:t.contentRect}}),e._renderTooltip=function(t){var a=t.data,r=e.valueFormatter?e.valueFormatter(a.value):a.value;if(a.id){var n,i=e.data.nodes.find(function(e){return e.id===a.id});return"".concat(t.marker," ").concat(null!==(n=null==i?void 0:i.label)&&void 0!==n?n:a.id,"<br>").concat(r)}if(a.source&&a.target){var o,s,c=e.data.nodes.find(function(e){return e.id===a.source}),u=e.data.nodes.find(function(e){return e.id===a.target});return"".concat(null!==(o=null==c?void 0:c.label)&&void 0!==o?o:a.source," â†’ ").concat(null!==(s=null==u?void 0:u.label)&&void 0!==s?s:a.target,"<br>").concat(r)}return null},e._createData=(0,_.Z)(function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=t.nodes.filter(function(e){return e.value>0}),n=(0,o.Z)(new Set(r.map(function(e){return e.index}))).sort(),i=new Map,s=[];n.forEach(function(a,n){i.set(a,n);var o=r.filter(function(e){return e.index===a});o.length>0&&s.push(s.length>0?o.sort(function(a,r){var n=e._findParentIndex(a.id,t.links,s),i=e._findParentIndex(r.id,t.links,s);return n===i?0:-1===n?1:-1===i?-1:n-i}):o)});var c=e._processLinks(r,t.links),u=a/n.length-m.TB-5;return{id:"sankey",type:"sankey",nodes:s.flat().map(function(e){return{id:e.id,value:e.value,itemStyle:{color:e.color},depth:i.get(e.index)}}),links:c,draggable:!1,orient:e.vertical?"vertical":"horizontal",nodeWidth:15,nodeGap:8,lineStyle:{color:"gradient",opacity:.4},layoutIterations:0,label:{formatter:function(e){var a,r;return null!==(a=null===(r=t.nodes.find(function(t){return t.id===e.data.id}))||void 0===r?void 0:r.label)&&void 0!==a?a:e.data.id},position:e.vertical?"bottom":"right",distance:5,minMargin:5,overflow:"break"},labelLayout:function(t){if(e.vertical){var a=t.text.split(" ").reduce(function(e,t){return e.length>t.length?e:t},""),r=(0,y.U)(a,12),n=Math.min(12,t.rect.width/r*12);return{fontSize:n>1?n:0,width:t.rect.width,align:"center"}}var i=Math.ceil(t.labelRect.width/u),o=Math.min(t.rect.height/i*12,12);return{fontSize:o,lineHeight:o,width:u,height:t.rect.height}},top:e.vertical?0:5,bottom:e.vertical?25:5,left:e.vertical?5:0,right:e.vertical?5:u+5,emphasis:{focus:"adjacency"}}}),e}return(0,d.Z)(t,e),(0,c.Z)(t,[{key:"render",value:function(){var e,t={grid:{top:0,bottom:0,left:0,right:0},tooltip:{trigger:"item",formatter:this._renderTooltip,appendTo:document.body}};return(0,v.dy)(r||(r=(0,i.Z)(['<ha-chart-base .data="','" .options="','" height="100%" .extraComponents="','"></ha-chart-base>'])),this._createData(this.data,null===(e=this._sizeController.value)||void 0===e?void 0:e.width),t,[p.N])}},{key:"_processLinks",value:function(e,t){var a=new Map,r=new Map,n=[];return t.forEach(function(t){var i,o=e.find(function(e){return e.id===t.source}),s=e.find(function(e){return e.id===t.target});if(o&&s){var c=r.get(o.id)||0,u=a.get(s.id)||0,l=o.value-c,d=s.value-u,f=Math.min(null!==(i=t.value)&&void 0!==i?i:l,l,d);a.set(s.id,u+f),r.set(o.id,c+f),f>0&&n.push(Object.assign(Object.assign({},t),{},{value:f}))}}),n}},{key:"_findParentIndex",value:function(e,t,a){var r,n=null===(r=t.find(function(t){return t.target===e}))||void 0===r?void 0:r.source;if(!n)return-1;for(var i=0,o=a.length-1;o>=0;o--){var s=a[o],c=s.findIndex(function(e){return e.id===n});if(-1!==c)return i+c;i+=s.length}return-1}}])}(v.oi);x.styles=(0,v.iv)(n||(n=(0,i.Z)([":host{display:block;flex:1;background:var(--ha-card-background,var(--card-background-color))}ha-chart-base{width:100%;height:100%}"]))),(0,f.__decorate)([(0,h.Cb)({attribute:!1})],x.prototype,"hass",void 0),(0,f.__decorate)([(0,h.Cb)({attribute:!1})],x.prototype,"data",void 0),(0,f.__decorate)([(0,h.Cb)({type:Boolean})],x.prototype,"vertical",void 0),(0,f.__decorate)([(0,h.Cb)({type:String,attribute:!1})],x.prototype,"valueFormatter",void 0),(0,f.__decorate)([(0,h.SB)()],x.prototype,"_sizeController",void 0),x=(0,f.__decorate)([(0,h.Mo)("ha-sankey-chart")],x),t()}catch(S){t(S)}})},84447:function(e,t,a){a(26847),a(87799),a(27530);var r=a(73742),n=a(27885),i=a(67522),o=a(23533),s=a(7046),c=a(59048),u=a(7616);let l,d,f,h,v=e=>e;class p extends n.g{renderOutline(){return this.filled?(0,c.dy)(l||(l=v`<span class="filled"></span>`)):super.renderOutline()}getContainerClasses(){return Object.assign(Object.assign({},super.getContainerClasses()),{},{active:this.active})}renderPrimaryContent(){return(0,c.dy)(d||(d=v` <span class="leading icon" aria-hidden="true"> ${0} </span> <span class="label">${0}</span> <span class="touch"></span> <span class="trailing leading icon" aria-hidden="true"> ${0} </span> `),this.renderLeadingIcon(),this.label,this.renderTrailingIcon())}renderTrailingIcon(){return(0,c.dy)(f||(f=v`<slot name="trailing-icon"></slot>`))}constructor(...e){super(...e),this.filled=!1,this.active=!1}}p.styles=[o.W,s.W,i.W,(0,c.iv)(h||(h=v`:host{--md-sys-color-primary:var(--primary-text-color);--md-sys-color-on-surface:var(--primary-text-color);--md-assist-chip-container-shape:var(
          --ha-assist-chip-container-shape,
          16px
        );--md-assist-chip-outline-color:var(--outline-color);--md-assist-chip-label-text-weight:400}.filled{display:flex;pointer-events:none;border-radius:inherit;inset:0;position:absolute;background-color:var(--ha-assist-chip-filled-container-color)}::slotted([slot=icon]),::slotted([slot=trailing-icon]){display:flex;--mdc-icon-size:var(--md-input-chip-icon-size, 18px);font-size:var(--_label-text-size)!important}.trailing.icon ::slotted(*),.trailing.icon svg{margin-inline-end:unset;margin-inline-start:var(--_icon-label-space)}::before{background:var(--ha-assist-chip-container-color,transparent);opacity:var(--ha-assist-chip-container-opacity, 1)}:where(.active)::before{background:var(--ha-assist-chip-active-container-color);opacity:var(--ha-assist-chip-active-container-opacity)}.label{font-family:var(--ha-font-family-body)}`))],(0,r.__decorate)([(0,u.Cb)({type:Boolean,reflect:!0})],p.prototype,"filled",void 0),(0,r.__decorate)([(0,u.Cb)({type:Boolean})],p.prototype,"active",void 0),p=(0,r.__decorate)([(0,u.Mo)("ha-assist-chip")],p)},28996:function(e,t,a){a.d(t,{N_:function(){return r},Qs:function(){return i},TB:function(){return n}});var r=10,n=30,i=20},7214:function(e,t,a){a.d(t,{Cj:function(){return h},F7:function(){return i},Hs:function(){return C},Kd:function(){return x},Kj:function(){return p},Nw:function(){return g},PA:function(){return o},Py:function(){return u},Qm:function(){return w},Z0:function(){return m},_Y:function(){return d},_m:function(){return s},dL:function(){return l},dO:function(){return S},hN:function(){return v},h_:function(){return f},j2:function(){return k},q6:function(){return _},uR:function(){return c}});var r=a(75706),n=(a(39710),a(81738),a(72489),a(54480),a(56389),a(15459)),i=function(e){return e[e.NONE=0]="NONE",e[e.ARITHMETIC=1]="ARITHMETIC",e[e.CIRCULAR=2]="CIRCULAR",e}({}),o=99387==a.j?["entity_not_recorded","entity_no_longer_recorded","state_class_removed","units_changed","mean_type_changed","no_state"]:null,s=function(e){return e.sendMessagePromise({type:"recorder/info"})},c=function(e,t){return e.callWS({type:"recorder/list_statistic_ids",statistic_type:t})},u=function(e,t){return e.callWS({type:"recorder/get_statistics_metadata",statistic_ids:t})},l=function(e,t,a,r){var n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"hour",i=arguments.length>5?arguments[5]:void 0,o=arguments.length>6?arguments[6]:void 0;return e.callWS({type:"recorder/statistics_during_period",start_time:t.toISOString(),end_time:null==a?void 0:a.toISOString(),statistic_ids:r,period:n,units:i,types:o})},d=function(e,t,a,r){return e.callWS({type:"recorder/statistic_during_period",statistic_id:t,units:r,fixed_period:a.fixed_period?{start_time:a.fixed_period.start instanceof Date?a.fixed_period.start.toISOString():a.fixed_period.start,end_time:a.fixed_period.end instanceof Date?a.fixed_period.end.toISOString():a.fixed_period.end}:void 0,calendar:a.calendar,rolling_window:a.rolling_window})},f=function(e){return e.callWS({type:"recorder/validate_statistics"})},h=function(e,t,a){return e.callWS({type:"recorder/update_statistics_metadata",statistic_id:t,unit_of_measurement:a})},v=function(e,t){return e.callWS({type:"recorder/clear_statistics",statistic_ids:t})},p=function(e){var t=null;if(!e)return null;var a,n=(0,r.Z)(e);try{for(n.s();!(a=n.n()).done;){var i=a.value;null!==i.change&&void 0!==i.change&&(null===t?t=i.change:t+=i.change)}}catch(o){n.e(o)}finally{n.f()}return t},_=function(e,t){var a,n=null,i=(0,r.Z)(t);try{for(i.s();!(a=i.n()).done;){var o=a.value;if(o in e){var s=p(e[o]);null!==s&&(null===n?n=s:n+=s)}}}catch(c){i.e(c)}finally{i.f()}return n},g=function(e,t){return e.some(function(e){return void 0!==e[t]&&null!==e[t]})},y=["mean","min","max"],b=["sum","state","change"],m=function(e,t){return!(!y.includes(t)||0===e.mean_type)||!(!b.includes(t)||!e.has_sum)},k=function(e,t,a,r,n){var i=new Date(a).toISOString();return e.callWS({type:"recorder/adjust_sum_statistics",statistic_id:t,start_time:i,adjustment:r,adjustment_unit_of_measurement:n})},x=function(e,t,a){var r=e.states[t];return r?(0,n.C)(r):(null==a?void 0:a.name)||t},S=function(e,t,a){var r,n;t&&(r=null===(n=e.states[t])||void 0===n?void 0:n.attributes.unit_of_measurement);return void 0===r?null==a?void 0:a.statistics_unit_of_measurement:r},C=function(e){return e.includes(":")},w=function(e){return e.callWS({type:"recorder/update_statistics_issues"})}},6291:function(e,t,a){a.d(t,{f:function(){return d}});var r=a(75706),n=a(54521),i=a(4490),o=a(20129),s=a(53389),c=a(85297),u=(a(39710),a(26847),a(81738),a(72489),a(54480),a(1455),a(56389),a(27530),a(73742)),l=a(7616),d=function(e){var t=function(e){function t(){return(0,n.Z)(this,t),(0,o.Z)(this,t,arguments)}return(0,c.Z)(t,e),(0,i.Z)(t,[{key:"connectedCallback",value:function(){(0,s.Z)(t,"connectedCallback",this,3)([]),this._checkSubscribed()}},{key:"disconnectedCallback",value:function(){if((0,s.Z)(t,"disconnectedCallback",this,3)([]),this.__unsubs){for(;this.__unsubs.length;){var e=this.__unsubs.pop();e instanceof Promise?e.then(function(e){return e()}):e()}this.__unsubs=void 0}}},{key:"updated",value:function(e){if((0,s.Z)(t,"updated",this,3)([e]),e.has("hass"))this._checkSubscribed();else if(this.hassSubscribeRequiredHostProps){var a,n=(0,r.Z)(e.keys());try{for(n.s();!(a=n.n()).done;){var i=a.value;if(this.hassSubscribeRequiredHostProps.includes(i))return void this._checkSubscribed()}}catch(o){n.e(o)}finally{n.f()}}}},{key:"hassSubscribe",value:function(){return[]}},{key:"_checkSubscribed",value:function(){var e,t=this;void 0!==this.__unsubs||!this.isConnected||void 0===this.hass||null!==(e=this.hassSubscribeRequiredHostProps)&&void 0!==e&&e.some(function(e){return void 0===t[e]})||(this.__unsubs=this.hassSubscribe())}}])}(e);return(0,u.__decorate)([(0,l.Cb)({attribute:!1})],t.prototype,"hass",void 0),t}},8528:function(e,t,a){a.a(e,async function(e,r){try{a.r(t);var n,i,o,s,c,u=a(42385),l=a(54982),d=a(54521),f=a(4490),h=a(20129),v=a(85297),p=(a(12212),a(25518),a(39710),a(2394),a(44438),a(18574),a(73042),a(81738),a(22960),a(93190),a(87799),a(24533),a(54480),a(69920),a(56389),a(67398),a(73742)),_=a(59048),g=a(7616),y=(a(31138),a(993),a(6640)),b=a(7214),m=a(6291),k=a(51676),x=a(55815),S=a(28598),C=a(51574),w=e([k,y,S]);[k,y,S]=w.then?(await w)():w;var Z={group_by_floor:!0,group_by_area:!0},P=function(e){function t(){var e;(0,d.Z)(this,t);for(var a=arguments.length,r=new Array(a),n=0;n<a;n++)r[n]=arguments[n];return(e=(0,h.Z)(this,t,[].concat(r))).hassSubscribeRequiredHostProps=["_config"],e._valueFormatter=function(t){return"".concat((0,S.uf)(t,e.hass.locale)," kWh")},e}return(0,v.Z)(t,e),(0,f.Z)(t,[{key:"setConfig",value:function(e){this._config=Object.assign(Object.assign({},Z),e)}},{key:"hassSubscribe",value:function(){var e,t=this;return[(0,y.UB)(this.hass,{key:null===(e=this._config)||void 0===e?void 0:e.collection_key}).subscribe(function(e){t._data=e})]}},{key:"getCardSize",value:function(){return 5}},{key:"getGridOptions",value:function(){return{columns:12,min_columns:6,rows:6,min_rows:2}}},{key:"shouldUpdate",value:function(e){return e.has("_config")||e.has("_data")}},{key:"render",value:function(){var e=this;if(!this._config)return _.Ld;if(!this._data)return(0,_.dy)(n||(n=(0,l.Z)(["",""])),this.hass.localize("ui.panel.lovelace.cards.energy.loading"));var t=this._data.prefs,a=(0,y.Jj)(t),r=(0,y.EH)(this._data),c=r.summedData,u=(r.compareSummedData,getComputedStyle(this)),d=[],f=[],h={id:"home",label:this.hass.localize("ui.panel.lovelace.cards.energy.energy_distribution.home"),value:0,color:u.getPropertyValue("--primary-color"),index:1};if(d.push(h),a.grid){var v,p=null!==(v=c.total.from_grid)&&void 0!==v?v:0;d.push({id:"grid",label:this.hass.localize("ui.panel.lovelace.cards.energy.energy_distribution.grid"),value:p,tooltip:"".concat((0,S.uf)(p,this.hass.locale)," kWh"),color:u.getPropertyValue("--energy-grid-consumption-color"),index:0}),f.push({source:"grid",target:"home"})}if(a.solar){var g,m=null!==(g=c.total.solar)&&void 0!==g?g:0;d.push({id:"solar",label:this.hass.localize("ui.panel.lovelace.cards.energy.energy_distribution.solar"),value:m,tooltip:"".concat((0,S.uf)(m,this.hass.locale)," kWh"),color:u.getPropertyValue("--energy-solar-color"),index:0}),f.push({source:"solar",target:"home"})}if(h.value=d.filter(function(e){return 0===e.index}).reduce(function(e,t){return e+(t.value||0)},0),a.battery){var k,C,w=(null!==(k=c.total.from_battery)&&void 0!==k?k:0)-(null!==(C=c.total.to_battery)&&void 0!==C?C:0),Z=Math.max(w,0),P=Math.max(-w,0);h.value+=w,d.push({id:"battery",label:this.hass.localize("ui.panel.lovelace.cards.energy.energy_distribution.battery"),value:Z,tooltip:"".concat((0,S.uf)(Z,this.hass.locale)," kWh"),color:u.getPropertyValue("--energy-battery-out-color"),index:0}),f.push({source:"battery",target:"home"}),d.push({id:"battery_in",label:this.hass.localize("ui.panel.lovelace.cards.energy.energy_distribution.battery"),value:P,tooltip:"".concat((0,S.uf)(P,this.hass.locale)," kWh"),color:u.getPropertyValue("--energy-battery-in-color"),index:1}),d.forEach(function(e){0===e.index&&f.push({source:e.id,target:"battery_in"})})}if(a.grid&&a.grid[0].flow_to){var W,z=null!==(W=c.total.to_grid)&&void 0!==W?W:0;d.push({id:"grid_return",label:this.hass.localize("ui.panel.lovelace.cards.energy.energy_distribution.grid"),value:z,tooltip:"".concat((0,S.uf)(z,this.hass.locale)," kWh"),color:u.getPropertyValue("--energy-grid-return-color"),index:1}),d.forEach(function(e){0===e.index&&"grid"!==e.id&&f.push({source:e.id,target:"grid_return"})}),h.value-=z}var O=h.value,j=[],E={};t.device_consumption.forEach(function(t,a){var r=t.stat_consumption in e._data.stats&&(0,b.Kj)(e._data.stats[t.stat_consumption])||0;if(!(r<.01)){var n={id:t.stat_consumption,label:t.name||(0,b.Kd)(e.hass,t.stat_consumption,e._data.statsMetadata[t.stat_consumption]),value:r,tooltip:"".concat((0,S.uf)(r,e.hass.locale)," kWh"),color:(0,x.hZ)(a,u),index:4,parent:t.included_in_stat};n.parent?(E[n.id]=n.parent,f.push({source:n.parent,target:n.id})):O-=r,j.push(n)}});var I=j.filter(function(e){return!E[e.id]}),M=this._config,R=M.group_by_area,B=M.group_by_floor;if(R||B){var T=this._groupByFloorAndArea(I),V=T.areas,A=T.floors;Object.keys(A).sort(function(t,a){var r,n,i,o;return(null!==(r=null===(n=e.hass.floors[a])||void 0===n?void 0:n.level)&&void 0!==r?r:-1/0)-(null!==(i=null===(o=e.hass.floors[t])||void 0===o?void 0:o.level)&&void 0!==i?i:-1/0)}).forEach(function(t){var a="floor_".concat(t);"no_floor"!==t&&B?(d.push({id:a,label:e.hass.floors[t].name,value:A[t].value,tooltip:"".concat((0,S.uf)(A[t].value,e.hass.locale)," kWh"),index:2,color:u.getPropertyValue("--primary-color")}),f.push({source:"home",target:a})):a="home",A[t].areas.forEach(function(t){var r;if("no_area"!==t&&R){var n="area_".concat(t);d.push({id:n,label:e.hass.areas[t].name,value:V[t].value,tooltip:"".concat((0,S.uf)(V[t].value,e.hass.locale)," kWh"),index:3,color:u.getPropertyValue("--primary-color")}),f.push({source:a,target:n,value:V[t].value}),r=n}else r=a;V[t].devices.forEach(function(e){f.push({source:r,target:e.id,value:e.value})})})})}else I.forEach(function(e){f.push({source:"home",target:e.id,value:e.value})});var D=this._getDeviceSections(E,j);D.forEach(function(e,t){e.forEach(function(e){d.push(Object.assign(Object.assign({},e),{},{index:4+t}))})}),O>0?(d.push({id:"untracked",label:this.hass.localize("ui.panel.lovelace.cards.energy.energy_devices_detail_graph.untracked_consumption"),value:O,tooltip:"".concat((0,S.uf)(O,this.hass.locale)," kWh"),color:u.getPropertyValue("--state-unavailable-color"),index:3+D.length}),f.push({source:"home",target:"untracked",value:O})):O<0&&(h.value-=O),h.tooltip="".concat((0,S.uf)(h.value,this.hass.locale)," kWh");var F=d.some(function(e){return e.value>0});return(0,_.dy)(i||(i=(0,l.Z)([' <ha-card .header="','"> <div class="card-content"> '," </div> </ha-card> "])),this._config.title,F?(0,_.dy)(o||(o=(0,l.Z)(['<ha-sankey-chart .data="','" .vertical="','" .valueFormatter="','"></ha-sankey-chart>'])),{nodes:d,links:f},"vertical"===this._config.layout,this._valueFormatter):(0,_.dy)(s||(s=(0,l.Z)(["",""])),this.hass.localize("ui.panel.lovelace.cards.energy.no_data_period")))}},{key:"_groupByFloorAndArea",value:function(e){var t=this,a={no_area:{value:0,devices:[]}},r={no_floor:{value:0,areas:["no_area"]}};return e.forEach(function(e){var n=t.hass.states[e.id],i=(0,C.U)(n,t.hass),o=i.area,s=i.floor;o?(o.area_id in a?(a[o.area_id].value+=e.value,a[o.area_id].devices.push(e)):a[o.area_id]={value:e.value,devices:[e]},s?s.floor_id in r?(r[s.floor_id].value+=e.value,r[s.floor_id].areas.includes(o.area_id)||r[s.floor_id].areas.push(o.area_id)):r[s.floor_id]={value:e.value,areas:[o.area_id]}:(r.no_floor.value+=e.value,r.no_floor.areas.includes(o.area_id)||r.no_floor.areas.unshift(o.area_id))):(a.no_area.value+=e.value,a.no_area.devices.push(e))}),{areas:a,floors:r}}},{key:"_getDeviceSections",value:function(e,t){var a=[],r=[],n=Object.values(e),i={};return t.forEach(function(t){n.includes(t.id)?(a.push(t),i[t.id]=e[t.id]):r.push(t)}),a.length>0?[].concat((0,u.Z)(this._getDeviceSections(i,a)),[r]):[t]}}])}((0,m.f)(_.oi));P.styles=(0,_.iv)(c||(c=(0,l.Z)([":host{display:block;height:calc(var(--row-size,8) * (var(--row-height,50px) + var(--row-gap,0px)) - var(--row-gap,0px))}ha-card{height:100%;display:flex;flex-direction:column}.card-content{flex:1;display:flex}"]))),(0,p.__decorate)([(0,g.Cb)({attribute:!1})],P.prototype,"hass",void 0),(0,p.__decorate)([(0,g.SB)()],P.prototype,"_config",void 0),(0,p.__decorate)([(0,g.SB)()],P.prototype,"_data",void 0),P=(0,p.__decorate)([(0,g.Mo)("hui-energy-sankey-card")],P),r()}catch(W){r(W)}})},3901:function(e,t,a){a.d(t,{U:function(){return n}});var r;a(12212);function n(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Roboto, Noto, sans-serif";r||(r=document.createElement("canvas"));var n=r.getContext("2d");if(!n)return 0;n.font="".concat(t,"px ").concat(a);var i=n.measureText(e);return Math.ceil(Math.max(i.actualBoundingBoxRight+i.actualBoundingBoxLeft,i.width))}}}]);
//# sourceMappingURL=40825.d8bbc48a0e5151c3.js.map