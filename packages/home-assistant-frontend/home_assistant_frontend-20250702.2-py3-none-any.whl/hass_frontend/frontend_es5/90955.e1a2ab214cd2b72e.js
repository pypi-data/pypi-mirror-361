"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([["90955"],{45332:function(n,e,t){function r(n){return null==n||Array.isArray(n)?n:[n]}t.d(e,{r:function(){return r}})},54731:function(n,e,t){t.d(e,{z:function(){return r}});t(39710),t(56389);var r=function(n){return function(e,t){return n.includes(e,t)}}},2080:function(n,e,t){t.d(e,{J:function(){return o},_:function(){return c}});var r=t(61943),i=(t(81738),t(72489),t(54480),t(69920),t(64455),t(32192),/{%|{{/),o=function(n){return i.test(n)},c=function(n){return!!n&&("string"==typeof n?o(n):"object"===(0,r.Z)(n)&&(Array.isArray(n)?n:Object.values(n)).some(function(n){return n&&c(n)}))}},10142:function(n,e,t){t.d(e,{B$:function(){return f},EQ:function(){return m},Es:function(){return g},Gd:function(){return d},HF:function(){return w},Ip:function(){return j},J8:function(){return R},Jd:function(){return E},Kc:function(){return Z},Pl:function(){return A},SC:function(){return p},SQ:function(){return v},T5:function(){return q},W9:function(){return b},Xm:function(){return M},Yc:function(){return l},r4:function(){return _},sq:function(){return y}});var r,i=t(61943),o=t(42385),c=(t(24819),t(2394),t(81738),t(22960),t(6989),t(87799),t(54480),t(67398),t(67050)),a=t(45332),u=t(66095),s=t(64637),f="single",l=10,d=function(n){if("condition"in n&&Array.isArray(n.condition))return{condition:"and",conditions:n.condition};for(var e=0,t=["and","or","not"];e<t.length;e++){var r=t[e];if(r in n)return{condition:r,conditions:n[r]}}return n},g=function(n,e){n.callService("automation","trigger",{entity_id:e,skip_condition:!0})},p=function(n,e){return n.callApi("DELETE","config/automation/config/".concat(e))},_=function(n,e){return n.callApi("GET","config/automation/config/".concat(e))},v=function(n,e){return n.callWS({type:"automation/config",entity_id:e})},y=function(n,e,t){return n.callApi("POST","config/automation/config/".concat(e),t)},m=function(n){n=h(n);for(var e=0,t=["triggers","conditions","actions"];e<t.length;e++){var r=t[e],i=n[r];i&&!Array.isArray(i)&&(n[r]=[i])}return n},h=function(n){return"trigger"in n&&("triggers"in n||(n.triggers=n.trigger),delete n.trigger),"condition"in n&&("conditions"in n||(n.conditions=n.condition),delete n.condition),"action"in n&&("actions"in n||(n.actions=n.action),delete n.action),n.triggers&&(n.triggers=b(n.triggers)),n.actions&&(n.actions=(0,u.eR)(n.actions)),n},b=function(n){return n?Array.isArray(n)?n.map(b):("triggers"in n&&n.triggers&&(n.triggers=b(n.triggers)),"platform"in n&&("trigger"in n||(n.trigger=n.platform),delete n.platform),n):n},Z=function(n){if(!n)return[];var e=[];return(0,a.r)(n).forEach(function(n){"triggers"in n?n.triggers&&e.push.apply(e,(0,o.Z)(Z(n.triggers))):e.push(n)}),e},j=function(n,e){r=n;var t=e?"?".concat((0,s.ou)({expanded:"1"})):"";(0,c.c)("/config/automation/edit/new".concat(t))},w=function(n){j(Object.assign(Object.assign({},n),{},{id:void 0,alias:void 0}))},A=function(){var n=r;return r=void 0,n},E=function(n){if(!n||"object"!==(0,i.Z)(n))return!1;var e=n;return"trigger"in e&&"string"==typeof e.trigger||"platform"in e&&"string"==typeof e.platform},q=function(n){if(!n||"object"!==(0,i.Z)(n))return!1;return"condition"in n&&"string"==typeof n.condition},M=function(n,e,t,r){return n.connection.subscribeMessage(e,{type:"subscribe_trigger",trigger:t,variables:r})},R=function(n,e,t){return n.callWS({type:"test_condition",condition:e,variables:t})}},66095:function(n,e,t){t.d(e,{EH:function(){return g},FI:function(){return E},Kx:function(){return v},Pw:function(){return q},TL:function(){return y},ZN:function(){return k},eM:function(){return w},eR:function(){return R},kC:function(){return h},oE:function(){return j},oR:function(){return Z},rg:function(){return A},rq:function(){return b},sf:function(){return M},vA:function(){return p}});var r,i=t(75706),o=t(61943),c=(t(24819),t(81738),t(6989),t(24533),t(54480),t(10490),t(95632)),a=t(54731),u=t(67050),s=t(10142),f=t(17433),l=t(64637),d=t(2080),g=["single","restart","queued","parallel"],p=(0,a.z)(["queued","parallel"]),_=(0,c.Ry)({alias:(0,c.jt)((0,c.Z_)()),continue_on_error:(0,c.jt)((0,c.O7)()),enabled:(0,c.jt)((0,c.O7)())}),v=(0,c.Ry)({entity_id:(0,c.jt)((0,c.G0)([(0,c.Z_)(),(0,c.IX)((0,c.Z_)())])),device_id:(0,c.jt)((0,c.G0)([(0,c.Z_)(),(0,c.IX)((0,c.Z_)())])),area_id:(0,c.jt)((0,c.G0)([(0,c.Z_)(),(0,c.IX)((0,c.Z_)())])),floor_id:(0,c.jt)((0,c.G0)([(0,c.Z_)(),(0,c.IX)((0,c.Z_)())])),label_id:(0,c.jt)((0,c.G0)([(0,c.Z_)(),(0,c.IX)((0,c.Z_)())]))}),y=(0,c.f0)(_,(0,c.Ry)({action:(0,c.jt)((0,c.Z_)()),service_template:(0,c.jt)((0,c.Z_)()),entity_id:(0,c.jt)((0,c.Z_)()),target:(0,c.jt)((0,c.G0)([v,(0,c.lF)((0,c.Z_)(),"has_template",function(n){return(0,d._)(n)})])),data:(0,c.jt)((0,c.Ry)()),response_variable:(0,c.jt)((0,c.Z_)()),metadata:(0,c.jt)((0,c.Ry)())})),m=(0,c.f0)(_,(0,c.Ry)({action:(0,c.i0)("media_player.play_media"),target:(0,c.jt)((0,c.Ry)({entity_id:(0,c.jt)((0,c.Z_)())})),entity_id:(0,c.jt)((0,c.Z_)()),data:(0,c.Ry)({media_content_id:(0,c.Z_)(),media_content_type:(0,c.Z_)()}),metadata:(0,c.Ry)()})),h=function(n,e,t){return n.callService("script",e,t)},b=function(n){return"off"===n.state||!!("on"===n.state&&p(n.attributes.mode)&&n.attributes.current<n.attributes.max)},Z=function(n,e){return n.callApi("DELETE","config/script/config/".concat(e))},j=function(n,e){return n.callApi("GET","config/script/config/".concat(e))},w=function(n,e){return n.callWS({type:"script/config",entity_id:e})},A=function(n,e){r=n;var t=e?"?".concat((0,l.ou)({expanded:"1"})):"";(0,u.c)("/config/script/edit/new".concat(t))},E=function(){var n=r;return r=void 0,n},q=function(n){return"string"==typeof n&&(0,d._)(n)?"check_condition":"delay"in n?"delay":"wait_template"in n?"wait_template":["condition","and","or","not"].some(function(e){return e in n})?"check_condition":"event"in n?"fire_event":"device_id"in n?"device_action":"repeat"in n?"repeat":"choose"in n?"choose":"if"in n?"if":"wait_for_trigger"in n?"wait_for_trigger":"variables"in n?"variables":"stop"in n?"stop":"sequence"in n?"sequence":"parallel"in n?"parallel":"set_conversation_response"in n?"set_conversation_response":"action"in n||"service"in n?"metadata"in n&&(0,c.is)(n,m)?"play_media":"service":"unknown"},M=function(n,e){var t,r=null===(t=n.services.script[(0,f.p)(e)])||void 0===t?void 0:t.fields;return void 0!==r&&Object.keys(r).length>0},R=function(n){if(!n)return n;if(Array.isArray(n))return n.map(R);if("object"===(0,o.Z)(n)&&null!==n&&"service"in n&&("action"in n||(n.action=n.service),delete n.service),"object"===(0,o.Z)(n)&&null!==n&&"scene"in n&&(n.action="scene.turn_on",n.target={entity_id:n.scene},delete n.scene),"object"===(0,o.Z)(n)&&null!==n&&"sequence"in n){var e,t=(0,i.Z)(n.sequence);try{for(t.s();!(e=t.n()).done;){var r=e.value;R(r)}}catch(p){t.e(p)}finally{t.f()}}var c=q(n);"parallel"===c&&R(n.parallel);if("choose"===c){var a=n;if(Array.isArray(a.choose)){var u,f=(0,i.Z)(a.choose);try{for(f.s();!(u=f.n()).done;){var l=u.value;R(l.sequence)}}catch(p){f.e(p)}finally{f.f()}}else a.choose&&R(a.choose.sequence);a.default&&R(a.default)}"repeat"===c&&R(n.repeat.sequence);if("if"===c){var d=n;R(d.then),d.else&&R(d.else)}if("wait_for_trigger"===c){var g=n;(0,s.W9)(g.wait_for_trigger)}return n},k=function(n){var e=n.sequence;return e&&!Array.isArray(e)&&(n.sequence=[e]),n.sequence&&(n.sequence=R(n.sequence)),n}},18019:function(n,e,t){t.r(e),t.d(e,{addExternalBarCodeListener:function(){return s},attachExternalToApp:function(){return u},handleExternalMessage:function(){return f}});t(26847),t(81738),t(22960),t(54480),t(11353),t(67886),t(65451),t(46015),t(38334),t(94880),t(75643),t(29761),t(48694),t(67398),t(27530);var r=t(39884),i=t(83054),o=t(67050),c=t(10142),a=new Set,u=function(n){window.addEventListener("haptic",function(e){return n.hass.auth.external.fireMessage({type:"haptic",payload:{hapticType:e.detail}})}),n.hass.auth.external.addCommandHandler(function(e){return f(n,e)})},s=function(n){return a.add(n),function(){a.delete(n)}},f=function(n,e){var t=n.hass.auth.external;if("restart"===e.command)n.hass.connection.reconnect(!0),t.fireMessage({id:e.id,type:"result",success:!0,result:null});else if("navigate"===e.command)(0,o.c)(e.payload.path,e.payload.options),t.fireMessage({id:e.id,type:"result",success:!0,result:null});else if("notifications/show"===e.command)(0,r.B)(n,"hass-show-notifications"),t.fireMessage({id:e.id,type:"result",success:!0,result:null});else if("sidebar/toggle"===e.command){var u;if(null!==(u=i.E.history.state)&&void 0!==u&&u.open)return t.fireMessage({id:e.id,type:"result",success:!1,error:{code:"not_allowed",message:"dialog open"}}),!0;(0,r.B)(n,"hass-toggle-menu"),t.fireMessage({id:e.id,type:"result",success:!0,result:null})}else if("sidebar/show"===e.command){var s;if(null!==(s=i.E.history.state)&&void 0!==s&&s.open)return t.fireMessage({id:e.id,type:"result",success:!1,error:{code:"not_allowed",message:"dialog open"}}),!0;(0,r.B)(n,"hass-toggle-menu",{open:!0}),t.fireMessage({id:e.id,type:"result",success:!0,result:null})}else if("automation/editor/show"===e.command){var f;(0,c.Ip)(null===(f=e.payload)||void 0===f?void 0:f.config),t.fireMessage({id:e.id,type:"result",success:!0,result:null})}else if("improv/discovered_device"===e.command)(0,r.B)(window,"improv-discovered-device",e.payload),t.fireMessage({id:e.id,type:"result",success:!0,result:null});else if("improv/device_setup_done"===e.command)(0,r.B)(window,"improv-device-setup-done"),t.fireMessage({id:e.id,type:"result",success:!0,result:null});else if("bar_code/scan_result"===e.command)a.forEach(function(n){return n(e)}),t.fireMessage({id:e.id,type:"result",success:!0,result:null});else{if("bar_code/aborted"!==e.command)return!1;a.forEach(function(n){return n(e)}),t.fireMessage({id:e.id,type:"result",success:!0,result:null})}return!0}}}]);
//# sourceMappingURL=90955.e1a2ab214cd2b72e.js.map