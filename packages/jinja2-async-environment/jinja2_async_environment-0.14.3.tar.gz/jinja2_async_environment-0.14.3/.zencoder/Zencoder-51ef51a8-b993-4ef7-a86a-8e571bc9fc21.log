pdm run python -m crackerjack --ai-agent --verbose
direnv: loading ~/Projects/jinja2-async-environment/.envrc                      
direnv: export +PDM_ACTIVE ~PATH
(jinja2-async-environment) [jinja2-async-environment] pdm run python -m crackerjack --ai-agent --verbose

Crackerjacking...

PDM installed: ✅


Running pre-commit hooks...

pdm-lock-check...........................................................Passed
trailing-whitespace......................................................Passed
end-of-file-fixer........................................................Passed
check-yaml...............................................................Passed
check-toml...............................................................Passed
check-added-large-files..................................................Passed
ruff-format..............................................................Failed
- hook id: ruff-format
- files were modified by this hook

1 file reformatted, 15 files left unchanged

ruff.....................................................................Failed
- hook id: ruff
- files were modified by this hook

Fixed 1 error:
- tests/test_template_rendering.py:
    1 × F401 (unused-import)

Found 1 error (1 fixed, 0 remaining).

vulture..................................................................Passed
creosote.................................................................Passed
flynt....................................................................Passed
codespell................................................................Passed
autotyping...............................................................Passed
refurb...................................................................Failed
- hook id: refurb
- exit code: 1

tests/test_redis_bccache.py:51:44 [FURB120]: Don't pass an argument if it is the same as the default value
tests/test_redis_bccache.py:68:58 [FURB120]: Don't pass an argument if it is the same as the default value

Run `refurb --explain ERR` to further explain an error. Use `--quiet` to silence this message

bandit...................................................................Failed
- hook id: bandit
- exit code: 1

[main]  INFO    profile include tests: None
[main]  INFO    profile exclude tests: B403,B603,B311,B301,B607,B404,B704,B602,B101
[main]  INFO    cli include tests: None
[main]  INFO    cli exclude tests: None
[main]  INFO    using config: pyproject.toml
[main]  INFO    running on Python 3.13.3
Run started:2025-05-09 11:22:39.294198

Test results:
>> Issue: [B701:jinja2_autoescape_false] By default, jinja2 sets autoescape to False. Consider using autoescape=True or use the select_autoescape function to mitigate XSS vulnerabilities.
   Severity: High   Confidence: High
   CWE: CWE-94 (https://cwe.mitre.org/data/definitions/94.html)
   More Info: https://bandit.readthedocs.io/en/0.0.0/plugins/b701_jinja2_autoescape_false.html
   Location: ./tests/test_redis_bccache.py:23:15
22          def environment(self) -> Environment:
23              return Environment()
24      

--------------------------------------------------

Code scanned:
        Total lines of code: 2068
        Total lines skipped (#nosec): 0

Run metrics:
        Total issues (by severity):
                Undefined: 0
                Low: 0
                Medium: 0
                High: 1
        Total issues (by confidence):
                Undefined: 0
                Low: 0
                Medium: 0
                High: 1
Files skipped (0):

pyright..................................................................Failed
- hook id: pyright
- exit code: 1

/Users/les/Projects/jinja2-async-environment/jinja2_async_environment/loaders.py
  /Users/les/Projects/jinja2-async-environment/jinja2_async_environment/loaders.py:295:36 - error: "str" is not awaitable
    "str" is incompatible with protocol "Awaitable[_T_co@Awaitable]"
      "__await__" is not present (reportGeneralTypeIssues)
  /Users/les/Projects/jinja2-async-environment/jinja2_async_environment/loaders.py:295:36 - error: "int" is not awaitable
    "int" is incompatible with protocol "Awaitable[_T_co@Awaitable]"
      "__await__" is not present (reportGeneralTypeIssues)
  /Users/les/Projects/jinja2-async-environment/jinja2_async_environment/loaders.py:296:20 - error: Type "SourceType | Unknown | None" is not assignable to return type "SourceType"
    Type "SourceType | Unknown | None" is not assignable to type "SourceType"
      "None" is not assignable to "tuple[str | bytes, str | None, (() -> (bool | Awaitable[bool])) | None]" (reportReturnType)
/Users/les/Projects/jinja2-async-environment/tests/test_template_rendering.py
  /Users/les/Projects/jinja2-async-environment/tests/test_template_rendering.py:39:39 - error: "Iterator[str]" is not iterable
    "__aiter__" method not defined (reportGeneralTypeIssues)
  /Users/les/Projects/jinja2-async-environment/tests/test_template_rendering.py:50:39 - error: "Iterator[str]" is not iterable
    "__aiter__" method not defined (reportGeneralTypeIssues)
  /Users/les/Projects/jinja2-async-environment/tests/test_template_rendering.py:63:39 - error: "Iterator[str]" is not iterable
    "__aiter__" method not defined (reportGeneralTypeIssues)
  /Users/les/Projects/jinja2-async-environment/tests/test_template_rendering.py:78:39 - error: "Iterator[str]" is not iterable
    "__aiter__" method not defined (reportGeneralTypeIssues)
  /Users/les/Projects/jinja2-async-environment/tests/test_template_rendering.py:93:39 - error: "Iterator[str]" is not iterable
    "__aiter__" method not defined (reportGeneralTypeIssues)
  /Users/les/Projects/jinja2-async-environment/tests/test_template_rendering.py:108:39 - error: "Iterator[str]" is not iterable
    "__aiter__" method not defined (reportGeneralTypeIssues)
  /Users/les/Projects/jinja2-async-environment/tests/test_template_rendering.py:130:39 - error: "Iterator[str]" is not iterable
    "__aiter__" method not defined (reportGeneralTypeIssues)
10 errors, 0 warnings, 0 informations

ruff.....................................................................Passed
ruff-format..............................................................Passed
pdm-lock-check...........................................................Passed
trailing-whitespace......................................................Passed
end-of-file-fixer........................................................Passed
check-yaml...............................................................Passed
check-toml...............................................................Passed
check-added-large-files..................................................Passed
ruff-format..............................................................Passed
ruff.....................................................................Passed
vulture..................................................................Passed
creosote.................................................................Passed
flynt....................................................................Passed
codespell................................................................Passed
autotyping...............................................................Passed
refurb...................................................................Failed
- hook id: refurb
- exit code: 1

tests/test_redis_bccache.py:51:44 [FURB120]: Don't pass an argument if it is the same as the default value
tests/test_redis_bccache.py:68:58 [FURB120]: Don't pass an argument if it is the same as the default value

Run `refurb --explain ERR` to further explain an error. Use `--quiet` to silence this message

bandit...................................................................Failed
- hook id: bandit
- exit code: 1

[main]  INFO    profile include tests: None
[main]  INFO    profile exclude tests: B607,B311,B603,B301,B404,B704,B403,B101,B602
[main]  INFO    cli include tests: None
[main]  INFO    cli exclude tests: None
[main]  INFO    using config: pyproject.toml
[main]  INFO    running on Python 3.13.3
Run started:2025-05-09 11:23:01.197800

Test results:
>> Issue: [B701:jinja2_autoescape_false] By default, jinja2 sets autoescape to False. Consider using autoescape=True or use the select_autoescape function to mitigate XSS vulnerabilities.
   Severity: High   Confidence: High
   CWE: CWE-94 (https://cwe.mitre.org/data/definitions/94.html)
   More Info: https://bandit.readthedocs.io/en/0.0.0/plugins/b701_jinja2_autoescape_false.html
   Location: ./tests/test_redis_bccache.py:23:15
22          def environment(self) -> Environment:
23              return Environment()
24      

--------------------------------------------------

Code scanned:
        Total lines of code: 2068
        Total lines skipped (#nosec): 0

Run metrics:
        Total issues (by severity):
                Undefined: 0
                Low: 0
                Medium: 0
                High: 1
        Total issues (by confidence):
                Undefined: 0
                Low: 0
                Medium: 0
                High: 1
Files skipped (0):

pyright..................................................................Failed
- hook id: pyright
- exit code: 1

/Users/les/Projects/jinja2-async-environment/jinja2_async_environment/loaders.py
  /Users/les/Projects/jinja2-async-environment/jinja2_async_environment/loaders.py:295:36 - error: "str" is not awaitable
    "str" is incompatible with protocol "Awaitable[_T_co@Awaitable]"
      "__await__" is not present (reportGeneralTypeIssues)
  /Users/les/Projects/jinja2-async-environment/jinja2_async_environment/loaders.py:295:36 - error: "int" is not awaitable
    "int" is incompatible with protocol "Awaitable[_T_co@Awaitable]"
      "__await__" is not present (reportGeneralTypeIssues)
  /Users/les/Projects/jinja2-async-environment/jinja2_async_environment/loaders.py:296:20 - error: Type "SourceType | Unknown | None" is not assignable to return type "SourceType"
    Type "SourceType | Unknown | None" is not assignable to type "SourceType"
      "None" is not assignable to "tuple[str | bytes, str | None, (() -> (bool | Awaitable[bool])) | None]" (reportReturnType)
/Users/les/Projects/jinja2-async-environment/tests/test_template_rendering.py
  /Users/les/Projects/jinja2-async-environment/tests/test_template_rendering.py:39:39 - error: "Iterator[str]" is not iterable
    "__aiter__" method not defined (reportGeneralTypeIssues)
  /Users/les/Projects/jinja2-async-environment/tests/test_template_rendering.py:50:39 - error: "Iterator[str]" is not iterable
    "__aiter__" method not defined (reportGeneralTypeIssues)
  /Users/les/Projects/jinja2-async-environment/tests/test_template_rendering.py:63:39 - error: "Iterator[str]" is not iterable
    "__aiter__" method not defined (reportGeneralTypeIssues)
  /Users/les/Projects/jinja2-async-environment/tests/test_template_rendering.py:78:39 - error: "Iterator[str]" is not iterable
    "__aiter__" method not defined (reportGeneralTypeIssues)
  /Users/les/Projects/jinja2-async-environment/tests/test_template_rendering.py:93:39 - error: "Iterator[str]" is not iterable
    "__aiter__" method not defined (reportGeneralTypeIssues)
  /Users/les/Projects/jinja2-async-environment/tests/test_template_rendering.py:108:39 - error: "Iterator[str]" is not iterable
    "__aiter__" method not defined (reportGeneralTypeIssues)
  /Users/les/Projects/jinja2-async-environment/tests/test_template_rendering.py:130:39 - error: "Iterator[str]" is not iterable
    "__aiter__" method not defined (reportGeneralTypeIssues)
10 errors, 0 warnings, 0 informations

ruff.....................................................................Passed
ruff-format..............................................................Passed


Pre-commit failed. Please fix errors.

(jinja2-async-environment) [jinja2-async-environment]                                                                                                        main  ✭ ✱
