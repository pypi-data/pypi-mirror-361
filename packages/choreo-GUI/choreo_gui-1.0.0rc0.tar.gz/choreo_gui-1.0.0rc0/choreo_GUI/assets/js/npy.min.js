class npyjs{constructor(r){r&&console.error(["No arguments accepted to npyjs constructor.","For usage, go to https://github.com/jhuapl-boss/npyjs."].join(" ")),this.dtypes={"<u1":{name:"uint8",size:8,arrayConstructor:Uint8Array},"|u1":{name:"uint8",size:8,arrayConstructor:Uint8Array},"<u2":{name:"uint16",size:16,arrayConstructor:Uint16Array},"|i1":{name:"int8",size:8,arrayConstructor:Int8Array},"<i2":{name:"int16",size:16,arrayConstructor:Int16Array},"<u4":{name:"uint32",size:32,arrayConstructor:Int32Array},"<i4":{name:"int32",size:32,arrayConstructor:Int32Array},"<u8":{name:"uint64",size:64,arrayConstructor:BigUint64Array},"<i8":{name:"int64",size:64,arrayConstructor:BigInt64Array},"<f4":{name:"float32",size:32,arrayConstructor:Float32Array},"<f8":{name:"float64",size:64,arrayConstructor:Float64Array}}}parse(r){const t=new DataView(r.slice(8,10)).getUint8(0),a=10+t,e=new TextDecoder("utf-8").decode(new Uint8Array(r.slice(10,10+t))),n=JSON.parse(e.toLowerCase().replace(/'/g,'"').replace("(","[").replace(/,*\),*/g,"]")),o=n.shape,s=this.dtypes[n.descr],i=new s.arrayConstructor(r,a);return{dtype:s.name,data:i,shape:o,fortranOrder:n.fortran_order}}async load(r,t,a){a=a||{};const e=await fetch(r,{...a}),n=await e.arrayBuffer(),o=this.parse(n);return t?t(o):o}}const descrToConstructor={"|u1":Uint8Array,"|i1":Int8Array,"<u2":Uint16Array,"<i2":Int16Array,"<u4":Uint32Array,"<i4":Int32Array,"<f4":Float32Array,"<f8":Float64Array},constructorNameToDescr=Object.fromEntries(Object.entries(descrToConstructor).map((r=>[r[1].name,r[0]])));constructorNameToDescr.Uint8ClampedArray="|u1";const constructorNameToNumBytes={Uint8Array:1,Int8Array:1,Uint16Array:2,Int16Array:2,Uint32Array:4,Int32Array:4,Float32Array:4,Float64Array:8};async function ndarray_tobuffer(r){var t=r.data,a=r.shape,e=t.constructor,n=constructorNameToNumBytes[e.name];fortran_order=!1;for(var o=`{'descr': '${constructorNameToDescr[t.constructor.name]}', 'fortran_order': ${["False","True"][Number(fortran_order)]}, 'shape': (${a.join(", ")},), } `,s=0;(o.length+10+s)%64!=0;)s+=1;var i=o.length+s,c=i+10,y=new ArrayBuffer(c+t.length*n),u=new DataView(y);u.setUint8(0,147),u.setUint8(1,78),u.setUint8(2,85),u.setUint8(3,77),u.setUint8(4,80),u.setUint8(5,89),u.setUint8(6,1),u.setUint8(7,0);var A=i<<8&65280|i>>8&255;u.setUint16(8,A);for(var m=0;m<i;m++)m<o.length?u.setUint8(10+m,o.charCodeAt(m)):m==i-1?u.setUint8(10+m,10):u.setUint8(10+m,32);return new e(y).set(t,c/n),y}