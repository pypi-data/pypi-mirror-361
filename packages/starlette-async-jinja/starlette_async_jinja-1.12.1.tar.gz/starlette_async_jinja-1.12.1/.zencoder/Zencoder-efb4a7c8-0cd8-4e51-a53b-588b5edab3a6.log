Running benchmarks...
============================= test session starts ==============================
platform darwin -- Python 3.13.5, pytest-8.4.1, pluggy-1.6.0 -- /Users/les/Projects/starlette-async-jinja/.venv/bin/python
cachedir: .pytest_cache
benchmark: 5.1.0 (defaults: timer=time.perf_counter disable_gc=False min_rounds=5 min_time=0.000005 max_time=1.0 calibration_precision=10 warmup=False warmup_iterations=100000)
rootdir: /Users/les/Projects/starlette-async-jinja
configfile: pyproject.toml
testpaths: tests, starlette_async_jinja
plugins: xdist-3.7.0, anyio-4.9.0, timeout-2.4.0, cov-6.2.1, mock-3.14.1, benchmark-5.1.0, asyncio-1.0.0
timeout: 300.0s
timeout method: thread
timeout func_only: False
asyncio: mode=Mode.AUTO, asyncio_default_fixture_loop_scope=function, asyncio_default_test_loop_scope=function
collecting ... collected 46 items / 42 deselected / 4 selected

tests/test_benchmarks.py::test_benchmark_json_response PASSED            [ 25%]
tests/test_benchmarks.py::test_benchmark_template_mock PASSED            [ 50%]
tests/test_benchmarks.py::test_benchmark_render_fragment_mock PASSED     [ 75%]
tests/test_benchmarks.py::test_benchmark_context_processors_mock PASSED  [100%]
ERROR: Coverage failure: total of 29 is less than fail-under=42


================================ tests coverage ================================
_______________ coverage: platform darwin, python 3.13.5-final-0 _______________

Name                                 Stmts   Miss  Cover
--------------------------------------------------------
starlette_async_jinja/responses.py     115     82    29%
--------------------------------------------------------
TOTAL                                  115     82    29%
FAIL Required test coverage of 42% not reached. Total coverage: 28.70%

----------------------------------------------------------------------------------------------------------- benchmark: 4 tests ----------------------------------------------------------------------------------------------------------
Name (time in ns)                                  Min                       Max                   Mean                 StdDev                 Median                 IQR            Outliers  OPS (Kops/s)            Rounds  Iterations
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
test_benchmark_render_fragment_mock           148.6200 (1.0)          8,308.6900 (1.0)         198.4550 (1.0)         101.1200 (1.0)         175.1900 (1.0)        4.5300 (1.0)     3066;6636    5,038.9263 (1.0)       43824         100
test_benchmark_template_mock                  280.0007 (1.88)     1,587,571.0014 (191.07)      565.2656 (2.85)      8,931.9318 (88.33)       359.9998 (2.05)      92.9977 (20.53)     68;7107    1,769.0798 (0.35)      43818           1
test_benchmark_context_processors_mock      1,173.0008 (7.89)       177,809.0009 (21.40)     1,446.2780 (7.29)      1,970.8556 (19.49)     1,301.9999 (7.43)      55.9994 (12.36)    949;8849      691.4300 (0.14)     100807           1
test_benchmark_json_response               18,934.9994 (127.41)     112,876.9982 (13.59)    22,743.3057 (114.60)   10,227.5492 (101.14)   20,028.0010 (114.32)   855.2515 (188.80)      41;89       43.9690 (0.01)        605           1
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

Legend:
  Outliers: 1 Standard Deviation from Mean; 1.5 IQR (InterQuartile Range) from 1st Quartile and 3rd Quartile.
  OPS: Operations Per Second, computed as 1 / Mean
======================= 4 passed, 42 deselected in 3.18s =======================

Benchmark results saved to .benchmarks/benchmark_results_20250618_050944.txt
