"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([["25864"],{80298:function(t,e,i){i.a(t,async function(t,e){try{var n=i(73742),a=i(52634),r=i(62685),o=i(59048),s=i(7616),u=i(75535),c=t([a]);a=(c.then?(await c)():c)[0];let l,d=t=>t;(0,u.jx)("tooltip.show",{keyframes:[{opacity:0},{opacity:1}],options:{duration:150,easing:"ease"}}),(0,u.jx)("tooltip.hide",{keyframes:[{opacity:1},{opacity:0}],options:{duration:400,easing:"ease"}});class h extends a.Z{}h.styles=[r.Z,(0,o.iv)(l||(l=d`:host{--sl-tooltip-background-color:var(--secondary-background-color);--sl-tooltip-color:var(--primary-text-color);--sl-tooltip-font-family:var(
          --ha-tooltip-font-family,
          var(--ha-font-family-body)
        );--sl-tooltip-font-size:var(
          --ha-tooltip-font-size,
          var(--ha-font-size-s)
        );--sl-tooltip-font-weight:var(
          --ha-tooltip-font-weight,
          var(--ha-font-weight-normal)
        );--sl-tooltip-line-height:var(
          --ha-tooltip-line-height,
          var(--ha-line-height-condensed)
        );--sl-tooltip-padding:8px;--sl-tooltip-border-radius:var(--ha-tooltip-border-radius, 4px);--sl-tooltip-arrow-size:var(--ha-tooltip-arrow-size, 8px);--sl-z-index-tooltip:var(--ha-tooltip-z-index, 1000)}`))],h=(0,n.__decorate)([(0,s.Mo)("ha-tooltip")],h),e()}catch(l){e(l)}})},7214:function(t,e,i){i.d(e,{Cj:function(){return f},F7:function(){return r},Hs:function(){return w},Kd:function(){return x},Kj:function(){return p},Nw:function(){return g},PA:function(){return o},Py:function(){return c},Qm:function(){return Z},Z0:function(){return b},_Y:function(){return d},_m:function(){return s},dL:function(){return l},dO:function(){return k},hN:function(){return _},h_:function(){return h},j2:function(){return S},q6:function(){return v},uR:function(){return u}});var n=i(75706),a=(i(39710),i(81738),i(72489),i(54480),i(56389),i(15459)),r=function(t){return t[t.NONE=0]="NONE",t[t.ARITHMETIC=1]="ARITHMETIC",t[t.CIRCULAR=2]="CIRCULAR",t}({}),o=99387==i.j?["entity_not_recorded","entity_no_longer_recorded","state_class_removed","units_changed","mean_type_changed","no_state"]:null,s=function(t){return t.sendMessagePromise({type:"recorder/info"})},u=function(t,e){return t.callWS({type:"recorder/list_statistic_ids",statistic_type:e})},c=function(t,e){return t.callWS({type:"recorder/get_statistics_metadata",statistic_ids:e})},l=function(t,e,i,n){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"hour",r=arguments.length>5?arguments[5]:void 0,o=arguments.length>6?arguments[6]:void 0;return t.callWS({type:"recorder/statistics_during_period",start_time:e.toISOString(),end_time:null==i?void 0:i.toISOString(),statistic_ids:n,period:a,units:r,types:o})},d=function(t,e,i,n){return t.callWS({type:"recorder/statistic_during_period",statistic_id:e,units:n,fixed_period:i.fixed_period?{start_time:i.fixed_period.start instanceof Date?i.fixed_period.start.toISOString():i.fixed_period.start,end_time:i.fixed_period.end instanceof Date?i.fixed_period.end.toISOString():i.fixed_period.end}:void 0,calendar:i.calendar,rolling_window:i.rolling_window})},h=function(t){return t.callWS({type:"recorder/validate_statistics"})},f=function(t,e,i){return t.callWS({type:"recorder/update_statistics_metadata",statistic_id:e,unit_of_measurement:i})},_=function(t,e){return t.callWS({type:"recorder/clear_statistics",statistic_ids:e})},p=function(t){var e=null;if(!t)return null;var i,a=(0,n.Z)(t);try{for(a.s();!(i=a.n()).done;){var r=i.value;null!==r.change&&void 0!==r.change&&(null===e?e=r.change:e+=r.change)}}catch(o){a.e(o)}finally{a.f()}return e},v=function(t,e){var i,a=null,r=(0,n.Z)(e);try{for(r.s();!(i=r.n()).done;){var o=i.value;if(o in t){var s=p(t[o]);null!==s&&(null===a?a=s:a+=s)}}}catch(u){r.e(u)}finally{r.f()}return a},g=function(t,e){return t.some(function(t){return void 0!==t[e]&&null!==t[e]})},y=["mean","min","max"],m=["sum","state","change"],b=function(t,e){return!(!y.includes(e)||0===t.mean_type)||!(!m.includes(e)||!t.has_sum)},S=function(t,e,i,n,a){var r=new Date(i).toISOString();return t.callWS({type:"recorder/adjust_sum_statistics",statistic_id:e,start_time:r,adjustment:n,adjustment_unit_of_measurement:a})},x=function(t,e,i){var n=t.states[e];return n?(0,a.C)(n):(null==i?void 0:i.name)||e},k=function(t,e,i){var n,a;e&&(n=null===(a=t.states[e])||void 0===a?void 0:a.attributes.unit_of_measurement);return void 0===n?null==i?void 0:i.statistics_unit_of_measurement:n},w=function(t){return t.includes(":")},Z=function(t){return t.callWS({type:"recorder/update_statistics_issues"})}},6291:function(t,e,i){i.d(e,{f:function(){return d}});var n=i(75706),a=i(54521),r=i(4490),o=i(20129),s=i(53389),u=i(85297),c=(i(39710),i(26847),i(81738),i(72489),i(54480),i(1455),i(56389),i(27530),i(73742)),l=i(7616),d=function(t){var e=function(t){function e(){return(0,a.Z)(this,e),(0,o.Z)(this,e,arguments)}return(0,u.Z)(e,t),(0,r.Z)(e,[{key:"connectedCallback",value:function(){(0,s.Z)(e,"connectedCallback",this,3)([]),this._checkSubscribed()}},{key:"disconnectedCallback",value:function(){if((0,s.Z)(e,"disconnectedCallback",this,3)([]),this.__unsubs){for(;this.__unsubs.length;){var t=this.__unsubs.pop();t instanceof Promise?t.then(function(t){return t()}):t()}this.__unsubs=void 0}}},{key:"updated",value:function(t){if((0,s.Z)(e,"updated",this,3)([t]),t.has("hass"))this._checkSubscribed();else if(this.hassSubscribeRequiredHostProps){var i,a=(0,n.Z)(t.keys());try{for(a.s();!(i=a.n()).done;){var r=i.value;if(this.hassSubscribeRequiredHostProps.includes(r))return void this._checkSubscribed()}}catch(o){a.e(o)}finally{a.f()}}}},{key:"hassSubscribe",value:function(){return[]}},{key:"_checkSubscribed",value:function(){var t,e=this;void 0!==this.__unsubs||!this.isConnected||void 0===this.hass||null!==(t=this.hassSubscribeRequiredHostProps)&&void 0!==t&&t.some(function(t){return void 0===e[t]})||(this.__unsubs=this.hassSubscribe())}}])}(t);return(0,c.__decorate)([(0,l.Cb)({attribute:!1})],e.prototype,"hass",void 0),e}},89078:function(t,e,i){i.a(t,async function(t,n){try{i.r(e);var a,r,o,s,u,c,l=i(54982),d=i(54521),h=i(4490),f=i(20129),_=i(85297),p=(i(12212),i(44438),i(81738),i(93190),i(54480),i(69920),i(73742)),v=i(59048),g=i(7616),y=i(20480),m=i(98249),b=(i(31138),i(97297)),S=(i(993),i(80298)),x=i(6640),k=i(6291),w=i(99389),Z=i(43309),C=i(93647),z=t([b,S,x,Z]);[b,S,x,Z]=z.then?(await z)():z;var E={maximumFractionDigits:0},M=function(t){function e(){var t;(0,d.Z)(this,e);for(var i=arguments.length,n=new Array(i),a=0;a<i;a++)n[a]=arguments[a];return(t=(0,f.Z)(this,e,[].concat(n))).hassSubscribeRequiredHostProps=["_config"],t}return(0,_.Z)(e,t),(0,h.Z)(e,[{key:"getCardSize",value:function(){return 4}},{key:"setConfig",value:function(t){this._config=t}},{key:"hassSubscribe",value:function(){var t,e=this;return[(0,x.UB)(this.hass,{key:null===(t=this._config)||void 0===t?void 0:t.collection_key}).subscribe(function(t){e._data=t})]}},{key:"shouldUpdate",value:function(t){var e;return(0,C.SN)(this,t)||t.size>1||!t.has("hass")||!(null===(e=this._data)||void 0===e||!e.co2SignalEntity)&&this.hass.states[this._data.co2SignalEntity]!==t.get("hass").states[this._data.co2SignalEntity]}},{key:"render",value:function(){var t;if(!this._config||!this.hass)return v.Ld;if(!this._data)return(0,v.dy)(a||(a=(0,l.Z)(["",""])),this.hass.localize("ui.panel.lovelace.cards.energy.loading"));if(!this._data.co2SignalEntity)return v.Ld;if(!this.hass.states[this._data.co2SignalEntity])return(0,v.dy)(r||(r=(0,l.Z)(['<hui-warning .hass="','"> '," </hui-warning>"])),this.hass,(0,w.i)(this.hass,this._data.co2SignalEntity));var e,i=(0,x.EH)(this._data),n=i.summedData,c=(i.compareSummedData,null!==(t=n.total.from_grid)&&void 0!==t?t:0);if(this._data.fossilEnergyConsumption){var d,h,f=this._data.fossilEnergyConsumption?Object.values(this._data.fossilEnergyConsumption).reduce(function(t,e){return t+e},0):0,_=null!==(d=n.total.solar)&&void 0!==d?d:0,p=null!==(h=n.total.to_grid)&&void 0!==h?h:0,g=c+Math.max(0,_-p);g&&(e=(0,m.N)(100*(1-f/g)))}return(0,v.dy)(o||(o=(0,l.Z)([" <ha-card> "," </ha-card> "])),void 0!==e?(0,v.dy)(s||(s=(0,l.Z)([' <ha-gauge min="0" max="100" .value="','" .formatOptions="','" .locale="','" label="%" style="','"></ha-gauge> <ha-tooltip .content="','" placement="left" hoist> <ha-svg-icon .path="','"></ha-svg-icon> </ha-tooltip> <div class="name"> '," </div> "])),e,E,this.hass.locale,(0,y.V)({"--gauge-color":this._computeSeverity(e)}),this.hass.localize("ui.panel.lovelace.cards.energy.carbon_consumed_gauge.card_indicates_energy_used"),"M13,9H11V7H13M13,17H11V11H13M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z",this.hass.localize("ui.panel.lovelace.cards.energy.carbon_consumed_gauge.low_carbon_energy_consumed")):(0,v.dy)(u||(u=(0,l.Z)(["",""])),this.hass.localize("ui.panel.lovelace.cards.energy.carbon_consumed_gauge.low_carbon_energy_not_calculated")))}},{key:"_computeSeverity",value:function(t){return t<10?Z.severityMap.red:t<30?Z.severityMap.yellow:t>75?Z.severityMap.green:Z.severityMap.normal}}])}((0,k.f)(v.oi));M.styles=(0,v.iv)(c||(c=(0,l.Z)(["ha-card{height:100%;overflow:hidden;padding:16px;display:flex;align-items:center;justify-content:center;flex-direction:column;box-sizing:border-box}ha-gauge{width:100%;max-width:250px}.name{text-align:center;line-height:initial;color:var(--primary-text-color);width:100%;font-size:var(--ha-font-size-m);margin-top:8px}ha-svg-icon{position:absolute;right:4px;inset-inline-end:4px;inset-inline-start:initial;top:4px;color:var(--secondary-text-color)}ha-tooltip::part(base__popup){margin-top:4px}"]))),(0,p.__decorate)([(0,g.Cb)({attribute:!1})],M.prototype,"hass",void 0),(0,p.__decorate)([(0,g.SB)()],M.prototype,"_config",void 0),(0,p.__decorate)([(0,g.SB)()],M.prototype,"_data",void 0),M=(0,p.__decorate)([(0,g.Mo)("hui-energy-carbon-consumed-gauge-card")],M),n()}catch(H){n(H)}})}}]);
//# sourceMappingURL=25864.5d89c24b3bfef6fb.js.map