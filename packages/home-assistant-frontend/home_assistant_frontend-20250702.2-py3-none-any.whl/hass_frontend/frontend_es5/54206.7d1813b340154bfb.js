"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([["54206"],{84447:function(o,t,e){e(26847),e(87799),e(27530);var r=e(73742),i=e(27885),n=e(67522),a=e(23533),s=e(7046),l=e(59048),c=e(7616);let d,h,u,p,g=o=>o;class v extends i.g{renderOutline(){return this.filled?(0,l.dy)(d||(d=g`<span class="filled"></span>`)):super.renderOutline()}getContainerClasses(){return Object.assign(Object.assign({},super.getContainerClasses()),{},{active:this.active})}renderPrimaryContent(){return(0,l.dy)(h||(h=g` <span class="leading icon" aria-hidden="true"> ${0} </span> <span class="label">${0}</span> <span class="touch"></span> <span class="trailing leading icon" aria-hidden="true"> ${0} </span> `),this.renderLeadingIcon(),this.label,this.renderTrailingIcon())}renderTrailingIcon(){return(0,l.dy)(u||(u=g`<slot name="trailing-icon"></slot>`))}constructor(...o){super(...o),this.filled=!1,this.active=!1}}v.styles=[a.W,s.W,n.W,(0,l.iv)(p||(p=g`:host{--md-sys-color-primary:var(--primary-text-color);--md-sys-color-on-surface:var(--primary-text-color);--md-assist-chip-container-shape:var(
          --ha-assist-chip-container-shape,
          16px
        );--md-assist-chip-outline-color:var(--outline-color);--md-assist-chip-label-text-weight:400}.filled{display:flex;pointer-events:none;border-radius:inherit;inset:0;position:absolute;background-color:var(--ha-assist-chip-filled-container-color)}::slotted([slot=icon]),::slotted([slot=trailing-icon]){display:flex;--mdc-icon-size:var(--md-input-chip-icon-size, 18px);font-size:var(--_label-text-size)!important}.trailing.icon ::slotted(*),.trailing.icon svg{margin-inline-end:unset;margin-inline-start:var(--_icon-label-space)}::before{background:var(--ha-assist-chip-container-color,transparent);opacity:var(--ha-assist-chip-container-opacity, 1)}:where(.active)::before{background:var(--ha-assist-chip-active-container-color);opacity:var(--ha-assist-chip-active-container-opacity)}.label{font-family:var(--ha-font-family-body)}`))],(0,r.__decorate)([(0,c.Cb)({type:Boolean,reflect:!0})],v.prototype,"filled",void 0),(0,r.__decorate)([(0,c.Cb)({type:Boolean})],v.prototype,"active",void 0),v=(0,r.__decorate)([(0,c.Mo)("ha-assist-chip")],v)},49986:function(o,t,e){var r,i,n=e(18840),a=e(75706),s=e(54982),l=e(54521),c=e(4490),d=e(20129),h=e(85297),u=e(53389),p=(e(12212),e(39710),e(87622),e(2394),e(81738),e(22960),e(54480),e(70820),e(64455),e(56389),e(67398),e(73742)),g=e(59048),v=e(7616),f=e(31733),_=function(o){function t(){var o;(0,l.Z)(this,t);for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return(o=(0,d.Z)(this,t,[].concat(r))).wrapDisabled=!1,o._filter="",o}return(0,h.Z)(t,o),(0,c.Z)(t,[{key:"render",value:function(){return(0,g.dy)(r||(r=(0,s.Z)(['<pre class="','"></pre>'])),(0,f.$)({wrap:!this.wrapDisabled}))}},{key:"firstUpdated",value:function(o){(0,u.Z)(t,"firstUpdated",this,3)([o]),this.content&&this.parseTextToColoredPre(this.content)}},{key:"parseLinesToColoredPre",value:function(o){var t,e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=(0,a.Z)(o);try{for(r.s();!(t=r.n()).done;){var i=t.value;this.parseLineToColoredPre(i,e)}}catch(n){r.e(n)}finally{r.f()}}},{key:"parseLineToColoredPre",value:function(o){for(var t,e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=document.createElement("div"),i=/\x1b(?:\[(.*?)[@-~]|\].*?(?:\x07|\x1b\\))/g,n=0,a={bold:!1,italic:!1,underline:!1,strikethrough:!1,foregroundColor:null,backgroundColor:null},s=function(o){var t=document.createElement("span");a.bold&&t.classList.add("bold"),a.italic&&t.classList.add("italic"),a.underline&&t.classList.add("underline"),a.strikethrough&&t.classList.add("strikethrough"),null!==a.foregroundColor&&t.classList.add("fg-".concat(a.foregroundColor)),null!==a.backgroundColor&&t.classList.add("bg-".concat(a.backgroundColor)),t.appendChild(document.createTextNode(o)),r.appendChild(t)};null!==(t=i.exec(o));){var l=t.index,c=o.substring(n,l);c&&s(c),n=l+t[0].length,void 0!==t[1]&&t[1].split(";").forEach(function(o){switch(parseInt(o,10)){case 0:a.bold=!1,a.italic=!1,a.underline=!1,a.strikethrough=!1,a.foregroundColor=null,a.backgroundColor=null;break;case 1:a.bold=!0;break;case 3:a.italic=!0;break;case 4:a.underline=!0;break;case 9:a.strikethrough=!0;break;case 22:a.bold=!1;break;case 23:a.italic=!1;break;case 24:a.underline=!1;break;case 29:a.strikethrough=!1;break;case 30:case 39:a.foregroundColor=null;break;case 31:a.foregroundColor="red";break;case 32:a.foregroundColor="green";break;case 33:a.foregroundColor="yellow";break;case 34:a.foregroundColor="blue";break;case 35:a.foregroundColor="magenta";break;case 36:a.foregroundColor="cyan";break;case 37:a.foregroundColor="white";break;case 40:a.backgroundColor="black";break;case 41:a.backgroundColor="red";break;case 42:a.backgroundColor="green";break;case 43:a.backgroundColor="yellow";break;case 44:a.backgroundColor="blue";break;case 45:a.backgroundColor="magenta";break;case 46:a.backgroundColor="cyan";break;case 47:a.backgroundColor="white";break;case 49:a.backgroundColor=null}})}var d,h,u=o.substring(n);(u&&s(u),e)?(null===(d=this._pre)||void 0===d||d.prepend(r),r.animate([{opacity:0},{opacity:1}],{duration:500})):null===(h=this._pre)||void 0===h||h.appendChild(r);this._filter&&this.filterLines(this._filter)}},{key:"parseTextToColoredPre",value:function(o){var t,e=o.split("\n"),r=(0,a.Z)(e);try{for(r.s();!(t=r.n()).done;){var i=t.value;this.parseLineToColoredPre(i)}}catch(n){r.e(n)}finally{r.f()}}},{key:"filterLines",value:function(o){var t;this._filter=o;var e=(null===(t=this.shadowRoot)||void 0===t?void 0:t.querySelectorAll("div"))||[],r=0;if(o){var i=[];e.forEach(function(t){var e;null!==(e=t.textContent)&&void 0!==e&&e.toLowerCase().includes(o.toLowerCase())?(t.style.display="",r++,CSS.highlights&&null!==t.firstChild&&t.textContent&&t.querySelectorAll("span").forEach(function(t){for(var e=t.textContent.toLowerCase(),r=[],n=0;n<e.length;){var a=e.indexOf(o.toLowerCase(),n);if(-1===a)break;r.push(a),n=a+o.length}r.forEach(function(e){var r=new Range;r.setStart(t.firstChild,e),r.setEnd(t.firstChild,e+o.length),i.push(r)})})):t.style.display="none"}),CSS.highlights&&CSS.highlights.set("search-results",(0,n.Z)(Highlight,i))}else e.forEach(function(o){o.style.display=""}),r=e.length,CSS.highlights&&CSS.highlights.delete("search-results");return!!r}},{key:"clear",value:function(){this._pre&&(this._pre.innerHTML="")}}])}(g.oi);_.styles=(0,g.iv)(i||(i=(0,s.Z)(["pre{overflow-x:auto;margin:0}pre.wrap{white-space:pre-wrap;overflow-wrap:break-word}.bold{font-weight:var(--ha-font-weight-bold)}.italic{font-style:italic}.underline{text-decoration:underline}.strikethrough{text-decoration:line-through}.underline.strikethrough{text-decoration:underline line-through}.fg-red{color:var(--error-color)}.fg-green{color:var(--success-color)}.fg-yellow{color:var(--warning-color)}.fg-blue{color:var(--info-color)}.fg-magenta{color:#762671}.fg-cyan{color:#2cb5e9}.fg-white{color:#ccc}.bg-black{background-color:#000}.bg-red{background-color:var(--error-color)}.bg-green{background-color:var(--success-color)}.bg-yellow{background-color:var(--warning-color)}.bg-blue{background-color:var(--info-color)}.bg-magenta{background-color:#762671}.bg-cyan{background-color:#2cb5e9}.bg-white{background-color:#ccc}::highlight(search-results){background-color:var(--primary-color);color:var(--text-primary-color)}"]))),(0,p.__decorate)([(0,v.Cb)()],_.prototype,"content",void 0),(0,p.__decorate)([(0,v.Cb)({type:Boolean,attribute:"wrap-disabled"})],_.prototype,"wrapDisabled",void 0),(0,p.__decorate)([(0,v.IO)("pre")],_.prototype,"_pre",void 0),(0,p.__decorate)([(0,v.SB)()],_.prototype,"_filter",void 0),_=(0,p.__decorate)([(0,v.Mo)("ha-ansi-to-html")],_)},57701:function(o,t,e){var r,i=e(54982),n=e(4490),a=e(54521),s=e(20129),l=e(85297),c=e(73742),d=e(66923),h=e(93952),u=e(59048),p=e(7616),g=function(o){function t(){return(0,a.Z)(this,t),(0,s.Z)(this,t,arguments)}return(0,l.Z)(t,o),(0,n.Z)(t)}(d.i);g.styles=[h.W,(0,u.iv)(r||(r=(0,i.Z)([":host{--md-divider-color:var(--divider-color)}"])))],g=(0,c.__decorate)([(0,p.Mo)("ha-md-divider")],g)},92952:function(o,t,e){var r=e(73742),i=e(5798),n=e(15215),a=e(59048),s=e(7616);let l;class c extends i.${}c.styles=[n.W,(0,a.iv)(l||(l=(o=>o)`:host{--ha-icon-display:block;--md-sys-color-primary:var(--primary-text-color);--md-sys-color-on-primary:var(--primary-text-color);--md-sys-color-secondary:var(--secondary-text-color);--md-sys-color-surface:var(--card-background-color);--md-sys-color-on-surface:var(--primary-text-color);--md-sys-color-on-surface-variant:var(--secondary-text-color);--md-sys-color-secondary-container:rgba(
          var(--rgb-primary-color),
          0.15
        );--md-sys-color-on-secondary-container:var(--text-primary-color);--mdc-icon-size:16px;--md-sys-color-on-primary-container:var(--primary-text-color);--md-sys-color-on-secondary-container:var(--primary-text-color);--md-menu-item-label-text-font:Roboto,sans-serif}:host(.warning){--md-menu-item-label-text-color:var(--error-color);--md-menu-item-leading-icon-color:var(--error-color)}::slotted([slot=headline]){text-wrap:nowrap}`))],(0,r.__decorate)([(0,s.Cb)({attribute:!1})],c.prototype,"clickAction",void 0),c=(0,r.__decorate)([(0,s.Mo)("ha-md-menu-item")],c)},94092:function(o,t,e){var r,i=e(54982),n=e(54521),a=e(4490),s=e(20129),l=e(53389),c=e(85297),d=e(73742),h=e(19334),u=e(91646),p=e(67419),g=e(59048),v=e(7616),f=function(o){function t(){return(0,n.Z)(this,t),(0,s.Z)(this,t,arguments)}return(0,c.Z)(t,o),(0,a.Z)(t,[{key:"connectedCallback",value:function(){(0,l.Z)(t,"connectedCallback",this,3)([]),this.addEventListener("close-menu",this._handleCloseMenu)}},{key:"_handleCloseMenu",value:function(o){var t,e;o.detail.reason.kind===p.GB.KEYDOWN&&o.detail.reason.key===p.KC.ESCAPE||null===(t=(e=o.detail.initiator).clickAction)||void 0===t||t.call(e,o.detail.initiator)}}])}(h.v2);f.styles=[u.W,(0,g.iv)(r||(r=(0,i.Z)([":host{--md-sys-color-surface-container:var(--card-background-color)}"])))],f=(0,d.__decorate)([(0,v.Mo)("ha-md-menu")],f)},74691:function(o,t,e){e.d(t,{G:function(){return r},l:function(){return i}});var r=function(o){return o.callApi("GET","error_log")},i="/api/error_log"},31021:function(o,t,e){e.d(t,{js:function(){return c},rY:function(){return l},yd:function(){return u},yz:function(){return h}});var r,i=e(29694),n=e(75778),a=e(61943),s=(e(39710),e(26847),e(54480),e(11353),e(67886),e(65451),e(46015),e(38334),e(94880),e(75643),e(29761),e(56389),e(48694),e(27530),e(43893)),l=function(o){return o.data},c=function(o){return"object"===(0,a.Z)(o)?"object"===(0,a.Z)(o.body)?o.body.message||"Unknown error, see supervisor logs":o.body||o.message||"Unknown error, see supervisor logs":o},d=new Set([502,503,504]),h=function(o){return!!(o&&o.status_code&&d.has(o.status_code))||!(!o||!o.message||!o.message.includes("ERR_CONNECTION_CLOSED")&&!o.message.includes("ERR_CONNECTION_RESET"))},u=99387==e.j?(r=(0,n.Z)((0,i.Z)().m(function o(t,e){var r,n;return(0,i.Z)().w(function(o){for(;;)switch(o.n){case 0:if(!(0,s.I)(t.config.version,2021,2,4)){o.n=1;break}return o.a(2,t.callWS({type:"supervisor/api",endpoint:"/".concat(e,"/stats"),method:"get"}));case 1:return r=l,o.n=2,t.callApi("GET","hassio/".concat(e,"/stats"));case 2:return n=o.v,o.a(2,r(n))}},o)})),function(o,t){return r.apply(this,arguments)}):null},24789:function(o,t,e){e.d(t,{Bq:function(){return y},CP:function(){return u},KQ:function(){return g},Lm:function(){return p},NC:function(){return f},Ri:function(){return _},gM:function(){return m},jP:function(){return w},lC:function(){return h},rM:function(){return b},wt:function(){return v}});var r,i,n,a,s=e(29694),l=e(75778),c=(e(12212),e(39710),e(56389),e(43893)),d=e(31021),h=99387==e.j?(r=(0,l.Z)((0,s.Z)().m(function o(t){return(0,s.Z)().w(function(o){for(;;)switch(o.n){case 0:if(!(0,c.I)(t.config.version,2021,2,4)){o.n=2;break}return o.n=1,t.callWS({type:"supervisor/api",endpoint:"/supervisor/reload",method:"post"});case 1:case 3:return o.a(2);case 2:return o.n=3,t.callApi("POST","hassio/supervisor/reload")}},o)})),function(o){return r.apply(this,arguments)}):null,u=99387==e.j?(i=(0,l.Z)((0,s.Z)().m(function o(t){var e,r;return(0,s.Z)().w(function(o){for(;;)switch(o.n){case 0:if(!(0,c.I)(t.config.version,2021,2,4)){o.n=1;break}return o.a(2,t.callWS({type:"supervisor/api",endpoint:"/supervisor/info",method:"get"}));case 1:return e=d.rY,o.n=2,t.callApi("GET","hassio/supervisor/info");case 2:return r=o.v,o.a(2,e(r))}},o)})),function(o){return i.apply(this,arguments)}):null,p=99387==e.j?(n=(0,l.Z)((0,s.Z)().m(function o(t){var e,r;return(0,s.Z)().w(function(o){for(;;)switch(o.n){case 0:if(!(0,c.I)(t.config.version,2021,2,4)){o.n=1;break}return o.a(2,t.callWS({type:"supervisor/api",endpoint:"/info",method:"get"}));case 1:return e=d.rY,o.n=2,t.callApi("GET","hassio/info");case 2:return r=o.v,o.a(2,e(r))}},o)})),function(o){return n.apply(this,arguments)}):null,g=function(){var o=(0,l.Z)((0,s.Z)().m(function o(t){return(0,s.Z)().w(function(o){for(;;)if(0===o.n)return o.a(2,t.callApi("GET","hassio/host/logs/boots"))},o)}));return function(t){return o.apply(this,arguments)}}(),v=function(){var o=(0,l.Z)((0,s.Z)().m(function o(t,e){return(0,s.Z)().w(function(o){for(;;)if(0===o.n)return o.a(2,t.callApi("GET","hassio/".concat(e.includes("_")?"addons/".concat(e):e,"/logs")))},o)}));return function(t,e){return o.apply(this,arguments)}}(),f=function(){var o=(0,l.Z)((0,s.Z)().m(function o(t,e,r){var i,n=arguments;return(0,s.Z)().w(function(o){for(;;)if(0===o.n)return i=n.length>3&&void 0!==n[3]?n[3]:0,o.a(2,t.callApiRaw("GET","hassio/".concat(e.includes("_")?"addons/".concat(e):e,"/logs").concat(0!==i?"/boots/".concat(i):""),void 0,r?{Range:r}:void 0))},o)}));return function(t,e,r){return o.apply(this,arguments)}}(),_=function(){var o=(0,l.Z)((0,s.Z)().m(function o(t,e,r){var i,n,a=arguments;return(0,s.Z)().w(function(o){for(;;)if(0===o.n)return i=a.length>3&&void 0!==a[3]?a[3]:100,n=a.length>4&&void 0!==a[4]?a[4]:0,o.a(2,t.callApiRaw("GET","hassio/".concat(e.includes("_")?"addons/".concat(e):e,"/logs").concat(0!==n?"/boots/".concat(n):"","/follow?lines=").concat(i),void 0,void 0,r))},o)}));return function(t,e,r){return o.apply(this,arguments)}}(),b=function(){var o=(0,l.Z)((0,s.Z)().m(function o(t,e,r,i,n){var a,l,c=arguments;return(0,s.Z)().w(function(o){for(;;)if(0===o.n)return a=c.length>5&&void 0!==c[5]?c[5]:100,l=c.length>6&&void 0!==c[6]?c[6]:0,o.a(2,t.callApiRaw("GET","hassio/".concat(e.includes("_")?"addons/".concat(e):e,"/logs").concat(0!==l?"/boots/".concat(l):"","/follow"),void 0,{Range:"entries=".concat(i,":").concat(n,":").concat(a)},r))},o)}));return function(t,e,r,i,n){return o.apply(this,arguments)}}(),m=function(o){return"/api/hassio/".concat(o.includes("_")?"addons/".concat(o):o,"/logs")},y=function(o,t){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return"/api/hassio/".concat(o.includes("_")?"addons/".concat(o):o,"/logs").concat(0!==e?"/boots/".concat(e):"","?lines=").concat(t)},w=99387==e.j?(a=(0,l.Z)((0,s.Z)().m(function o(t,e){return(0,s.Z)().w(function(o){for(;;)switch(o.n){case 0:if(!(0,c.I)(t.config.version,2021,2,4)){o.n=2;break}return o.n=1,t.callWS({type:"supervisor/api",endpoint:"/supervisor/options",method:"post",data:e});case 1:case 3:return o.a(2);case 2:return o.n=3,t.callApi("POST","hassio/supervisor/options",e)}},o)})),function(o,t){return a.apply(this,arguments)}):null},54625:function(o,t,e){e.a(o,async function(o,t){try{var r,i,n,a,s,l,c,d,h,u,p,g,v,f,_,b,m,y=e(29694),w=e(75778),k=e(54982),C=e(54521),S=e(4490),Z=e(67063),L=e(20129),x=e(85297),T=e(53389),H=(e(40777),e(12212),e(25518),e(24819),e(6988),e(18574),e(13571),e(81738),e(94814),e(6989),e(96821),e(24533),e(54480),e(64455),e(26086),e(6202),e(20655),e(73742)),A=e(59048),E=e(31733),B=e(62577),M=e(7616),V=(e(84447),e(12942),e(49986),e(72953),e(41037),e(31138),e(48017),e(69760),e(57701),e(94092),e(92952),e(6514)),O=(e(993),e(60673)),I=e(37528),P=(e(43893),e(39884)),R=e(87639),j=e(74691),z=e(31021),G=e(24789),F=e(71876),N=e(16957),W=o([V]);V=(W.then?(await W)():W)[0];var D="M19.92,12.08L12,20L4.08,12.08L5.5,10.67L11,16.17V2H13V16.17L18.5,10.66L19.92,12.08M12,20H2V22H22V20H12Z",U="M5,20H19V18H5M19,9H15V3H9V9H5L12,16L19,9Z",X=function(o){function t(){var o;(0,C.Z)(this,t);for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return(o=(0,L.Z)(this,t,[].concat(r))).filter="",o.allowSwitch=!1,o._scrolledToBottomController=new B.r((0,Z.Z)(o),{callback:function(o){return o[0].isIntersecting}}),o._scrolledToTopController=new B.r((0,Z.Z)(o),{}),o._loadingState="loading",o._noSearchResults=!1,o._boot=0,o._showBootsSelect=!1,o._wrapLines=!0,o._debounceSearch=(0,R.D)(function(){var t;o._noSearchResults=!(null!==(t=o._ansiToHtmlElement)&&void 0!==t&&t.filterLines(o.filter)),o.filter||o._scrollToBottom()},150),o._debounceScrollToBottom=(0,R.D)(function(){o._logElement.scrollTop=o._logElement.scrollHeight},300),o._handleConnectionStatus=function(t){"disconnected"===t.detail&&o._logStreamAborter&&(o._logStreamAborter.abort(),o._loadingState="loading"),"connected"===t.detail&&o._loadLogs(!0)},o._handleTopScroll=function(t){var e=t[0].isIntersecting;return!o._firstCursor||!e||"loaded"!==o._loadingState||o._loadingPrevState&&"loaded"!==o._loadingPrevState||o.filter||o._loadMoreLogs(),e},o}return(0,x.Z)(t,o),(0,S.Z)(t,[{key:"render",value:function(){var o=this,t=this._streamSupported&&this.provider&&(0,I.p)(this.hass,"hassio")&&"loading"!==this._loadingState,e=this._streamSupported&&Array.isArray(this._boots),m=this.localizeFunc||this.hass.localize;return(0,A.dy)(r||(r=(0,k.Z)([' <div class="error-log-intro"> ',' <ha-card outlined> <div class="header"> <h1 class="card-header"> ',' </h1> <div class="action-buttons"> '," ",' <ha-icon-button .path="','" @click="','" .label="','"></ha-icon-button> '," ",' </div> </div> <div class="card-content error-log"> <div id="scroll-top-marker"></div> '," "," ",' <ha-ansi-to-html ?wrap-disabled="','"></ha-ansi-to-html> <div id="scroll-bottom-marker"></div> </div> <ha-button class="new-logs-indicator ','" @click="','"> <ha-svg-icon .path="','" slot="icon"></ha-svg-icon> ',' <ha-svg-icon .path="','" slot="trailingIcon"></ha-svg-icon> </ha-button> '," </ha-card> </div> "])),this._error?(0,A.dy)(i||(i=(0,k.Z)(['<ha-alert alert-type="error">',"</ha-alert>"])),this._error):A.Ld,this.header||m("ui.panel.config.logs.show_full_logs"),e&&this._showBootsSelect?(0,A.dy)(n||(n=(0,k.Z)([' <ha-assist-chip .title="','" .label="','" id="boots-anchor" @click="','"> <ha-svg-icon slot="trailing-icon" .path="','"></ha-svg-icon></ha-assist-chip> <ha-md-menu anchor="boots-anchor" id="boots-menu" positioning="fixed"> '," </ha-md-menu> "])),m("ui.panel.config.logs.haos_boots_title"),0===this._boot?m("ui.panel.config.logs.current"):-1===this._boot?m("ui.panel.config.logs.previous"):m("ui.panel.config.logs.startups_ago",{boot:-1*this._boot}),this._toggleBootsMenu,"M7,10L12,15L17,10H7Z",this._boots.map(function(t){return(0,A.dy)(a||(a=(0,k.Z)([' <ha-md-menu-item .value="','" @click="','" .selected="','"> '," </ha-md-menu-item> "," "])),t,o._setBoot,t===o._boot,0===t?m("ui.panel.config.logs.current"):-1===t?m("ui.panel.config.logs.previous"):m("ui.panel.config.logs.startups_ago",{boot:-1*t}),0===t?(0,A.dy)(s||(s=(0,k.Z)(['<ha-md-divider role="separator"></ha-md-divider>']))):A.Ld)})):A.Ld,this._downloadSupported?(0,A.dy)(l||(l=(0,k.Z)([' <ha-icon-button .path="','" @click="','" .label="','"></ha-icon-button> '])),U,this._downloadLogs,m("ui.panel.config.logs.download_logs")):this._logsFileLink?(0,A.dy)(c||(c=(0,k.Z)([' <a href="','" target="_blank" class="download-link"> <ha-icon-button .path="','" .label="','"></ha-icon-button> </a> '])),this._logsFileLink,U,m("ui.panel.config.logs.download_logs")):A.Ld,this._wrapLines?"M16,7H3V5H16V7M3,19H16V17H3V19M22,12L18,9V11H3V13H18V15L22,12Z":"M21,5H3V7H21V5M3,19H10V17H3V19M3,13H18C19,13 20,13.43 20,15C20,16.57 19,17 18,17H16V15L12,18L16,21V19H18C20.95,19 22,17.73 22,15C22,12.28 21,11 18,11H3V13Z",this._toggleLineWrap,m("ui.panel.config.logs.".concat(this._wrapLines?"full_width":"wrap_lines")),!t||this._error?(0,A.dy)(d||(d=(0,k.Z)(['<ha-icon-button .path="','" @click="','" .label="','"></ha-icon-button>'])),"M17.65,6.35C16.2,4.9 14.21,4 12,4A8,8 0 0,0 4,12A8,8 0 0,0 12,20C15.73,20 18.84,17.45 19.73,14H17.65C16.83,16.33 14.61,18 12,18A6,6 0 0,1 6,12A6,6 0 0,1 12,6C13.66,6 15.14,6.69 16.22,7.78L13,11H20V4L17.65,6.35Z",this._loadLogs,m("ui.common.refresh")):A.Ld,this.allowSwitch&&"core"===this.provider||e?(0,A.dy)(h||(h=(0,k.Z)([' <ha-button-menu @action="','"> <ha-icon-button slot="trigger" .path="','"> </ha-icon-button> '," "," </ha-button-menu> "])),this._handleOverflowAction,"M12,16A2,2 0 0,1 14,18A2,2 0 0,1 12,20A2,2 0 0,1 10,18A2,2 0 0,1 12,16M12,10A2,2 0 0,1 14,12A2,2 0 0,1 12,14A2,2 0 0,1 10,12A2,2 0 0,1 12,10M12,4A2,2 0 0,1 14,6A2,2 0 0,1 12,8A2,2 0 0,1 10,6A2,2 0 0,1 12,4Z",this.allowSwitch&&"core"===this.provider?(0,A.dy)(u||(u=(0,k.Z)(['<ha-list-item graphic="icon"> <ha-svg-icon slot="graphic" .path="','"></ha-svg-icon> '," </ha-list-item>"])),"M20,18H4V8H20M20,6H12L10,4H4A2,2 0 0,0 2,6V18A2,2 0 0,0 4,20H20A2,2 0 0,0 22,18V8A2,2 0 0,0 20,6M15,16H6V14H15V16M18,12H6V10H18V12Z",this.hass.localize("ui.panel.config.logs.show_condensed_logs")):A.Ld,e?(0,A.dy)(p||(p=(0,k.Z)(['<ha-list-item graphic="icon"> <ha-svg-icon slot="graphic" .path="','"></ha-svg-icon> '," </ha-list-item>"])),"M7,13V11H21V13H7M7,19V17H21V19H7M7,7V5H21V7H7M3,8V5H2V4H4V8H3M2,17V16H5V20H2V19H4V18.5H3V17.5H4V17H2M4.25,10A0.75,0.75 0 0,1 5,10.75C5,10.95 4.92,11.14 4.79,11.27L3.12,13H5V14H2V13.08L4,11H2V10H4.25Z",m("ui.panel.config.logs.".concat(this._showBootsSelect?"hide":"show","_haos_boots"))):A.Ld):A.Ld,"loading"===this._loadingPrevState?(0,A.dy)(g||(g=(0,k.Z)(['<div class="loading-old"> <ha-spinner></ha-spinner> </div>']))):A.Ld,"loading"===this._loadingState?(0,A.dy)(v||(v=(0,k.Z)(["<div>","</div>"])),m("ui.panel.config.logs.loading_log")):"empty"===this._loadingState?(0,A.dy)(f||(f=(0,k.Z)(["<div>","</div>"])),m("ui.panel.config.logs.no_errors")):A.Ld,"loaded"===this._loadingState&&this.filter&&this._noSearchResults?(0,A.dy)(_||(_=(0,k.Z)(["<div> "," </div>"])),m("ui.panel.config.logs.no_issues_search",{term:this.filter})):A.Ld,!this._wrapLines,(0,E.$)({visible:this._newLogsIndicator&&!this._scrolledToBottomController.value||!1}),this._scrollToBottom,D,m("ui.panel.config.logs.scroll_down_button"),D,t&&0===this._boot&&!this._error?(0,A.dy)(b||(b=(0,k.Z)(['<div class="live-indicator"> <ha-svg-icon path="','"></ha-svg-icon> Live </div>'])),"M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z"):A.Ld)}},{key:"willUpdate",value:function(o){(0,T.Z)(t,"willUpdate",this,3)([o]),this.hasUpdated||(this._downloadSupported=(0,F.G)(this.hass),this._streamSupported=!0,this._loadBoots(),window.addEventListener("connection-status",this._handleConnectionStatus),this.hass.loadFragmentTranslation("config")),o.has("provider")&&(this._boot=0,this._loadLogs())}},{key:"firstUpdated",value:function(o){(0,T.Z)(t,"firstUpdated",this,3)([o]),this._scrolledToBottomController.observe(this._scrollBottomMarkerElement),this._scrolledToTopController.callback=this._handleTopScroll,this._scrolledToTopController.observe(this._scrollTopMarkerElement)}},{key:"updated",value:function(o){(0,T.Z)(t,"updated",this,3)([o]),this._newLogsIndicator&&this._scrolledToBottomController.value&&(this._newLogsIndicator=!1),o.has("filter")&&this._debounceSearch(),o.has("_loadingState")&&"loaded"===this._loadingState&&this._scrolledToTopController.value&&this._firstCursor&&!this._loadingPrevState&&this._loadMoreLogs()}},{key:"disconnectedCallback",value:function(){(0,T.Z)(t,"disconnectedCallback",this,3)([]),this._logStreamAborter&&this._logStreamAborter.abort(),window.removeEventListener("connection-status",this._handleConnectionStatus)}},{key:"_downloadLogs",value:(M=(0,w.Z)((0,y.Z)().m(function o(){var t,e,r,i;return(0,y.Z)().w(function(o){for(;;)switch(o.n){case 0:if(!this._streamSupported||!this.provider){o.n=1;break}(0,N.X)(this,{header:this.header,provider:this.provider,defaultLineCount:this._numberOfLines,boot:this._boot}),o.n=3;break;case 1:return t=(new Date).toISOString().replace(/:/g,"-"),e=this.provider&&"core"!==this.provider?(0,G.gM)(this.provider):j.l,r=this.provider&&"core"!==this.provider?"".concat(this.provider,"_").concat(t,".log"):"home-assistant_".concat(t,".log"),o.n=2,(0,O.iI)(this.hass,e);case 2:i=o.v,(0,F.N)(i.path,r);case 3:return o.a(2)}},o,this)})),function(){return M.apply(this,arguments)})},{key:"_loadLogs",value:(H=(0,w.Z)((0,y.Z)().m(function o(){var t,e,r,i,n,a,s,l,c,d,h,u,p,g,v,f,_,b,m,w,k,C=this,S=arguments;return(0,y.Z)().w(function(o){for(;;)switch(o.n){case 0:if(e=S.length>0&&void 0!==S[0]&&S[0],this._error=void 0,this._loadingState="loading",this._numberOfLines=e&&null!==(t=this._numberOfLines)&&void 0!==t?t:0,e||(this._loadingPrevState=void 0,this._firstCursor=void 0,null===(r=this._ansiToHtmlElement)||void 0===r||r.clear()),i=this._streamSupported&&(0,I.p)(this.hass,"hassio")&&this.provider,o.p=1,this._logStreamAborter&&(this._logStreamAborter.abort(),this._logStreamAborter=void 0),!i){o.n=13;break}if(this._logStreamAborter=new AbortController,e){o.n=4;break}return o.n=2,(0,G.NC)(this.hass,this.provider,"entries=:-1:",this._boot);case 2:return n=o.v,o.n=3,n.text();case 3:o.v.trim()||(this._loadingState="empty");case 4:if(!e||!this._firstCursor){o.n=6;break}return o.n=5,(0,G.rM)(this.hass,this.provider,this._logStreamAborter.signal,this._firstCursor,this._numberOfLines,100,this._boot);case 5:a=o.v,o.n=8;break;case 6:return o.n=7,(0,G.Ri)(this.hass,this.provider,this._logStreamAborter.signal,100,this._boot);case 7:a=o.v;case 8:if(a.headers.has("X-First-Cursor")&&(this._firstCursor=a.headers.get("X-First-Cursor")),a.body){o.n=9;break}throw new Error("No stream body found");case 9:this._loadingState="empty",s="",l=a.body.getReader(),c=new TextDecoder,d=!1;case 10:if(d){o.n=12;break}return o.n=11,l.read();case 11:h=o.v,u=h.value,p=h.done,d=p,u&&(g=c.decode(u,{stream:!d}),v=this._scrolledToBottomController.value,f="".concat(s).concat(g).split("\n").filter(function(o){return""!==o.trim()}),s=g.endsWith("\n")?"":f.splice(-1,1)[0],f.length&&(null===(_=this._ansiToHtmlElement)||void 0===_||_.parseLinesToColoredPre(f),this._numberOfLines+=f.length,"empty"===this._loadingState&&setTimeout(function(){C._loadingState="loaded"},100)),v&&this._logElement?this._scrollToBottom():this._newLogsIndicator=!0,this._downloadSupported||(b=(0,G.Bq)(this.provider,this._numberOfLines,this._boot),(0,O.iI)(this.hass,b).then(function(o){C._logsFileLink=o.path})),e=!1),o.n=10;break;case 12:o.n=18;break;case 13:if(this._streamSupported=!1,m="",!(0,I.p)(this.hass,"hassio")||!this.provider){o.n=15;break}return o.n=14,(0,G.wt)(this.hass,this.provider);case 14:m=o.v,o.n=17;break;case 15:return o.n=16,(0,j.G)(this.hass);case 16:m=o.v;case 17:m&&(null===(w=this._ansiToHtmlElement)||void 0===w||w.parseTextToColoredPre(m),this._loadingState="loaded",this._scrollToBottom());case 18:o.n=22;break;case 19:if(o.p=19,"AbortError"!==(k=o.v).name){o.n=20;break}return o.a(2);case 20:if(e||!i){o.n=21;break}return this._loadLogs(!0),o.a(2);case 21:this._error=(this.localizeFunc||this.hass.localize)("ui.panel.config.logs.failed_get_logs",{provider:this.provider,error:(0,z.js)(k)});case 22:return o.a(2)}},o,this,[[1,19]])})),function(){return H.apply(this,arguments)})},{key:"_scrollToBottom",value:function(){this._logElement&&(this._newLogsIndicator=!1,"core"!==this.provider?this._logElement.scrollTo(0,this._logElement.scrollHeight):this._debounceScrollToBottom())}},{key:"_loadMoreLogs",value:(m=(0,w.Z)((0,y.Z)().m(function o(){var t,e,r,i,n,a,s=this;return(0,y.Z)().w(function(o){for(;;)switch(o.n){case 0:if(this._firstCursor&&"loading"!==this._loadingPrevState&&"loaded"===this._loadingState&&this._logElement&&this.provider){o.n=1;break}return o.a(2);case 1:return t=this._scrolledToBottomController.value,e=this._logElement.scrollHeight-this._logElement.scrollTop,this._loadingPrevState="loading",o.n=2,(0,G.NC)(this.hass,this.provider,"entries=".concat(this._firstCursor,":-100:100"),this._boot);case 2:if(!(r=o.v).headers.has("X-First-Cursor")){o.n=4;break}if(this._firstCursor!==r.headers.get("X-First-Cursor")){o.n=3;break}return this._loadingPrevState="end",o.a(2);case 3:this._firstCursor=r.headers.get("X-First-Cursor");case 4:return o.n=5,r.text();case 5:(i=o.v)?(a=i.split("\n").filter(function(o){return""!==o.trim()}).reverse(),null===(n=this._ansiToHtmlElement)||void 0===n||n.parseLinesToColoredPre(a,!0),this._numberOfLines+=a.length,this._loadingPrevState="loaded"):this._loadingPrevState="end",t?this._scrollToBottom():"end"!==this._loadingPrevState&&this._logElement&&window.requestAnimationFrame(function(){s._logElement.scrollTop=s._logElement.scrollHeight-e});case 6:return o.a(2)}},o,this)})),function(){return m.apply(this,arguments)})},{key:"_loadBoots",value:(e=(0,w.Z)((0,y.Z)().m(function o(){var t,e,r,i;return(0,y.Z)().w(function(o){for(;;)switch(o.n){case 0:if(!this._streamSupported||!(0,I.p)(this.hass,"hassio")){o.n=4;break}return o.p=1,o.n=2,(0,G.KQ)(this.hass);case 2:t=o.v,e=t.data,(r=Object.keys(e.boots).map(Number).sort(function(o,t){return t-o})).length>1&&(this._boots=r),o.n=4;break;case 3:o.p=3,i=o.v,console.error(i);case 4:return o.a(2)}},o,this,[[1,3]])})),function(){return e.apply(this,arguments)})},{key:"_toggleLineWrap",value:function(){this._wrapLines=!this._wrapLines}},{key:"_handleOverflowAction",value:function(o){var t=o.detail.index;switch("core"===this.provider&&t--,t){case-1:(0,P.B)(this,"switch-log-view");break;case 0:this._showBootsSelect=!this._showBootsSelect}}},{key:"_toggleBootsMenu",value:function(){this._bootsMenu&&(this._bootsMenu.open=!this._bootsMenu.open)}},{key:"_setBoot",value:function(o){this._boot=o.target.value,this._loadLogs()}}]);var e,m,H,M}(A.oi);X.styles=(0,A.iv)(m||(m=(0,k.Z)([":host{direction:var(--direction)}.error-log-intro{text-align:center;margin:16px}ha-card{padding-top:8px;position:relative}ha-card.hidden{display:none}ha-card .action-buttons{display:flex;align-items:center;height:100%}.header{display:flex;justify-content:space-between;padding:0 16px}.card-header{color:var(--ha-card-header-color,var(--primary-text-color));font-family:var(--ha-card-header-font-family, inherit);font-size:var(--ha-card-header-font-size, var(--ha-font-size-2xl));letter-spacing:-.012em;line-height:var(--ha-line-height-expanded);display:block;margin-block-start:0px;font-weight:var(--ha-font-weight-normal);white-space:nowrap;max-width:calc(100% - 150px);overflow:hidden;text-overflow:ellipsis}ha-icon-button{float:right}.error-log{position:relative;font-family:var(--ha-font-family-code);clear:both;text-align:start;padding-top:16px;padding-bottom:16px;overflow-y:scroll;min-height:var(--error-log-card-height,calc(100vh - 240px));max-height:var(--error-log-card-height,calc(100vh - 240px));border-top:1px solid var(--divider-color);direction:ltr}@media all and (max-width:870px){.error-log{min-height:var(--error-log-card-height,calc(100vh - 190px));max-height:var(--error-log-card-height,calc(100vh - 190px))}}.error-log>div{overflow:auto;overflow-wrap:break-word}.error-log>div:hover{background-color:var(--secondary-background-color)}.new-logs-indicator{--mdc-theme-primary:var(--text-primary-color);overflow:hidden;position:absolute;bottom:0;left:0;right:0;height:0;background-color:var(--primary-color);border-radius:8px;transition:height .4s ease-out;display:flex;justify-content:space-between;align-items:center}.new-logs-indicator.visible{height:24px}.error{color:var(--error-color)}.warning{color:var(--warning-color)}.loading-old{display:flex;width:100%;justify-content:center;padding:16px}ha-assist-chip{--ha-assist-chip-container-shape:10px;--md-assist-chip-trailing-space:8px}@keyframes breathe{from{opacity:.8}to{opacity:0}}.live-indicator{position:absolute;bottom:0;inset-inline-end:16px;border-top-right-radius:8px;border-top-left-radius:8px;background-color:var(--primary-color);color:var(--text-primary-color);padding:4px 8px;opacity:.8}.live-indicator ha-svg-icon{animation:breathe 1s cubic-bezier(.5,0,1,1) infinite alternate;height:14px;width:14px}.download-link{color:var(--text-color)}"]))),(0,H.__decorate)([(0,M.Cb)({attribute:!1})],X.prototype,"hass",void 0),(0,H.__decorate)([(0,M.Cb)({attribute:!1})],X.prototype,"localizeFunc",void 0),(0,H.__decorate)([(0,M.Cb)()],X.prototype,"filter",void 0),(0,H.__decorate)([(0,M.Cb)()],X.prototype,"header",void 0),(0,H.__decorate)([(0,M.Cb)()],X.prototype,"provider",void 0),(0,H.__decorate)([(0,M.Cb)({attribute:"allow-switch",type:Boolean})],X.prototype,"allowSwitch",void 0),(0,H.__decorate)([(0,M.IO)(".error-log")],X.prototype,"_logElement",void 0),(0,H.__decorate)([(0,M.IO)("#scroll-top-marker")],X.prototype,"_scrollTopMarkerElement",void 0),(0,H.__decorate)([(0,M.IO)("#scroll-bottom-marker")],X.prototype,"_scrollBottomMarkerElement",void 0),(0,H.__decorate)([(0,M.IO)("ha-ansi-to-html")],X.prototype,"_ansiToHtmlElement",void 0),(0,H.__decorate)([(0,M.IO)("#boots-menu")],X.prototype,"_bootsMenu",void 0),(0,H.__decorate)([(0,M.SB)()],X.prototype,"_firstCursor",void 0),(0,H.__decorate)([(0,M.SB)()],X.prototype,"_scrolledToBottomController",void 0),(0,H.__decorate)([(0,M.SB)()],X.prototype,"_scrolledToTopController",void 0),(0,H.__decorate)([(0,M.SB)()],X.prototype,"_newLogsIndicator",void 0),(0,H.__decorate)([(0,M.SB)()],X.prototype,"_error",void 0),(0,H.__decorate)([(0,M.SB)()],X.prototype,"_logStreamAborter",void 0),(0,H.__decorate)([(0,M.SB)()],X.prototype,"_streamSupported",void 0),(0,H.__decorate)([(0,M.SB)()],X.prototype,"_loadingState",void 0),(0,H.__decorate)([(0,M.SB)()],X.prototype,"_loadingPrevState",void 0),(0,H.__decorate)([(0,M.SB)()],X.prototype,"_noSearchResults",void 0),(0,H.__decorate)([(0,M.SB)()],X.prototype,"_numberOfLines",void 0),(0,H.__decorate)([(0,M.SB)()],X.prototype,"_boot",void 0),(0,H.__decorate)([(0,M.SB)()],X.prototype,"_boots",void 0),(0,H.__decorate)([(0,M.SB)()],X.prototype,"_showBootsSelect",void 0),(0,H.__decorate)([(0,M.SB)()],X.prototype,"_wrapLines",void 0),(0,H.__decorate)([(0,M.SB)()],X.prototype,"_downloadSupported",void 0),(0,H.__decorate)([(0,M.SB)()],X.prototype,"_logsFileLink",void 0),X=(0,H.__decorate)([(0,M.Mo)("error-log-card")],X),t()}catch($){t($)}})},16957:function(o,t,e){e.d(t,{X:function(){return i}});e(26847),e(54480),e(1455),e(48694),e(27530);var r=e(39884),i=function(o,t){(0,r.B)(o,"show-dialog",{dialogTag:"dialog-download-logs",dialogImport:function(){return Promise.all([e.e("71353"),e.e("5055"),e.e("35582"),e.e("18972")]).then(e.bind(e,8208))},dialogParams:t})}},71876:function(o,t,e){e.d(t,{N:function(){return i},G:function(){return n}});var r=e(59719);const i=(o,t="")=>{const e=document.createElement("a");e.target="_blank",e.href=o,e.download=t,e.style.display="none",document.body.appendChild(e),e.dispatchEvent(new MouseEvent("click")),document.body.removeChild(e)},n=o=>{var t;return!(o=>!!o.auth.external&&r.G)(o)||!(null===(t=o.auth.external)||void 0===t||!t.config.downloadFileSupported)}},59719:function(o,t,e){e.d(t,{G:function(){return r}});e(64455),e(32192);var r=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}}]);
//# sourceMappingURL=54206.7d1813b340154bfb.js.map