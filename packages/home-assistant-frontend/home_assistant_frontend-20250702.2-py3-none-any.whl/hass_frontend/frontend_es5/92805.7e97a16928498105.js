"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([["92805"],{44329:function(e,t,a){a.a(e,async function(e,r){try{a.r(t),a.d(t,{CloudForgotPasswordCard:function(){return C}});var n,o,s,i,l=a(54982),c=a(29694),d=a(75778),u=a(54521),h=a(4490),_=a(67063),p=a(20129),y=a(85297),f=(a(12212),a(73742)),v=a(59048),b=a(7616),g=a(39884),m=a(78206),w=(a(12942),a(31138),a(37492),a(95814)),k=a(31307),P=a(52668),Z=e([m]);m=(Z.then?(await Z)():Z)[0];var C=function(e){function t(){var e;(0,u.Z)(this,t);for(var a=arguments.length,r=new Array(a),n=0;n<a;n++)r[n]=arguments[n];return(e=(0,p.Z)(this,t,[].concat(r))).translationKeyPanel="config.cloud.forgot_password",e.cardLess=!1,e._inProgress=!1,e._resetPassword=function(){var t=(0,d.Z)((0,c.Z)().m(function t(a){var r;return(0,c.Z)().w(function(t){for(;;)switch(t.n){case 0:if(e._inProgress=!0,t.p=1,!e.hass){t.n=3;break}return t.n=2,(0,k.u_)(e.hass,a);case 2:t.n=4;break;case 3:return t.n=4,(0,P.cG)(a);case 4:(0,g.B)((0,_.Z)(e),"cloud-email-changed",{value:a}),e._inProgress=!1,(0,g.B)((0,_.Z)(e),"cloud-done",{flashMessage:e.localize("ui.panel.".concat(e.translationKeyPanel,".check_your_email"))}),t.n=8;break;case 5:if(t.p=5,r=t.v,e._inProgress=!1,"usernotfound"!==(r&&r.body&&r.body.code)||a===a.toLowerCase()){t.n=7;break}return t.n=6,e._resetPassword(a.toLowerCase());case 6:t.n=8;break;case 7:e._error=r&&r.body&&r.body.message?r.body.message:"Unknown error";case 8:return t.a(2)}},t,null,[[1,5]])}));return function(e){return t.apply(this,arguments)}}(),e}return(0,y.Z)(t,e),(0,h.Z)(t,[{key:"render",value:function(){return this.cardLess?this._renderContent():(0,v.dy)(n||(n=(0,l.Z)([' <ha-card outlined .header="','"> '," </ha-card> "])),this.localize("ui.panel.".concat(this.translationKeyPanel,".subtitle")),this._renderContent())}},{key:"_renderContent",value:function(){var e;return(0,v.dy)(o||(o=(0,l.Z)([' <div class="card-content"> <p> '," </p> ",' <ha-textfield autofocus id="email" label="','" .value="','" type="email" required .disabled="','" @keydown="','" .validationMessage="','"></ha-textfield> </div> <div class="card-actions"> <ha-progress-button @click="','" .progress="','"> '," </ha-progress-button> </div> "])),this.localize("ui.panel.".concat(this.translationKeyPanel,".instructions")),this._error?(0,v.dy)(s||(s=(0,l.Z)(['<ha-alert alert-type="error">',"</ha-alert>"])),this._error):v.Ld,this.localize("ui.panel.".concat(this.translationKeyPanel,".email")),null!==(e=this.email)&&void 0!==e?e:"",this._inProgress,this._keyDown,this.localize("ui.panel.".concat(this.translationKeyPanel,".email_error_msg")),this._handleEmailPasswordReset,this._inProgress,this.localize("ui.panel.".concat(this.translationKeyPanel,".send_reset_email")))}},{key:"_keyDown",value:function(e){"Enter"===e.key&&this._handleEmailPasswordReset()}},{key:"_handleEmailPasswordReset",value:(a=(0,d.Z)((0,c.Z)().m(function e(){var t,a;return(0,c.Z)().w(function(e){for(;;)switch(e.n){case 0:if(t=this.emailField,a=t.value,t.reportValidity()){e.n=1;break}return t.focus(),e.a(2);case 1:this._inProgress=!0,this._resetPassword(a);case 2:return e.a(2)}},e,this)})),function(){return a.apply(this,arguments)})}],[{key:"styles",get:function(){return[w.Qx,(0,v.iv)(i||(i=(0,l.Z)(["ha-card{max-width:600px;margin:0 auto;margin-top:24px}h1{margin:0}ha-textfield{width:100%}.card-actions{display:flex;justify-content:flex-end;align-items:center}"])))]}}]);var a}(v.oi);(0,f.__decorate)([(0,b.Cb)({attribute:!1})],C.prototype,"hass",void 0),(0,f.__decorate)([(0,b.Cb)({attribute:!1})],C.prototype,"localize",void 0),(0,f.__decorate)([(0,b.Cb)({attribute:"translation-key-panel"})],C.prototype,"translationKeyPanel",void 0),(0,f.__decorate)([(0,b.Cb)()],C.prototype,"email",void 0),(0,f.__decorate)([(0,b.Cb)({type:Boolean,attribute:"card-less"})],C.prototype,"cardLess",void 0),(0,f.__decorate)([(0,b.SB)()],C.prototype,"_inProgress",void 0),(0,f.__decorate)([(0,b.SB)()],C.prototype,"_error",void 0),(0,f.__decorate)([(0,b.IO)("#email",!0)],C.prototype,"emailField",void 0),C=(0,f.__decorate)([(0,b.Mo)("cloud-forgot-password-card")],C),r()}catch(x){r(x)}})}}]);
//# sourceMappingURL=92805.7e97a16928498105.js.map