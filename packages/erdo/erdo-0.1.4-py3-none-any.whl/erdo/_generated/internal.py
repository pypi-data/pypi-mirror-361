# DO NOT EDIT THIS FILE MANUALLY - it will be overwritten.
# Generated by: erdo gen-client
"""
Internal action functions auto-generated from backend/bot/action.go.

These functions provide Python implementations of internal actions
that are handled directly by the bot execution engine.
"""

from typing import Any, Optional

from pydantic import BaseModel

from .types import Result


class CheckpointAttemptParams(BaseModel):
    """checkpoint_attempt parameters"""

    attempts: Optional[Any] = None  # Attempt data
    loops: Optional[Any] = None  # Loop data


class RefreshResourceParams(BaseModel):
    """refresh_resource parameters"""

    resource: Any  # Resource to refresh


def refresh_resource(resource) -> Result:
    """Refreshes one or more resources by updating their dataset information."""
    if isinstance(resource, list):
        output = {"resources": resource}
    else:
        output = {"resource": resource}
    return Result(
        status="success", parameters={}, output=output, message=None, error=None
    )


def checkpoint_attempt(loops, attempts=None) -> Result:
    """Creates a checkpoint for the current attempt with the specified number of loops."""
    # Don't try to convert template strings to int - they'll be resolved at runtime
    if isinstance(loops, str) and not loops.startswith("{{"):
        loops = int(loops)
    output = {"loops": loops}
    if attempts is not None:
        output["attempts"] = attempts
    return Result(
        status="success", parameters={}, output=output, message=None, error=None
    )
