"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([["79378"],{8751:function(e,t,n){n.r(t);var a=n(75706),r=n(42385),i=n(74904),s=n(10354),o=n(29694),c=n(75778),u=n(61943),h=n(54521),l=n(4490),d=(n(40777),n(12212),n(25518),n(39710),n(26847),n(24819),n(81738),n(33480),n(94814),n(6989),n(72489),n(87799),n(54480),n(15519),n(70820),n(1455),n(64455),n(32192),n(56303),n(26086),n(56389),n(48694),n(27530),n(41465),n(34845),n(95729),n(36330),n(38221),n(75863),function(){function e(t,n,a,r,i){var s=this;(0,h.Z)(this,e),this._legacyCanvasSize=e.DEFAULT_CANVAS_SIZE,this._preferredCamera="environment",this._maxScansPerSecond=25,this._lastScanTimestamp=-1,this._destroyed=this._flashOn=this._paused=this._active=!1,this.$video=t,this.$canvas=document.createElement("canvas"),a&&"object"===(0,u.Z)(a)?this._onDecode=n:(a||r||i?console.warn("You're using a deprecated version of the QrScanner constructor which will be removed in the future"):console.warn("Note that the type of the scan result passed to onDecode will change in the future. To already switch to the new api today, you can pass returnDetailedScanResult: true."),this._legacyOnDecode=n),n="object"===(0,u.Z)(a)?a:{},this._onDecodeError=n.onDecodeError||("function"==typeof a?a:this._onDecodeError),this._calculateScanRegion=n.calculateScanRegion||("function"==typeof r?r:this._calculateScanRegion),this._preferredCamera=n.preferredCamera||i||this._preferredCamera,this._legacyCanvasSize="number"==typeof a?a:"number"==typeof r?r:this._legacyCanvasSize,this._maxScansPerSecond=n.maxScansPerSecond||this._maxScansPerSecond,this._onPlay=this._onPlay.bind(this),this._onLoadedMetaData=this._onLoadedMetaData.bind(this),this._onVisibilityChange=this._onVisibilityChange.bind(this),this._updateOverlay=this._updateOverlay.bind(this),t.disablePictureInPicture=!0,t.playsInline=!0,t.muted=!0;var o=!1;if(t.hidden&&(t.hidden=!1,o=!0),document.body.contains(t)||(document.body.appendChild(t),o=!0),a=t.parentElement,n.highlightScanRegion||n.highlightCodeOutline){if(r=!!n.overlay,this.$overlay=n.overlay||document.createElement("div"),(i=this.$overlay.style).position="absolute",i.display="none",i.pointerEvents="none",this.$overlay.classList.add("scan-region-highlight"),!r&&n.highlightScanRegion){this.$overlay.innerHTML='<svg class="scan-region-highlight-svg" viewBox="0 0 238 238" preserveAspectRatio="none" style="position:absolute;width:100%;height:100%;left:0;top:0;fill:none;stroke:#e9b213;stroke-width:4;stroke-linecap:round;stroke-linejoin:round"><path d="M31 2H10a8 8 0 0 0-8 8v21M207 2h21a8 8 0 0 1 8 8v21m0 176v21a8 8 0 0 1-8 8h-21m-176 0H10a8 8 0 0 1-8-8v-21"/></svg>';try{this.$overlay.firstElementChild.animate({transform:["scale(.98)","scale(1.01)"]},{duration:400,iterations:1/0,direction:"alternate",easing:"ease-in-out"})}catch(c){}a.insertBefore(this.$overlay,this.$video.nextSibling)}n.highlightCodeOutline&&(this.$overlay.insertAdjacentHTML("beforeend",'<svg class="code-outline-highlight" preserveAspectRatio="none" style="display:none;width:100%;height:100%;fill:none;stroke:#e9b213;stroke-width:5;stroke-dasharray:25;stroke-linecap:round;stroke-linejoin:round"><polygon/></svg>'),this.$codeOutlineHighlight=this.$overlay.lastElementChild)}this._scanRegion=this._calculateScanRegion(t),requestAnimationFrame(function(){var e=window.getComputedStyle(t);"none"===e.display&&(t.style.setProperty("display","block","important"),o=!0),"visible"!==e.visibility&&(t.style.setProperty("visibility","visible","important"),o=!0),o&&(console.warn("QrScanner has overwritten the video hiding style to avoid Safari stopping the playback."),t.style.opacity="0",t.style.width="0",t.style.height="0",s.$overlay&&s.$overlay.parentElement&&s.$overlay.parentElement.removeChild(s.$overlay),delete s.$overlay,delete s.$codeOutlineHighlight),s.$overlay&&s._updateOverlay()}),t.addEventListener("play",this._onPlay),t.addEventListener("loadedmetadata",this._onLoadedMetaData),document.addEventListener("visibilitychange",this._onVisibilityChange),window.addEventListener("resize",this._updateOverlay),this._qrEnginePromise=e.createQrEngine()}return(0,l.Z)(e,[{key:"hasFlash",value:(E=(0,c.Z)((0,o.Z)().m(function t(){var n;return(0,o.Z)().w(function(t){for(;;)switch(t.n){case 0:if(t.p=0,!this.$video.srcObject){t.n=2;break}if(this.$video.srcObject instanceof MediaStream){t.n=1;break}return t.a(2,!1);case 1:n=this.$video.srcObject,t.n=4;break;case 2:return t.n=3,this._getCameraStream();case 3:n=t.v.stream;case 4:return t.a(2,"torch"in n.getVideoTracks()[0].getSettings());case 5:return t.p=5,t.v,t.a(2,!1);case 6:return t.p=6,n&&n!==this.$video.srcObject&&(console.warn("Call hasFlash after successfully starting the scanner to avoid creating a temporary video stream"),e._stopVideoStream(n)),t.f(6);case 7:return t.a(2)}},t,this,[[0,5,6,7]])})),function(){return E.apply(this,arguments)})},{key:"isFlashOn",value:function(){return this._flashOn}},{key:"toggleFlash",value:(Z=(0,c.Z)((0,o.Z)().m(function e(){return(0,o.Z)().w(function(e){for(;;)switch(e.n){case 0:if(!this._flashOn){e.n=2;break}return e.n=1,this.turnFlashOff();case 1:e.n=3;break;case 2:return e.n=3,this.turnFlashOn();case 3:return e.a(2)}},e,this)})),function(){return Z.apply(this,arguments)})},{key:"turnFlashOn",value:(O=(0,c.Z)((0,o.Z)().m(function e(){var t;return(0,o.Z)().w(function(e){for(;;)switch(e.n){case 0:if(this._flashOn||this._destroyed||(this._flashOn=!0,!this._active||this._paused)){e.n=6;break}return e.p=1,e.n=2,this.hasFlash();case 2:if(e.v){e.n=3;break}throw"No flash available";case 3:return e.n=4,this.$video.srcObject.getVideoTracks()[0].applyConstraints({advanced:[{torch:!0}]});case 4:e.n=6;break;case 5:throw e.p=5,t=e.v,this._flashOn=!1,t;case 6:return e.a(2)}},e,this,[[1,5]])})),function(){return O.apply(this,arguments)})},{key:"turnFlashOff",value:(S=(0,c.Z)((0,o.Z)().m(function e(){return(0,o.Z)().w(function(e){for(;;)switch(e.n){case 0:if(!this._flashOn){e.n=1;break}return this._flashOn=!1,e.n=1,this._restartVideoStream();case 1:return e.a(2)}},e,this)})),function(){return S.apply(this,arguments)})},{key:"destroy",value:function(){this.$video.removeEventListener("loadedmetadata",this._onLoadedMetaData),this.$video.removeEventListener("play",this._onPlay),document.removeEventListener("visibilitychange",this._onVisibilityChange),window.removeEventListener("resize",this._updateOverlay),this._destroyed=!0,this._flashOn=!1,this.stop(),e._postWorkerMessage(this._qrEnginePromise,"close")}},{key:"start",value:(k=(0,c.Z)((0,o.Z)().m(function t(){var n,a,r,i;return(0,o.Z)().w(function(t){for(;;)switch(t.n){case 0:if(!this._destroyed){t.n=1;break}throw Error("The QR scanner can not be started as it had been destroyed.");case 1:if(this._active&&!this._paused){t.n=9;break}if("https:"!==window.location.protocol&&console.warn("The camera stream is only accessible if the page is transferred via https."),this._active=!0,document.hidden){t.n=9;break}if(this._paused=!1,!this.$video.srcObject){t.n=3;break}return t.n=2,this.$video.play();case 2:t.n=9;break;case 3:return t.p=3,t.n=4,this._getCameraStream();case 4:if(n=t.v,a=n.stream,r=n.facingMode,this._active&&!this._paused){t.n=5;break}e._stopVideoStream(a),t.n=7;break;case 5:return this._setVideoMirror(r),this.$video.srcObject=a,t.n=6,this.$video.play();case 6:this._flashOn&&(this._flashOn=!1,this.turnFlashOn().catch(function(){}));case 7:t.n=9;break;case 8:if(t.p=8,i=t.v,this._paused){t.n=9;break}throw this._active=!1,i;case 9:return t.a(2)}},t,this,[[3,8]])})),function(){return k.apply(this,arguments)})},{key:"stop",value:function(){this.pause(),this._active=!1}},{key:"pause",value:(b=(0,c.Z)((0,o.Z)().m(function t(){var n,a,r=this,i=arguments;return(0,o.Z)().w(function(t){for(;;)switch(t.n){case 0:if(n=i.length>0&&void 0!==i[0]&&i[0],this._paused=!0,this._active){t.n=1;break}return t.a(2,!0);case 1:if(this.$video.pause(),this.$overlay&&(this.$overlay.style.display="none"),a=function(){r.$video.srcObject instanceof MediaStream&&(e._stopVideoStream(r.$video.srcObject),r.$video.srcObject=null)},!n){t.n=2;break}return t.a(2,(a(),!0));case 2:return t.n=3,new Promise(function(e){return setTimeout(e,300)});case 3:if(this._paused){t.n=4;break}return t.a(2,!1);case 4:return a(),t.a(2,!0)}},t,this)})),function(){return b.apply(this,arguments)})},{key:"setCamera",value:(w=(0,c.Z)((0,o.Z)().m(function e(t){return(0,o.Z)().w(function(e){for(;;)switch(e.n){case 0:if(t===this._preferredCamera){e.n=1;break}return this._preferredCamera=t,e.n=1,this._restartVideoStream();case 1:return e.a(2)}},e,this)})),function(e){return w.apply(this,arguments)})},{key:"setGrayscaleWeights",value:function(t,n,a){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];e._postWorkerMessage(this._qrEnginePromise,"grayscaleWeights",{red:t,green:n,blue:a,useIntegerApproximation:r})}},{key:"setInversionMode",value:function(t){e._postWorkerMessage(this._qrEnginePromise,"inversionMode",t)}},{key:"_onPlay",value:function(){this._scanRegion=this._calculateScanRegion(this.$video),this._updateOverlay(),this.$overlay&&(this.$overlay.style.display=""),this._scanFrame()}},{key:"_onLoadedMetaData",value:function(){this._scanRegion=this._calculateScanRegion(this.$video),this._updateOverlay()}},{key:"_onVisibilityChange",value:function(){document.hidden?this.pause():this._active&&this.start()}},{key:"_calculateScanRegion",value:function(e){var t=Math.round(2/3*Math.min(e.videoWidth,e.videoHeight));return{x:Math.round((e.videoWidth-t)/2),y:Math.round((e.videoHeight-t)/2),width:t,height:t,downScaledWidth:this._legacyCanvasSize,downScaledHeight:this._legacyCanvasSize}}},{key:"_updateOverlay",value:function(){var e=this;requestAnimationFrame(function(){if(e.$overlay){var t=e.$video,n=t.videoWidth,a=t.videoHeight,r=t.offsetWidth,i=t.offsetHeight,o=t.offsetLeft,c=t.offsetTop,u=window.getComputedStyle(t),h=u.objectFit,l=n/a,d=r/i;switch(h){case"none":var v=n,f=a;break;case"fill":v=r,f=i;break;default:("cover"===h?l>d:l<d)?v=(f=i)*l:f=(v=r)/l,"scale-down"===h&&(v=Math.min(v,n),f=Math.min(f,a))}var g=u.objectPosition.split(" ").map(function(e,t){var n=parseFloat(e);return e.endsWith("%")?(t?i-f:r-v)*n/100:n}),m=(0,s.Z)(g,2),p=m[0],y=m[1];u=e._scanRegion.width||n,d=e._scanRegion.height||a,h=e._scanRegion.x||0;var _=e._scanRegion.y||0;(l=e.$overlay.style).width="".concat(u/n*v,"px"),l.height="".concat(d/a*f,"px"),l.top="".concat(c+y+_/a*f,"px"),a=/scaleX\(-1\)/.test(t.style.transform),l.left="".concat(o+(a?r-p-v:p)+(a?n-h-u:h)/n*v,"px"),l.transform=t.style.transform}})}},{key:"_scanFrame",value:function(){var t=this;!this._active||this.$video.paused||this.$video.ended||("requestVideoFrameCallback"in this.$video?this.$video.requestVideoFrameCallback.bind(this.$video):requestAnimationFrame)((0,c.Z)((0,o.Z)().m(function n(){var a,r,i,s,c,u,h;return(0,o.Z)().w(function(n){for(;;)switch(n.n){case 0:if(1>=t.$video.readyState){n.n=10;break}if(a=Date.now()-t._lastScanTimestamp,r=1e3/t._maxScansPerSecond,!(a<r)){n.n=1;break}return n.n=1,new Promise(function(e){return setTimeout(e,r-a)});case 1:return t._lastScanTimestamp=Date.now(),n.p=2,n.n=3,e.scanImage(t.$video,{scanRegion:t._scanRegion,qrEngine:t._qrEnginePromise,canvas:t.$canvas});case 3:i=n.v,n.n=6;break;case 4:if(n.p=4,s=n.v,t._active){n.n=5;break}return n.a(2);case 5:t._onDecodeError(s);case 6:if(c=!e._disableBarcodeDetector){n.n=8;break}return n.n=7,t._qrEnginePromise;case 7:u=n.v,h=Worker,c=u instanceof h;case 8:if(c){n.n=9;break}t._qrEnginePromise=e.createQrEngine();case 9:i?(t._onDecode?t._onDecode(i):t._legacyOnDecode&&t._legacyOnDecode(i.data),t.$codeOutlineHighlight&&(clearTimeout(t._codeOutlineHighlightRemovalTimeout),t._codeOutlineHighlightRemovalTimeout=void 0,t.$codeOutlineHighlight.setAttribute("viewBox","".concat(t._scanRegion.x||0," ")+"".concat(t._scanRegion.y||0," ")+"".concat(t._scanRegion.width||t.$video.videoWidth," ")+"".concat(t._scanRegion.height||t.$video.videoHeight)),t.$codeOutlineHighlight.firstElementChild.setAttribute("points",i.cornerPoints.map(function(e){var t=e.x,n=e.y;return"".concat(t,",").concat(n)}).join(" ")),t.$codeOutlineHighlight.style.display="")):t.$codeOutlineHighlight&&!t._codeOutlineHighlightRemovalTimeout&&(t._codeOutlineHighlightRemovalTimeout=setTimeout(function(){return t.$codeOutlineHighlight.style.display="none"},100));case 10:t._scanFrame();case 11:return n.a(2)}},n,null,[[2,4]])})))}},{key:"_onDecodeError",value:function(t){t!==e.NO_QR_CODE_FOUND&&console.log(t)}},{key:"_getCameraStream",value:(_=(0,c.Z)((0,o.Z)().m(function e(){var t,n,a,s,c,u,h,l,d=this;return(0,o.Z)().w(function(e){for(;;)switch(e.n){case 0:if(navigator.mediaDevices){e.n=1;break}throw"Camera not found.";case 1:t=/^(environment|user)$/.test(this._preferredCamera)?"facingMode":"deviceId",a=(n=[{width:{min:1024}},{width:{min:768}},{}]).map(function(e){return Object.assign({},e,(0,i.Z)({},t,{exact:d._preferredCamera}))}),s=0,c=[].concat((0,r.Z)(a),n);case 2:if(!(s<c.length)){e.n=7;break}return u=c[s],e.p=3,e.n=4,navigator.mediaDevices.getUserMedia({video:u,audio:!1});case 4:return h=e.v,l=this._getFacingMode(h)||(u.facingMode?this._preferredCamera:"environment"===this._preferredCamera?"user":"environment"),e.a(2,{stream:h,facingMode:l});case 5:e.p=5,e.v;case 6:s++,e.n=2;break;case 7:throw"Camera not found.";case 8:return e.a(2)}},e,this,[[3,5]])})),function(){return _.apply(this,arguments)})},{key:"_restartVideoStream",value:(y=(0,c.Z)((0,o.Z)().m(function e(){var t,n,a;return(0,o.Z)().w(function(e){for(;;)switch(e.n){case 0:return t=this._paused,e.n=1,this.pause(!0);case 1:if(!(a=e.v)){e.n=2;break}a=!t;case 2:if(!(n=a)){e.n=3;break}n=this._active;case 3:if(!n){e.n=4;break}return e.n=4,this.start();case 4:return e.a(2)}},e,this)})),function(){return y.apply(this,arguments)})},{key:"_setVideoMirror",value:function(e){this.$video.style.transform="scaleX("+("user"===e?-1:1)+")"}},{key:"_getFacingMode",value:function(e){return(e=e.getVideoTracks()[0])?/rear|back|environment/i.test(e.label)?"environment":/front|user|face/i.test(e.label)?"user":null:null}}],[{key:"WORKER_PATH",set:function(e){console.warn("Setting QrScanner.WORKER_PATH is not required and not supported anymore. Have a look at the README for new setup instructions.")}},{key:"hasCamera",value:(p=(0,c.Z)((0,o.Z)().m(function t(){return(0,o.Z)().w(function(t){for(;;)switch(t.n){case 0:return t.p=0,t.n=1,e.listCameras(!1);case 1:return t.a(2,!!t.v.length);case 2:return t.p=2,t.v,t.a(2,!1)}},t,null,[[0,2]])})),function(){return p.apply(this,arguments)})},{key:"listCameras",value:(m=(0,c.Z)((0,o.Z)().m(function t(){var n,a,r,i,s=arguments;return(0,o.Z)().w(function(t){for(;;)switch(t.n){case 0:if(n=s.length>0&&void 0!==s[0]&&s[0],navigator.mediaDevices){t.n=1;break}return t.a(2,[]);case 1:if(a=function(){var e=(0,c.Z)((0,o.Z)().m(function e(){return(0,o.Z)().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,navigator.mediaDevices.enumerateDevices();case 1:return e.a(2,e.v.filter(function(e){return"videoinput"===e.kind}))}},e)}));return function(){return e.apply(this,arguments)}}(),t.p=2,!(i=n)){t.n=4;break}return t.n=3,a();case 3:i=t.v.every(function(e){return!e.label});case 4:if(!i){t.n=6;break}return t.n=5,navigator.mediaDevices.getUserMedia({audio:!1,video:!0});case 5:r=t.v;case 6:t.n=8;break;case 7:t.p=7,t.v;case 8:return t.p=8,t.n=9,a();case 9:return t.a(2,t.v.map(function(e,t){return{id:e.deviceId,label:e.label||(0===t?"Default Camera":"Camera ".concat(t+1))}}));case 10:return t.p=10,r&&(console.warn("Call listCameras after successfully starting a QR scanner to avoid creating a temporary video stream"),e._stopVideoStream(r)),t.f(10);case 11:return t.a(2)}},t,null,[[8,,10,11],[2,7]])})),function(){return m.apply(this,arguments)})},{key:"scanImage",value:(g=(0,c.Z)((0,o.Z)().m(function t(n,a,r,i){var u,h,l,d,v,f,g,m,p,y,_,w,b,k,S=arguments;return(0,o.Z)().w(function(t){for(;;)switch(t.n){case 0:return u=S.length>4&&void 0!==S[4]&&S[4],h=S.length>5&&void 0!==S[5]&&S[5],d=!1,a&&("scanRegion"in a||"qrEngine"in a||"canvas"in a||"disallowCanvasResizing"in a||"alsoTryWithoutScanRegion"in a||"returnDetailedScanResult"in a)?(l=a.scanRegion,r=a.qrEngine,i=a.canvas,u=a.disallowCanvasResizing||!1,h=a.alsoTryWithoutScanRegion||!1,d=!0):a||r||i||u||h?console.warn("You're using a deprecated api for scanImage which will be removed in the future."):console.warn("Note that the return type of scanImage will change in the future. To already switch to the new api today, you can pass returnDetailedScanResult: true."),a=!!r,t.p=1,t.n=2,Promise.all([r||e.createQrEngine(),e._loadImage(n)]);case 2:if(g=t.v,m=(0,s.Z)(g,2),r=m[0],v=m[1],p=e._drawToCanvas(v,l,i,u),y=(0,s.Z)(p,2),i=y[0],f=y[1],!(r instanceof Worker)){t.n=4;break}return w=r,a||e._postWorkerMessageSync(w,"inversionMode","both"),t.n=3,new Promise(function(t,n){var a,r,s,o=-1;r=function(i){i.data.id===o&&(w.removeEventListener("message",r),w.removeEventListener("error",s),clearTimeout(a),null!==i.data.data?t({data:i.data.data,cornerPoints:e._convertPoints(i.data.cornerPoints,l)}):n(e.NO_QR_CODE_FOUND))},s=function(e){w.removeEventListener("message",r),w.removeEventListener("error",s),clearTimeout(a),n("Scanner error: "+(e?e.message||e:"Unknown Error"))},w.addEventListener("message",r),w.addEventListener("error",s),a=setTimeout(function(){return s("timeout")},1e4);var c=f.getImageData(0,0,i.width,i.height);o=e._postWorkerMessageSync(w,"decode",c,[c.data.buffer])});case 3:_=t.v,t.n=6;break;case 4:return t.n=5,Promise.race([new Promise(function(e,t){return window.setTimeout(function(){return t("Scanner error: timeout")},1e4)}),(0,c.Z)((0,o.Z)().m(function t(){var a,c,d,v;return(0,o.Z)().w(function(t){for(;;)switch(t.n){case 0:return t.p=0,t.n=1,r.detect(i);case 1:if(a=t.v,c=(0,s.Z)(a,1),d=c[0]){t.n=2;break}throw e.NO_QR_CODE_FOUND;case 2:return t.a(2,{data:d.rawValue,cornerPoints:e._convertPoints(d.cornerPoints,l)});case 3:if(t.p=3,v=t.v,d=v.message||v,!/not implemented|service unavailable/.test(d)){t.n=4;break}return t.a(2,(e._disableBarcodeDetector=!0,e.scanImage(n,{scanRegion:l,canvas:i,disallowCanvasResizing:u,alsoTryWithoutScanRegion:h})));case 4:throw"Scanner error: ".concat(d);case 5:return t.a(2)}},t,null,[[0,3]])}))()]);case 5:_=t.v;case 6:return t.a(2,d?_:_.data);case 7:if(t.p=7,k=t.v,l&&h){t.n=8;break}throw k;case 8:return t.n=9,e.scanImage(n,{qrEngine:r,canvas:i,disallowCanvasResizing:u});case 9:return b=t.v,t.a(2,d?b:b.data);case 10:return t.p=10,a||e._postWorkerMessage(r,"close"),t.f(10);case 11:return t.a(2)}},t,null,[[1,7,10,11]])})),function(e,t,n,a){return g.apply(this,arguments)})},{key:"createQrEngine",value:(f=(0,c.Z)((0,o.Z)().m(function t(a){var r,i,s,c;return(0,o.Z)().w(function(t){for(;;)switch(t.n){case 0:if(a&&console.warn("Specifying a worker path is not required and not supported anymore."),a=function(){return n.e("36720").then(n.bind(n,53316)).then(function(e){return e.createWorker()})},!(i=!e._disableBarcodeDetector&&"BarcodeDetector"in window&&BarcodeDetector.getSupportedFormats)){t.n=2;break}return t.n=1,BarcodeDetector.getSupportedFormats();case 1:i=t.v.includes("qr_code");case 2:if(i){t.n=3;break}return t.a(2,a());case 3:if(r=navigator.userAgentData,!(s=r&&r.brands.some(function(e){var t=e.brand;return/Chromium/i.test(t)})&&/mac ?OS/i.test(r.platform))){t.n=5;break}return t.n=4,r.getHighEntropyValues(["architecture","platformVersion"]).then(function(e){var t=e.architecture,n=e.platformVersion;return/arm/i.test(t||"arm")&&13<=parseInt(n||"13")}).catch(function(){return!0});case 4:s=t.v;case 5:if(!s){t.n=6;break}c=a(),t.n=7;break;case 6:c=new BarcodeDetector({formats:["qr_code"]});case 7:return t.a(2,c)}},t)})),function(e){return f.apply(this,arguments)})},{key:"_convertPoints",value:function(e,t){if(!t)return e;var n=t.x||0,r=t.y||0,i=t.width&&t.downScaledWidth?t.width/t.downScaledWidth:1;t=t.height&&t.downScaledHeight?t.height/t.downScaledHeight:1;var s,o=(0,a.Z)(e);try{for(o.s();!(s=o.n()).done;){var c=s.value;c.x=c.x*i+n,c.y=c.y*t+r}}catch(u){o.e(u)}finally{o.f()}return e}},{key:"_stopVideoStream",value:function(e){var t,n=(0,a.Z)(e.getTracks());try{for(n.s();!(t=n.n()).done;){var r=t.value;r.stop(),e.removeTrack(r)}}catch(i){n.e(i)}finally{n.f()}}},{key:"_drawToCanvas",value:function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];n=n||document.createElement("canvas");var r=t&&t.x?t.x:0,i=t&&t.y?t.y:0,s=t&&t.width?t.width:e.videoWidth||e.width,o=t&&t.height?t.height:e.videoHeight||e.height;return a||(a=t&&t.downScaledWidth?t.downScaledWidth:s,t=t&&t.downScaledHeight?t.downScaledHeight:o,n.width!==a&&(n.width=a),n.height!==t&&(n.height=t)),(t=n.getContext("2d",{alpha:!1})).imageSmoothingEnabled=!1,t.drawImage(e,r,i,s,o,0,0,n.width,n.height),[n,t]}},{key:"_loadImage",value:(v=(0,c.Z)((0,o.Z)().m(function t(n){var a;return(0,o.Z)().w(function(t){for(;;)switch(t.n){case 0:if(!(n instanceof Image)){t.n=2;break}return t.n=1,e._awaitImageLoad(n);case 1:return t.a(2,n);case 2:if(!(n instanceof HTMLVideoElement||n instanceof HTMLCanvasElement||n instanceof SVGImageElement||"OffscreenCanvas"in window&&n instanceof OffscreenCanvas||"ImageBitmap"in window&&n instanceof ImageBitmap)){t.n=3;break}return t.a(2,n);case 3:if(!(n instanceof File||n instanceof Blob||n instanceof URL||"string"==typeof n)){t.n=8;break}return(a=new Image).src=n instanceof File||n instanceof Blob?URL.createObjectURL(n):n.toString(),t.p=4,t.n=5,e._awaitImageLoad(a);case 5:return t.a(2,a);case 6:return t.p=6,(n instanceof File||n instanceof Blob)&&URL.revokeObjectURL(a.src),t.f(6);case 7:t.n=9;break;case 8:throw"Unsupported image type.";case 9:return t.a(2)}},t,null,[[4,,6,7]])})),function(e){return v.apply(this,arguments)})},{key:"_awaitImageLoad",value:(d=(0,c.Z)((0,o.Z)().m(function e(t){return(0,o.Z)().w(function(e){for(;;)switch(e.n){case 0:if(t.complete&&0!==t.naturalWidth){e.n=1;break}return e.n=1,new Promise(function(e,n){var a=function(r){t.removeEventListener("load",a),t.removeEventListener("error",a),r instanceof ErrorEvent?n("Image load error"):e()};t.addEventListener("load",a),t.addEventListener("error",a)});case 1:return e.a(2)}},e)})),function(e){return d.apply(this,arguments)})},{key:"_postWorkerMessage",value:(t=(0,c.Z)((0,o.Z)().m(function t(n,a,r,i){var s,c,u,h,l;return(0,o.Z)().w(function(t){for(;;)switch(t.n){case 0:return s=e,t.n=1,n;case 1:return c=t.v,u=a,h=r,l=i,t.a(2,s._postWorkerMessageSync.call(s,c,u,h,l))}},t)})),function(e,n,a,r){return t.apply(this,arguments)})},{key:"_postWorkerMessageSync",value:function(t,n,a,r){if(!(t instanceof Worker))return-1;var i=e._workerMessageId++;return t.postMessage({id:i,type:n,data:a},r),i}}]);var t,d,v,f,g,m,p,y,_,w,b,k,S,O,Z,E}());d.DEFAULT_CANVAS_SIZE=400,d.NO_QR_CODE_FOUND="No QR code found",d._disableBarcodeDetector=!1,d._workerMessageId=0,t.default=d},85133:function(e,t,n){var a=n(30456),r=n(81455),i=n(12814),s=n(43576),o=n(27169).trim,c=n(76959),u=i("".charAt),h=a.parseFloat,l=a.Symbol,d=l&&l.iterator,v=1/h(c+"-0")!=-1/0||d&&!r(function(){h(Object(d))});e.exports=v?function(e){var t=o(s(e)),n=h(t);return 0===n&&"-"===u(t,0)?-0:n}:h},15519:function(e,t,n){var a=n(77341),r=n(85133);a({global:!0,forced:parseFloat!==r},{parseFloat:r})}}]);
//# sourceMappingURL=79378.a893c65b5b48ea3b.js.map