# DataText

ãƒ—ãƒ¬ãƒ¼ãƒ³ãƒ†ã‚­ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã§å‹•ä½œã™ã‚‹ã‚·ãƒ³ãƒ—ãƒ«ãªãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒ©ã‚¤ãƒ–ãƒ©ãƒª

## ğŸ“‹ æ¦‚è¦

DataTextã¯ã€ãƒ—ãƒ¬ãƒ¼ãƒ³ãƒ†ã‚­ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã¨ã—ã¦ä½¿ç”¨ã§ãã‚‹Pythonãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§ã™ã€‚CSVã‚ˆã‚Šã‚‚æŸ”è»Ÿã§ç›´æ„Ÿçš„ãªãƒ‡ãƒ¼ã‚¿æ“ä½œãŒå¯èƒ½ã§ã€å¤–éƒ¨ä¾å­˜é–¢ä¿‚ã¯ä¸€åˆ‡ã‚ã‚Šã¾ã›ã‚“ã€‚

## âœ¨ ç‰¹å¾´

- **ä¾å­˜ã‚¼ãƒ­**: å¤–éƒ¨ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¯ä¸€åˆ‡ä¸è¦
- **ç›´æ„Ÿçš„API**: SQLé¢¨ã®ã‚¯ã‚¨ãƒªæ§‹æ–‡
- **äººé–“ãŒèª­ã‚ã‚‹**: ãƒ—ãƒ¬ãƒ¼ãƒ³ãƒ†ã‚­ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã§ä¿å­˜
- **è»½é‡**: ã‚·ãƒ³ãƒ—ãƒ«ã§é«˜é€Ÿ
- **æŸ”è»Ÿ**: CSVã‚ˆã‚Šã‚‚è‡ªç”±åº¦ã®é«˜ã„ãƒ‡ãƒ¼ã‚¿å½¢å¼

## ğŸš€ ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆ

### ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

```bash
pip install datatext
```

### åŸºæœ¬çš„ãªä½¿ã„æ–¹

```python
from datatext import DataText

# ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆ
db = DataText('mydata.txt')

# ãƒ†ãƒ¼ãƒ–ãƒ«ä½œæˆ
db.create_table('users', {
    'id': 'int',
    'name': 'str',
    'email': 'str',
    'age': 'int'
})

# ãƒ‡ãƒ¼ã‚¿æŒ¿å…¥
db.insert('users', {
    'id': 1,
    'name': 'ç”°ä¸­å¤ªéƒ',
    'email': 'tanaka@example.com',
    'age': 25
})

# ãƒ‡ãƒ¼ã‚¿æ¤œç´¢
users = db.select('users').where('age', '>', 20).execute()
print(users)
```

## ğŸ“Š ã‚µãƒãƒ¼ãƒˆã™ã‚‹ãƒ‡ãƒ¼ã‚¿å‹

- `int`: æ•´æ•°
- `float`: æµ®å‹•å°æ•°ç‚¹æ•°
- `str`: æ–‡å­—åˆ—
- `bool`: çœŸå½å€¤
- `datetime`: æ—¥æ™‚ï¼ˆISOå½¢å¼ï¼‰

## ğŸ” ã‚¯ã‚¨ãƒªæ©Ÿèƒ½

### SELECTæ–‡

```python
# å…¨ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—
all_users = db.select('users').execute()

# ç‰¹å®šã®ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®ã¿å–å¾—
names = db.select('users', ['name', 'email']).execute()

# æ¡ä»¶ä»˜ãæ¤œç´¢
young_users = db.select('users').where('age', '<', 30).execute()

# è¤‡æ•°æ¡ä»¶
results = db.select('users').where('age', '>', 18).where('name', 'like', 'ç”°').execute()

# ã‚½ãƒ¼ãƒˆ
sorted_users = db.select('users').order_by('age', desc=True).execute()

# ä»¶æ•°åˆ¶é™
limited_users = db.select('users').limit(10).offset(5).execute()
```

### WHEREæ¡ä»¶

| æ¼”ç®—å­ | èª¬æ˜ | ä¾‹ |
|--------|------|-----|
| `=` | ç­‰ã—ã„ | `.where('age', '=', 25)` |
| `!=` | ç­‰ã—ããªã„ | `.where('name', '!=', 'ç”°ä¸­')` |
| `>` | ã‚ˆã‚Šå¤§ãã„ | `.where('age', '>', 20)` |
| `<` | ã‚ˆã‚Šå°ã•ã„ | `.where('age', '<', 30)` |
| `>=` | ä»¥ä¸Š | `.where('age', '>=', 18)` |
| `<=` | ä»¥ä¸‹ | `.where('age', '<=', 65)` |
| `like` | æ–‡å­—åˆ—ã‚’å«ã‚€ | `.where('name', 'like', 'ç”°')` |
| `in` | ãƒªã‚¹ãƒˆã«å«ã¾ã‚Œã‚‹ | `.where('age', 'in', [20, 25, 30])` |

### ã‚«ã‚¹ã‚¿ãƒ æ¡ä»¶

```python
# é–¢æ•°ã‚’ä½¿ã£ãŸæ¡ä»¶
def adult_filter(record):
    return record['age'] >= 18

adults = db.select('users').where_func(adult_filter).execute()
```

## ğŸ› ï¸ ãƒ‡ãƒ¼ã‚¿æ“ä½œ

### ãƒ‡ãƒ¼ã‚¿ã®æŒ¿å…¥

```python
# å˜ä¸€ãƒ¬ã‚³ãƒ¼ãƒ‰
db.insert('users', {'id': 2, 'name': 'ä½è—¤èŠ±å­', 'email': 'sato@example.com'})

# è¤‡æ•°ãƒ¬ã‚³ãƒ¼ãƒ‰
users = [
    {'id': 3, 'name': 'éˆ´æœ¨ä¸€éƒ', 'email': 'suzuki@example.com'},
    {'id': 4, 'name': 'é«˜æ©‹ç¾å’²', 'email': 'takahashi@example.com'}
]
for user in users:
    db.insert('users', user)
```

### ãƒ‡ãƒ¼ã‚¿ã®æ›´æ–°

```python
# æ¡ä»¶ã«ä¸€è‡´ã™ã‚‹ãƒ¬ã‚³ãƒ¼ãƒ‰ã‚’æ›´æ–°
updated = db.update('users', 
                   {'age': 26}, 
                   lambda record: record['name'] == 'ç”°ä¸­å¤ªéƒ')
print(f"{updated}ä»¶ã®ãƒ¬ã‚³ãƒ¼ãƒ‰ãŒæ›´æ–°ã•ã‚Œã¾ã—ãŸ")
```

### ãƒ‡ãƒ¼ã‚¿ã®å‰Šé™¤

```python
# æ¡ä»¶ã«ä¸€è‡´ã™ã‚‹ãƒ¬ã‚³ãƒ¼ãƒ‰ã‚’å‰Šé™¤
deleted = db.delete('users', lambda record: record['age'] < 18)
print(f"{deleted}ä»¶ã®ãƒ¬ã‚³ãƒ¼ãƒ‰ãŒå‰Šé™¤ã•ã‚Œã¾ã—ãŸ")

# å…¨å‰Šé™¤
db.delete('users')
```

## ğŸ—‚ï¸ ãƒ†ãƒ¼ãƒ–ãƒ«ç®¡ç†

### ãƒ†ãƒ¼ãƒ–ãƒ«æƒ…å ±ã®å–å¾—

```python
# ãƒ†ãƒ¼ãƒ–ãƒ«æƒ…å ±
info = db.get_table_info('users')
print(f"ãƒ†ãƒ¼ãƒ–ãƒ«å: {info['name']}")
print(f"ãƒ¬ã‚³ãƒ¼ãƒ‰æ•°: {info['record_count']}")
print(f"ã‚¹ã‚­ãƒ¼ãƒ: {info['schema']}")

# å…¨ãƒ†ãƒ¼ãƒ–ãƒ«ä¸€è¦§
tables = db.list_tables()
print(f"ãƒ†ãƒ¼ãƒ–ãƒ«ä¸€è¦§: {tables}")
```

### ãƒ†ãƒ¼ãƒ–ãƒ«ã®å‰Šé™¤

```python
# ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’å‰Šé™¤
db.drop_table('users')
```

## ğŸ“ ãƒ•ã‚¡ã‚¤ãƒ«å½¢å¼

DataTextã¯ä»¥ä¸‹ã®å½¢å¼ã§ãƒ‡ãƒ¼ã‚¿ã‚’ä¿å­˜ã—ã¾ã™ï¼š

```
# datatext database file
# generated by datatext library

@table users
id:int|name:str|email:str|age:int
1|ç”°ä¸­å¤ªéƒ|tanaka@example.com|25
2|ä½è—¤èŠ±å­|sato@example.com|30

@table products
id:int|name:str|price:float|available:bool
1|å•†å“A|1000.0|true
2|å•†å“B|1500.5|false
```

## ğŸ¯ ä½¿ç”¨ä¾‹

### è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã®ç®¡ç†

```python
# è¨­å®šãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹
config_db = DataText('config.txt')

config_db.create_table('settings', {
    'key': 'str',
    'value': 'str',
    'updated_at': 'datetime'
})

# è¨­å®šã®ä¿å­˜
config_db.insert('settings', {
    'key': 'theme',
    'value': 'dark',
    'updated_at': '2024-01-01 10:00:00'
})

# è¨­å®šã®èª­ã¿è¾¼ã¿
theme = config_db.select('settings').where('key', '=', 'theme').first()
print(f"ãƒ†ãƒ¼ãƒ: {theme['value']}")
```

### ãƒ­ã‚°ãƒ‡ãƒ¼ã‚¿ã®ç®¡ç†

```python
# ãƒ­ã‚°ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹
log_db = DataText('logs.txt')

log_db.create_table('access_logs', {
    'timestamp': 'datetime',
    'ip': 'str',
    'path': 'str',
    'status': 'int'
})

# ãƒ­ã‚°ã®è¨˜éŒ²
log_db.insert('access_logs', {
    'timestamp': '2024-01-01 10:00:00',
    'ip': '192.168.1.100',
    'path': '/api/users',
    'status': 200
})

# ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°ã®æ¤œç´¢
errors = log_db.select('access_logs').where('status', '>=', 400).execute()
```

## ğŸ§ª ãƒ†ã‚¹ãƒˆ

```bash
# ãƒ†ã‚¹ãƒˆã®å®Ÿè¡Œ
python -m pytest tests/

# ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ã®å®Ÿè¡Œ
python examples/basic_usage.py
```

## ğŸš€ ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹

- **å°è¦æ¨¡ãƒ‡ãƒ¼ã‚¿**: 1,000ä»¶ç¨‹åº¦ã¾ã§é«˜é€Ÿ
- **ä¸­è¦æ¨¡ãƒ‡ãƒ¼ã‚¿**: 10,000ä»¶ç¨‹åº¦ã¾ã§å®Ÿç”¨çš„
- **å¤§è¦æ¨¡ãƒ‡ãƒ¼ã‚¿**: ã‚ˆã‚Šé«˜æ©Ÿèƒ½ãªãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’æ¤œè¨

## ğŸ“„ ãƒ©ã‚¤ã‚»ãƒ³ã‚¹

MIT License

## ğŸ‘¤ ä½œè€…

**tikisan** - GitHub: [@tikipiya](https://github.com/tikipiya)

## ğŸ”— é–¢é€£ãƒªãƒ³ã‚¯

- [GitHub Repository](https://github.com/tikipiya/datatext)
- [PyPI Package](https://pypi.org/project/datatext/)
- [Documentation](https://github.com/tikipiya/datatext/docs)

---
