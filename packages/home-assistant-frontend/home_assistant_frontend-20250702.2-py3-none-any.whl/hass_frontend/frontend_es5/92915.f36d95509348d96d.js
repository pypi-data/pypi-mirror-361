"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([["92915"],{84960:function(e,t,i){i.d(t,{e:function(){return l}});var n=i(4490),o=i(54521),r=i(20129),a=i(85297),s=i(45924),l=(i(40777),function(e){function t(e,i,n){var a;return(0,o.Z)(this,t),(a=(0,r.Z)(this,t,[e])).name="GUISupportError",a.warnings=i,a.errors=n,a}return(0,a.Z)(t,e),(0,n.Z)(t)}((0,s.Z)(Error)))},89038:function(e,t,i){i.a(e,async function(e,n){try{i.d(t,{O:function(){return z}});var o,r,a,s,l,u,h,c,d,f,g,_,p=i(54982),m=i(29694),v=i(75778),y=i(54521),E=i(4490),b=i(20129),C=i(85297),Z=i(53389),k=(i(12212),i(26847),i(24819),i(81738),i(22960),i(6989),i(87799),i(24533),i(54480),i(1455),i(48694),i(67398),i(27530),i(73742)),w=i(59048),S=i(7616),Y=i(40596),B=i(39884),x=i(87639),I=i(72645),M=i(65829),U=(i(12942),i(6514)),G=(i(43109),i(84960)),L=e([U]);U=(L.then?(await L)():L)[0];var z=function(e){function t(){var e;(0,y.Z)(this,t);for(var i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];return(e=(0,b.Z)(this,t,[].concat(n)))._guiMode=!0,e._yamlError=!1,e._loading=!1,e._loadCount=0,e._debounceYamlError=(0,x.D)(function(){e._pendingYamlError&&(e._yamlError=!0,e._errors=[e._pendingYamlError],e._pendingYamlError=void 0,e._setConfig())},2e3),e}return(0,C.Z)(t,e),(0,E.Z)(t,[{key:"value",get:function(){return this._config},set:function(e){this._config&&(0,M.v)(e,this._config)||(this._config=e,this._errors=void 0,this._setConfig())}},{key:"_setConfig",value:function(){var e=this;if(!this._errors)try{this._updateConfigElement()}catch(t){this._errors=[t.message]}this.updateComplete.then(function(){var t;(0,B.B)(e,"config-changed",{config:e.value,error:null===(t=e._errors)||void 0===t?void 0:t.join(", "),guiModeAvailable:!(e.hasWarning||e.hasError||!1===e._guiSupported)})})}},{key:"hasWarning",get:function(){return void 0!==this._warnings&&this._warnings.length>0}},{key:"hasError",get:function(){return void 0!==this._errors&&this._errors.length>0}},{key:"GUImode",get:function(){return this._guiMode},set:function(e){var t=this;this._guiMode=e,this.updateComplete.then(function(){(0,B.B)(t,"GUImode-changed",{guiMode:e,guiModeAvailable:!(t.hasWarning||t.hasError||!1===t._guiSupported)})})}},{key:"toggleMode",value:function(){this.GUImode=!this.GUImode}},{key:"focusYamlEditor",value:function(){var e;null!==(e=this._configElement)&&void 0!==e&&e.focusYamlEditor&&this._configElement.focusYamlEditor(),this._yamlEditor&&this._yamlEditor.focus()}},{key:"getConfigElement",value:(L=(0,v.Z)((0,m.Z)().m(function e(){return(0,m.Z)().w(function(e){for(;;)if(0===e.n)return e.a(2,void 0)},e)})),function(){return L.apply(this,arguments)})},{key:"getConfigForm",value:(U=(0,v.Z)((0,m.Z)().m(function e(){return(0,m.Z)().w(function(e){for(;;)if(0===e.n)return e.a(2,void 0)},e)})),function(){return U.apply(this,arguments)})},{key:"renderConfigElement",value:function(){return(0,w.dy)(o||(o=(0,p.Z)(["",""])),this._configElement)}},{key:"_renderSubElement",value:function(){return(0,w.dy)(r||(r=(0,p.Z)([' <hui-sub-element-editor .hass="','" .config="','" @go-back="','" @config-changed="','"> </hui-sub-element-editor> '])),this.hass,this._subElementEditorConfig,this._goBack,this._subElementChanged)}},{key:"_subElementChanged",value:function(e){var t,i;e.stopPropagation();var n=e.detail.config;this._subElementEditorConfig=Object.assign(Object.assign({},this._subElementEditorConfig),{},{elementConfig:n}),null===(t=(i=this._subElementEditorConfig).saveElementConfig)||void 0===t||t.call(i,n)}},{key:"_goBack",value:function(e){e.stopPropagation(),this._subElementEditorConfig=void 0}},{key:"_editSubElement",value:(S=(0,v.Z)((0,m.Z)().m(function e(t){return(0,m.Z)().w(function(e){for(;;)switch(e.n){case 0:return t.stopPropagation(),e.n=1,Promise.all([i.e("15486"),i.e("98831"),i.e("99028"),i.e("7850"),i.e("21351"),i.e("57530"),i.e("35859"),i.e("39432"),i.e("96910"),i.e("93006"),i.e("87267"),i.e("27195"),i.e("61617"),i.e("16367"),i.e("40100"),i.e("75663"),i.e("70970"),i.e("14525"),i.e("9048"),i.e("37745"),i.e("13975"),i.e("66136"),i.e("96438"),i.e("43828")]).then(i.bind(i,52558));case 1:this._subElementEditorConfig={type:t.detail.type,elementConfig:t.detail.config,context:t.detail.context,saveElementConfig:t.detail.saveConfig};case 2:return e.a(2)}},e,this)})),function(e){return S.apply(this,arguments)})},{key:"render",value:function(){return(0,w.dy)(a||(a=(0,p.Z)([' <div class="wrapper"> '," "," "," "," </div> "])),this.GUImode?(0,w.dy)(s||(s=(0,p.Z)([' <div class="gui-editor" @edit-sub-element="','"> '," </div> "])),this._editSubElement,this._loading?(0,w.dy)(l||(l=(0,p.Z)([' <ha-spinner class="center margin-bot"></ha-spinner> ']))):(0,Y.F)(this._subElementEditorConfig?this._renderSubElement():this.renderConfigElement())):(0,w.dy)(u||(u=(0,p.Z)([' <div class="yaml-editor"> <ha-yaml-editor .defaultValue="','" autofocus .hass="','" @value-changed="','" @blur="','" @keydown="','" dir="ltr" .showErrors="','"></ha-yaml-editor> </div> '])),this._config,this.hass,this._handleYAMLChanged,this._onBlurYaml,this._ignoreKeydown,!1),!1===this._guiSupported&&!1===this._loading?(0,w.dy)(h||(h=(0,p.Z)([' <ha-alert alert-type="info" .title="','"> '," <br> "," </ha-alert> "])),this.hass.localize("ui.errors.config.visual_editor_not_supported"),this.hass.localize("ui.errors.config.visual_editor_not_supported_reason_type"),this.hass.localize("ui.errors.config.edit_in_yaml_supported")):w.Ld,this.hasError?(0,w.dy)(c||(c=(0,p.Z)([' <ha-alert alert-type="error" .title="','"> <ul> '," </ul> </ha-alert> "])),this.hass.localize("ui.errors.config.configuration_error"),this._errors.map(function(e){return(0,w.dy)(d||(d=(0,p.Z)(["<li>","</li>"])),e)})):w.Ld,this.hasWarning?(0,w.dy)(f||(f=(0,p.Z)([' <ha-alert alert-type="warning" .title="','"> <ul> '," </ul> "," </ha-alert> "])),this.hass.localize("ui.errors.config.visual_editor_not_supported"),this._warnings.map(function(e){return(0,w.dy)(g||(g=(0,p.Z)(["<li>","</li>"])),e)}),this.hass.localize("ui.errors.config.edit_in_yaml_supported")):w.Ld)}},{key:"updated",value:function(e){(0,Z.Z)(t,"updated",this,3)([e]),this._configElement&&e.has("hass")&&(this._configElement.hass=this.hass),this._configElement&&"lovelace"in this._configElement&&e.has("lovelace")&&(this._configElement.lovelace=this.lovelace),this._configElement&&e.has("context")&&(this._configElement.context=this.context)}},{key:"_handleUIConfigChanged",value:function(e){if(e.stopPropagation(),this.GUImode){var t=e.detail.config;Object.keys(t).forEach(function(e){void 0===t[e]&&delete t[e]}),this.value=t}}},{key:"_handleYAMLChanged",value:function(e){e.stopPropagation();var t=e.detail.value;e.detail.isValid?(this._config=t,this._errors=void 0,this._pendingYamlError=void 0,this._yamlError=!1,this._debounceYamlError.cancel(),this._setConfig()):this._yamlError?this._errors=[e.detail.errorMsg]:(this._pendingYamlError=e.detail.errorMsg,this._debounceYamlError())}},{key:"_onBlurYaml",value:function(){this._debounceYamlError.cancel(),this._pendingYamlError&&(this._yamlError=!0,this._errors=[this._pendingYamlError],this._pendingYamlError=void 0,this._setConfig())}},{key:"unloadConfigElement",value:(k=(0,v.Z)((0,m.Z)().m(function e(){return(0,m.Z)().w(function(e){for(;;)switch(e.n){case 0:this._configElement=void 0,this._guiSupported=void 0;case 1:return e.a(2)}},e,this)})),function(){return k.apply(this,arguments)})},{key:"loadConfigElement",value:(_=(0,v.Z)((0,m.Z)().m(function e(){var t,n,o,r,a,s,l=this;return(0,m.Z)().w(function(e){for(;;)switch(e.n){case 0:if(!this._configElement){e.n=1;break}return e.a(2);case 1:return e.n=2,this.getConfigElement();case 2:if(t=e.v){e.n=5;break}return e.n=3,this.getConfigForm();case 3:if(!(n=e.v)){e.n=5;break}return e.n=4,i.e("66122").then(i.bind(i,28733));case 4:t=document.createElement("hui-form-editor"),o=n.schema,r=n.assertConfig,a=n.computeLabel,s=n.computeHelper,t.schema=o,a&&(t.computeLabel=a),s&&(t.computeHelper=s),r&&(t.assertConfig=r);case 5:t?(t.hass=this.hass,"lovelace"in t&&(t.lovelace=this.lovelace),t.context=this.context,t.addEventListener("config-changed",function(e){return l._handleUIConfigChanged(e)}),this._guiSupported=!0):this._guiSupported=!1,this._configElement=t;case 6:return e.a(2)}},e,this)})),function(){return _.apply(this,arguments)})},{key:"_updateConfigElement",value:(n=(0,v.Z)((0,m.Z)().m(function e(){var t,i,n,o,r;return(0,m.Z)().w(function(e){for(;;)switch(e.n){case 0:if(this.value){e.n=1;break}return e.a(2);case 1:return t=++this._loadCount,e.p=2,this._errors=void 0,this._warnings=void 0,e.n=3,this.loadConfigElement();case 3:if(!this._configElement){e.n=7;break}e.p=4,this._configElement.setConfig(this.value),e.n=6;break;case 5:throw e.p=5,o=e.v,i=(0,I.p)(this.hass,o),new G.e("Config is not supported",i.warnings,i.errors);case 6:e.n=8;break;case 7:this._guiSupported=!1,this.GUImode=!1;case 8:e.n=11;break;case 9:if(e.p=9,r=e.v,t===this._loadCount){e.n=10;break}return e.a(2);case 10:r instanceof G.e?(this._warnings=null!==(n=r.warnings)&&void 0!==n?n:[r.message],this._errors=r.errors||void 0):this._errors=[r.message],this.GUImode=!1;case 11:return e.p=11,this._loading=!1,e.f(11);case 12:return e.a(2)}},e,this,[[4,5],[2,9,11,12]])})),function(){return n.apply(this,arguments)})},{key:"_ignoreKeydown",value:function(e){e.stopPropagation()}}]);var n,_,k,S,U,L}(w.oi);z.styles=(0,w.iv)(_||(_=(0,p.Z)([":host{display:flex}.wrapper{width:100%}.gui-editor,.yaml-editor{padding:8px 0px}ha-code-editor{--code-mirror-max-height:calc(100vh - 245px)}ha-spinner{display:block;margin:auto}"]))),(0,k.__decorate)([(0,S.Cb)({attribute:!1})],z.prototype,"hass",void 0),(0,k.__decorate)([(0,S.Cb)({attribute:!1})],z.prototype,"lovelace",void 0),(0,k.__decorate)([(0,S.Cb)({attribute:!1})],z.prototype,"context",void 0),(0,k.__decorate)([(0,S.SB)()],z.prototype,"_config",void 0),(0,k.__decorate)([(0,S.SB)()],z.prototype,"_configElement",void 0),(0,k.__decorate)([(0,S.SB)()],z.prototype,"_subElementEditorConfig",void 0),(0,k.__decorate)([(0,S.SB)()],z.prototype,"_guiMode",void 0),(0,k.__decorate)([(0,S.SB)()],z.prototype,"_errors",void 0),(0,k.__decorate)([(0,S.SB)()],z.prototype,"_pendingYamlError",void 0),(0,k.__decorate)([(0,S.SB)()],z.prototype,"_yamlError",void 0),(0,k.__decorate)([(0,S.SB)()],z.prototype,"_warnings",void 0),(0,k.__decorate)([(0,S.SB)()],z.prototype,"_guiSupported",void 0),(0,k.__decorate)([(0,S.SB)()],z.prototype,"_loading",void 0),(0,k.__decorate)([(0,S.IO)("ha-yaml-editor")],z.prototype,"_yamlEditor",void 0),n()}catch(P){n(P)}})},28450:function(e,t,i){i.a(e,async function(e,n){try{i.d(t,{k:function(){return _}});var o=i(29694),r=i(75778),a=i(54521),s=i(4490),l=i(20129),u=i(53389),h=i(85297),c=(i(40777),i(73742)),d=i(7616),f=i(89038),g=e([f]),_=function(e){function t(){return(0,a.Z)(this,t),(0,l.Z)(this,t,arguments)}return(0,h.Z)(t,e),(0,s.Z)(t,[{key:"configElementType",get:function(){return this.value?this.value.type:void 0}},{key:"loadConfigElement",value:(i=(0,r.Z)((0,o.Z)().m(function e(){return(0,o.Z)().w(function(e){for(;;)switch(e.n){case 0:if(this._configElementType===this.configElementType){e.n=2;break}if(this.unloadConfigElement(),this.configElementType){e.n=1;break}throw new Error(this.hass.localize("ui.errors.config.no_type_provided"));case 1:this._configElementType=this.configElementType;case 2:return e.a(2,(0,u.Z)(t,"loadConfigElement",this,3)([]))}},e,this)})),function(){return i.apply(this,arguments)})}]);var i}((f=(g.then?(await g)():g)[0]).O);(0,c.__decorate)([(0,d.SB)()],_.prototype,"_configElementType",void 0),n()}catch(p){n(p)}})}}]);
//# sourceMappingURL=92915.f36d95509348d96d.js.map