Metadata-Version: 2.4
Name: notsql
Version: 1.0.0
Summary: JSONãƒ™ãƒ¼ã‚¹ã®ç°¡æ˜“NoSQL DBï¼ˆãƒ•ã‚¡ã‚¤ãƒ«ä¿å­˜å‹ï¼‰
Home-page: https://github.com/tikipiya/notsql
Author: tikisan
Author-email: s2501082@sendai-nct.jp
Classifier: Development Status :: 5 - Production/Stable
Classifier: Intended Audience :: Developers
Classifier: License :: OSI Approved :: MIT License
Classifier: Operating System :: OS Independent
Classifier: Programming Language :: Python :: 3
Classifier: Programming Language :: Python :: 3.7
Classifier: Programming Language :: Python :: 3.8
Classifier: Programming Language :: Python :: 3.9
Classifier: Programming Language :: Python :: 3.10
Classifier: Programming Language :: Python :: 3.11
Classifier: Topic :: Database
Classifier: Topic :: Software Development :: Libraries :: Python Modules
Requires-Python: >=3.7
Description-Content-Type: text/markdown
Provides-Extra: dev
Requires-Dist: pytest>=6.0; extra == "dev"
Requires-Dist: pytest-cov>=2.0; extra == "dev"
Dynamic: author
Dynamic: author-email
Dynamic: classifier
Dynamic: description
Dynamic: description-content-type
Dynamic: home-page
Dynamic: provides-extra
Dynamic: requires-python
Dynamic: summary

# Notsql - JSONãƒ™ãƒ¼ã‚¹ã®ç°¡æ˜“NoSQL DB

**Notsql**ã¯ã€JSONãƒ•ã‚¡ã‚¤ãƒ«ãƒ™ãƒ¼ã‚¹ã®ç°¡æ˜“NoSQL ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§ã™ã€‚MongoDBãƒ©ã‚¤ã‚¯ãªæ§‹æ–‡ã‚’æä¾›ã—ã€ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ä¸è¦ã§å°è¦æ¨¡ãªã‚µãƒ¼ãƒ“ã‚¹ã‚„ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã«æœ€é©ã§ã™ã€‚

## ğŸš€ ç‰¹å¾´

- **ğŸ“ ãƒ•ã‚¡ã‚¤ãƒ«ãƒ™ãƒ¼ã‚¹**: JSONãƒ•ã‚¡ã‚¤ãƒ«ã«ã‚ˆã‚‹ãƒ‡ãƒ¼ã‚¿ä¿å­˜
- **ğŸ” Mongoãƒ©ã‚¤ã‚¯ãªæ§‹æ–‡**: ä½¿ã„æ…£ã‚ŒãŸMongoDBã®ã‚¯ã‚¨ãƒªæ§‹æ–‡
- **âš¡ ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ä¸è¦**: å¤–éƒ¨ä¾å­˜ãªã—
- **ğŸ” åŒæ™‚ã‚¢ã‚¯ã‚»ã‚¹å¯¾å¿œ**: ãƒ•ã‚¡ã‚¤ãƒ«ãƒ­ãƒƒã‚¯æ©Ÿèƒ½
- **ğŸ“Š ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹æ©Ÿèƒ½**: é«˜é€Ÿæ¤œç´¢ã®ãŸã‚ã®ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹
- **ğŸ¯ å°è¦æ¨¡ã‚µãƒ¼ãƒ“ã‚¹å‘ã‘**: è»½é‡ã§ç°¡å˜ã«å°å…¥å¯èƒ½

## ğŸ“¦ ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

```bash
pip install notsql
```

## ğŸ¯ åŸºæœ¬çš„ãªä½¿ã„æ–¹

### ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ¥ç¶š

```python
from notsql import NotsqlDB

# ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’ä½œæˆãƒ»æ¥ç¶š
db = NotsqlDB('myapp')

# ç‰¹å®šã®ãƒ‘ã‚¹ã‚’æŒ‡å®š
db = NotsqlDB('myapp', db_path='/path/to/data')
```

### ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³æ“ä½œ

```python
# ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã‚’å–å¾—
users = db.collection('users')
```

### æŒ¿å…¥æ“ä½œ

```python
# å˜ä¸€ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®æŒ¿å…¥
user_id = users.insert_one({
    'name': 'Alice',
    'age': 30,
    'email': 'alice@example.com'
})

# è¤‡æ•°ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®æŒ¿å…¥
user_ids = users.insert_many([
    {'name': 'Bob', 'age': 25},
    {'name': 'Charlie', 'age': 35}
])
```

### æ¤œç´¢æ“ä½œ

```python
# å˜ä¸€ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®æ¤œç´¢
user = users.find_one({'name': 'Alice'})

# å…¨ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®æ¤œç´¢
all_users = users.find()

# æ¡ä»¶ä»˜ãæ¤œç´¢
adults = users.find({'age': {'$gte': 18}})

# åˆ¶é™ã¨ã‚¹ã‚­ãƒƒãƒ—
recent_users = users.find({}, limit=10, skip=5)

# ã‚½ãƒ¼ãƒˆ
sorted_users = users.find({}, sort={'age': -1})  # é™é †
```

### æ›´æ–°æ“ä½œ

```python
# å˜ä¸€ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®æ›´æ–°
users.update_one(
    {'name': 'Alice'},
    {'$set': {'age': 31}}
)

# è¤‡æ•°ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®æ›´æ–°
users.update_many(
    {'age': {'$lt': 18}},
    {'$set': {'category': 'minor'}}
)
```

### å‰Šé™¤æ“ä½œ

```python
# å˜ä¸€ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®å‰Šé™¤
users.delete_one({'name': 'Alice'})

# è¤‡æ•°ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®å‰Šé™¤
users.delete_many({'age': {'$lt': 18}})
```

## ğŸ” ã‚¯ã‚¨ãƒªã‚ªãƒšãƒ¬ãƒ¼ã‚¿ãƒ¼

### æ¯”è¼ƒã‚ªãƒšãƒ¬ãƒ¼ã‚¿ãƒ¼

```python
# ç­‰ä¾¡
users.find({'age': 30})
users.find({'age': {'$eq': 30}})

# ä¸ç­‰ä¾¡
users.find({'age': {'$ne': 30}})

# å¤§ãªã‚Šãƒ»å°ãªã‚Š
users.find({'age': {'$gt': 25}})    # >
users.find({'age': {'$gte': 25}})   # >=
users.find({'age': {'$lt': 35}})    # <
users.find({'age': {'$lte': 35}})   # <=

# ç¯„å›²
users.find({'age': {'$in': [25, 30, 35]}})
users.find({'age': {'$nin': [25, 30, 35]}})
```

### è«–ç†ã‚ªãƒšãƒ¬ãƒ¼ã‚¿ãƒ¼

```python
# AND
users.find({'$and': [
    {'age': {'$gte': 25}},
    {'age': {'$lte': 35}}
]})

# OR
users.find({'$or': [
    {'age': {'$lt': 25}},
    {'age': {'$gt': 35}}
]})

# NOT
users.find({'$not': {'age': {'$gte': 18}}})
```

### é…åˆ—ã‚ªãƒšãƒ¬ãƒ¼ã‚¿ãƒ¼

```python
# é…åˆ—å†…ã®è¦ç´ ã‚’æ¤œç´¢
users.find({'tags': {'$in': ['python', 'javascript']}})

# é…åˆ—ã®ã‚µã‚¤ã‚º
users.find({'tags': {'$size': 3}})

# é…åˆ—ã®å…¨è¦ç´ ãŒãƒãƒƒãƒ
users.find({'tags': {'$all': ['python', 'programming']}})

# é…åˆ—å†…ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãƒãƒƒãƒ
users.find({'scores': {'$elemMatch': {'subject': 'math', 'score': {'$gte': 80}}}})
```

### æ–‡å­—åˆ—ã‚ªãƒšãƒ¬ãƒ¼ã‚¿ãƒ¼

```python
# æ­£è¦è¡¨ç¾
users.find({'name': {'$regex': r'^A.*'}})

# å¤§æ–‡å­—å°æ–‡å­—ã‚’ç„¡è¦–
users.find({'name': {'$regex': r'^alice', '$options': 'i'}})
```

### å­˜åœ¨ãƒã‚§ãƒƒã‚¯

```python
# ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®å­˜åœ¨
users.find({'email': {'$exists': True}})

# å‹ãƒã‚§ãƒƒã‚¯
users.find({'age': {'$type': 'int'}})
```

## ğŸ¯ æ›´æ–°ã‚ªãƒšãƒ¬ãƒ¼ã‚¿ãƒ¼

```python
# å€¤ã®è¨­å®š
users.update_one({'name': 'Alice'}, {'$set': {'age': 31}})

# å€¤ã®å‰Šé™¤
users.update_one({'name': 'Alice'}, {'$unset': {'age': 1}})

# æ•°å€¤ã®å¢—æ¸›
users.update_one({'name': 'Alice'}, {'$inc': {'age': 1}})

# é…åˆ—ã¸ã®è¿½åŠ 
users.update_one({'name': 'Alice'}, {'$push': {'tags': 'new_tag'}})

# é…åˆ—ã‹ã‚‰å‰Šé™¤
users.update_one({'name': 'Alice'}, {'$pull': {'tags': 'old_tag'}})

# é…åˆ—ã¸ã®é‡è¤‡ãªã—è¿½åŠ 
users.update_one({'name': 'Alice'}, {'$addToSet': {'tags': 'unique_tag'}})
```

## ğŸ“Š ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹æ©Ÿèƒ½

```python
# ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã®ä½œæˆ
users.create_index('email')

# ãƒ¦ãƒ‹ãƒ¼ã‚¯ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹
users.create_index('email', unique=True)

# ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã®å‰Šé™¤
users.drop_index('email')

# ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ä¸€è¦§
indexes = users.list_indexes()
```

## ğŸ—‚ï¸ ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ç®¡ç†

```python
# ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ä¸€è¦§
collections = db.list_collections()

# ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã®å‰Šé™¤
db.drop_collection('users')

# ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®å‰Šé™¤
db.drop_database()

# çµ±è¨ˆæƒ…å ±
stats = db.get_stats()
```

## ğŸ¨ å®Ÿç”¨ä¾‹

### ãƒ–ãƒ­ã‚°ã‚·ã‚¹ãƒ†ãƒ 

```python
from notsql import NotsqlDB

# ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ¥ç¶š
db = NotsqlDB('blog')

# ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ä½œæˆ
users = db.collection('users')
posts = db.collection('posts')
comments = db.collection('comments')

# ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ä½œæˆ
users.create_index('email', unique=True)
posts.create_index('author_id')
comments.create_index('post_id')

# ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½œæˆ
user_id = users.insert_one({
    'name': 'Alice',
    'email': 'alice@example.com',
    'role': 'author'
})

# æŠ•ç¨¿ä½œæˆ
post_id = posts.insert_one({
    'title': 'Pythonå…¥é–€',
    'content': 'Pythonã®åŸºæœ¬çš„ãªä½¿ã„æ–¹ã«ã¤ã„ã¦',
    'author_id': user_id,
    'tags': ['python', 'programming'],
    'status': 'published'
})

# ã‚³ãƒ¡ãƒ³ãƒˆä½œæˆ
comments.insert_one({
    'post_id': post_id,
    'author_id': user_id,
    'content': 'ã¨ã¦ã‚‚å‚è€ƒã«ãªã‚Šã¾ã—ãŸï¼'
})

# æ¤œç´¢
published_posts = posts.find({'status': 'published'})
python_posts = posts.find({'tags': {'$in': ['python']}})
```

### ECã‚µã‚¤ãƒˆ

```python
# å•†å“ç®¡ç†
products = db.collection('products')
orders = db.collection('orders')

# å•†å“ãƒ‡ãƒ¼ã‚¿
products.insert_many([
    {
        'name': 'ãƒãƒ¼ãƒˆPC',
        'category': 'electronics',
        'price': 80000,
        'stock': 10
    },
    {
        'name': 'ãƒã‚¦ã‚¹',
        'category': 'electronics',
        'price': 2000,
        'stock': 50
    }
])

# ä¾¡æ ¼å¸¯ã§ã®æ¤œç´¢
affordable_products = products.find({'price': {'$lte': 50000}})

# åœ¨åº«ã®ã‚ã‚‹å•†å“
in_stock = products.find({'stock': {'$gt': 0}})
```

## ğŸ”§ è¨­å®šã¨ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹

### ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒ‘ã‚¹

```python
# ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: ./data/database_name/
db = NotsqlDB('myapp')

# ã‚«ã‚¹ã‚¿ãƒ ãƒ‘ã‚¹
db = NotsqlDB('myapp', db_path='/custom/path')
```

### ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã®æ´»ç”¨

```python
# ã‚ˆãæ¤œç´¢ã•ã‚Œã‚‹ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã«ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚’ä½œæˆ
users.create_index('email')
users.create_index('created_at')

# è¤‡åˆçš„ãªæ¤œç´¢ãƒ‘ã‚¿ãƒ¼ãƒ³ã®å ´åˆ
products.create_index('category')
products.create_index('price')
```

## ğŸš¨ åˆ¶é™äº‹é …

1. **ãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚º**: å¤§é‡ã®ãƒ‡ãƒ¼ã‚¿ã«ã¯é©ã•ãªã„
2. **åŒæ™‚ã‚¢ã‚¯ã‚»ã‚¹**: é«˜è² è·ãªåŒæ™‚ã‚¢ã‚¯ã‚»ã‚¹ã«ã¯åˆ¶é™ãŒã‚ã‚‹
3. **ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³**: ACIDç‰¹æ€§ã¯ä¿è¨¼ã•ã‚Œãªã„
4. **ã‚¯ã‚¨ãƒªãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹**: è¤‡é›‘ãªã‚¯ã‚¨ãƒªã¯æ€§èƒ½ã«å½±éŸ¿ã™ã‚‹

## ğŸ¤ ä½¿ç”¨ä¾‹ã¨ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹

### é©åˆ‡ãªä½¿ç”¨ä¾‹

- è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã®ç®¡ç†
- å°è¦æ¨¡ãªWebã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³
- ãƒ—ãƒ­ãƒˆã‚¿ã‚¤ãƒ—é–‹ç™º
- ãƒ­ãƒ¼ã‚«ãƒ«ãƒ‡ãƒ¼ã‚¿ã®ä¿å­˜
- ãƒ†ã‚¹ãƒˆç’°å¢ƒã§ã®ãƒ‡ãƒ¼ã‚¿ç®¡ç†

### æ¨å¥¨äº‹é …

1. **ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹æˆ¦ç•¥**: ã‚ˆãæ¤œç´¢ã•ã‚Œã‚‹ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã«ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚’ä½œæˆ
2. **ãƒ‡ãƒ¼ã‚¿æ§‹é€ **: ãƒã‚¹ãƒˆã‚’é©åº¦ã«ä¿ã¤
3. **ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—**: å®šæœŸçš„ãªãƒ‡ãƒ¼ã‚¿ãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—
4. **ç›£è¦–**: ãƒ‡ãƒ¼ã‚¿ãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚ºã®ç›£è¦–

## ğŸ“š API ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹

### NotsqlDB ã‚¯ãƒ©ã‚¹

```python
class NotsqlDB:
    def __init__(self, db_name: str, db_path: str = None)
    def collection(self, name: str) -> Collection
    def list_collections(self) -> List[str]
    def drop_collection(self, name: str) -> bool
    def drop_database(self)
    def get_stats(self) -> Dict[str, Any]
```

### Collection ã‚¯ãƒ©ã‚¹

```python
class Collection:
    def insert_one(self, document: Dict[str, Any]) -> str
    def insert_many(self, documents: List[Dict[str, Any]]) -> List[str]
    def find_one(self, query: Dict[str, Any] = None) -> Optional[Dict[str, Any]]
    def find(self, query: Dict[str, Any] = None, limit: int = None, 
             skip: int = 0, sort: Dict[str, int] = None) -> List[Dict[str, Any]]
    def update_one(self, query: Dict[str, Any], update: Dict[str, Any]) -> bool
    def update_many(self, query: Dict[str, Any], update: Dict[str, Any]) -> int
    def delete_one(self, query: Dict[str, Any]) -> bool
    def delete_many(self, query: Dict[str, Any]) -> int
    def count_documents(self, query: Dict[str, Any] = None) -> int
    def create_index(self, field_name: str, unique: bool = False) -> bool
    def drop_index(self, field_name: str) -> bool
    def list_indexes(self) -> List[str]
    def drop(self)
```

## ğŸ“ ãƒ©ã‚¤ã‚»ãƒ³ã‚¹

MIT License
