"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([["70540"],{67101:function(e,t,i){var a=i(73742),n=i(59048),o=i(7616);let s,r,l=e=>e;class c extends n.oi{render(){return(0,n.dy)(s||(s=l` <header class="header"> <div class="header-bar"> <section class="header-navigation-icon"> <slot name="navigationIcon"></slot> </section> <section class="header-content"> <div class="header-title"> <slot name="title"></slot> </div> <div class="header-subtitle"> <slot name="subtitle"></slot> </div> </section> <section class="header-action-items"> <slot name="actionItems"></slot> </section> </div> <slot></slot> </header> `))}static get styles(){return[(0,n.iv)(r||(r=l`:host{display:block}:host([show-border]){border-bottom:1px solid var(--mdc-dialog-scroll-divider-color,rgba(0,0,0,.12))}.header-bar{display:flex;flex-direction:row;align-items:flex-start;padding:4px;box-sizing:border-box}.header-content{flex:1;padding:10px 4px;min-width:0;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.header-title{font-size:var(--ha-font-size-xl);line-height:var(--ha-line-height-condensed);font-weight:var(--ha-font-weight-normal)}.header-subtitle{font-size:var(--ha-font-size-m);line-height:20px;color:var(--secondary-text-color)}@media all and (min-width:450px) and (min-height:500px){.header-bar{padding:12px}}.header-navigation-icon{flex:none;min-width:8px;height:100%;display:flex;flex-direction:row}.header-action-items{flex:none;min-width:8px;height:100%;display:flex;flex-direction:row}`))]}}c=(0,a.__decorate)([(0,o.Mo)("ha-dialog-header")],c)},83378:function(e,t,i){i.d(t,{i:function(){return v}});i(26847),i(27530),i(44776);var a=i(73742),n=i(24004),o=i(75907),s=i(59048),r=i(7616);i(12066),i(48017);let l,c,d,h=e=>e;const u=["button","ha-list-item"],v=(e,t)=>{var i;return(0,s.dy)(l||(l=h` <div class="header_title"> <ha-icon-button .label="${0}" .path="${0}" dialogAction="close" class="header_button"></ha-icon-button> <span>${0}</span> </div> `),null!==(i=null==e?void 0:e.localize("ui.common.close"))&&void 0!==i?i:"Close","M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z",t)};class p extends n.M{scrollToPos(e,t){var i;null===(i=this.contentElement)||void 0===i||i.scrollTo(e,t)}renderHeading(){return(0,s.dy)(c||(c=h`<slot name="heading"> ${0} </slot>`),super.renderHeading())}firstUpdated(){var e;super.firstUpdated(),this.suppressDefaultPressSelector=[this.suppressDefaultPressSelector,u].join(", "),this._updateScrolledAttribute(),null===(e=this.contentElement)||void 0===e||e.addEventListener("scroll",this._onScroll,{passive:!0})}disconnectedCallback(){super.disconnectedCallback(),this.contentElement.removeEventListener("scroll",this._onScroll)}_updateScrolledAttribute(){this.contentElement&&this.toggleAttribute("scrolled",0!==this.contentElement.scrollTop)}constructor(...e){super(...e),this._onScroll=()=>{this._updateScrolledAttribute()}}}p.styles=[o.W,(0,s.iv)(d||(d=h`:host([scrolled]) ::slotted(ha-dialog-header){border-bottom:1px solid var(--mdc-dialog-scroll-divider-color,rgba(0,0,0,.12))}.mdc-dialog{--mdc-dialog-scroll-divider-color:var(
          --dialog-scroll-divider-color,
          var(--divider-color)
        );z-index:var(--dialog-z-index,8);-webkit-backdrop-filter:var(--ha-dialog-scrim-backdrop-filter,var(--dialog-backdrop-filter,none));backdrop-filter:var(--ha-dialog-scrim-backdrop-filter,var(--dialog-backdrop-filter,none));--mdc-dialog-box-shadow:var(--dialog-box-shadow, none);--mdc-typography-headline6-font-weight:var(--ha-font-weight-normal);--mdc-typography-headline6-font-size:1.574rem}.mdc-dialog__actions{justify-content:var(--justify-action-buttons,flex-end);padding:12px 24px max(var(--safe-area-inset-bottom),12px) 24px}.mdc-dialog__actions span:first-child{flex:var(--secondary-action-button-flex,unset)}.mdc-dialog__actions span:nth-child(2){flex:var(--primary-action-button-flex,unset)}.mdc-dialog__container{align-items:var(--vertical-align-dialog,center)}.mdc-dialog__title{padding:24px 24px 0 24px}.mdc-dialog__title:has(span){padding:12px 12px 0}.mdc-dialog__title::before{content:unset}.mdc-dialog .mdc-dialog__content{position:var(--dialog-content-position,relative);padding:var(--dialog-content-padding,24px)}:host([hideactions]) .mdc-dialog .mdc-dialog__content{padding-bottom:max(var(--dialog-content-padding,24px),var(--safe-area-inset-bottom))}.mdc-dialog .mdc-dialog__surface{position:var(--dialog-surface-position,relative);top:var(--dialog-surface-top);margin-top:var(--dialog-surface-margin-top);min-height:var(--mdc-dialog-min-height,auto);border-radius:var(--ha-dialog-border-radius,28px);-webkit-backdrop-filter:var(--ha-dialog-surface-backdrop-filter,none);backdrop-filter:var(--ha-dialog-surface-backdrop-filter,none);background:var(--ha-dialog-surface-background,var(--mdc-theme-surface,#fff))}:host([flexContent]) .mdc-dialog .mdc-dialog__content{display:flex;flex-direction:column}.header_title{display:flex;align-items:center;direction:var(--direction)}.header_title span{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;display:block;padding-left:4px}.header_button{text-decoration:none;color:inherit;inset-inline-start:initial;inset-inline-end:-12px;direction:var(--direction)}.dialog-actions{inset-inline-start:initial!important;inset-inline-end:0px!important;direction:var(--direction)}`))],p=(0,a.__decorate)([(0,r.Mo)("ha-dialog")],p)},41963:function(e,t,i){i.a(e,async function(e,t){try{var a,n,o,s=i(29694),r=i(75778),l=i(54982),c=i(54521),d=i(4490),h=i(20129),u=i(85297),v=(i(12212),i(26847),i(13571),i(87799),i(54480),i(56303),i(48694),i(52530),i(27530),i(73742)),p=i(59048),g=i(7616),_=i(88245),f=i(39884),m=i(55228),b=(i(48017),i(21409),e([m]));m=(b.then?(await b)():b)[0];var y=function(e){function t(){var e;(0,c.Z)(this,t);for(var i=arguments.length,a=new Array(i),n=0;n<i;n++)a[n]=arguments[n];return(e=(0,h.Z)(this,t,[].concat(a)))._entityKeys=new WeakMap,e}return(0,u.Z)(t,e),(0,d.Z)(t,[{key:"_getKey",value:function(e){return this._entityKeys.has(e)||this._entityKeys.set(e,Math.random().toString()),this._entityKeys.get(e)}},{key:"render",value:function(){var e=this;return this.entities?(0,p.dy)(a||(a=(0,l.Z)([" <h3> ",' </h3> <ha-sortable handle-selector=".handle" @item-moved="','"> <div class="entities"> ',' </div> </ha-sortable> <ha-entity-picker class="add-entity" .hass="','" .entityFilter="','" @value-changed="','"></ha-entity-picker> '])),this.label||this.hass.localize("ui.panel.lovelace.editor.card.generic.entities")+" ("+this.hass.localize("ui.panel.lovelace.editor.card.config.required")+")",this._entityMoved,(0,_.r)(this.entities,function(t){return e._getKey(t)},function(t,i){return(0,p.dy)(n||(n=(0,l.Z)([' <div class="entity" data-entity-id="','"> <div class="handle"> <ha-svg-icon .path="','"></ha-svg-icon> </div> <ha-entity-picker .hass="','" .value="','" .index="','" .entityFilter="','" @value-changed="','" allow-custom-entity></ha-entity-picker> </div> '])),t.entity,"M7,19V17H9V19H7M11,19V17H13V19H11M15,19V17H17V19H15M7,15V13H9V15H7M11,15V13H13V15H11M15,15V13H17V15H15M7,11V9H9V11H7M11,11V9H13V11H11M15,11V9H17V11H15M7,7V5H9V7H7M11,7V5H13V7H11M15,7V5H17V7H15Z",e.hass,t.entity,i,e.entityFilter,e._valueChanged)}),this.hass,this.entityFilter,this._addEntity):p.Ld}},{key:"_addEntity",value:(i=(0,r.Z)((0,s.Z)().m(function e(t){var i,a;return(0,s.Z)().w(function(e){for(;;)switch(e.n){case 0:if(""!==(i=t.detail.value)){e.n=1;break}return e.a(2);case 1:a=this.entities.concat({entity:i}),t.target.value="",(0,f.B)(this,"entities-changed",{entities:a});case 2:return e.a(2)}},e,this)})),function(e){return i.apply(this,arguments)})},{key:"_entityMoved",value:function(e){e.stopPropagation();var t=e.detail,i=t.oldIndex,a=t.newIndex,n=this.entities.concat();n.splice(a,0,n.splice(i,1)[0]),(0,f.B)(this,"entities-changed",{entities:n})}},{key:"_valueChanged",value:function(e){var t=e.detail.value,i=e.target.index,a=this.entities.concat();""===t||void 0===t?a.splice(i,1):a[i]=Object.assign(Object.assign({},a[i]),{},{entity:t}),(0,f.B)(this,"entities-changed",{entities:a})}}]);var i}(p.oi);y.styles=(0,p.iv)(o||(o=(0,l.Z)(["ha-entity-picker{margin-top:8px}.add-entity{display:block;margin-left:31px;margin-inline-start:31px;margin-inline-end:initial;direction:var(--direction)}.entity{display:flex;align-items:center}.entity .handle{padding-right:8px;cursor:move;cursor:grab;padding-inline-end:8px;padding-inline-start:initial;direction:var(--direction)}.entity .handle>*{pointer-events:none}.entity ha-entity-picker{flex-grow:1}"]))),(0,v.__decorate)([(0,g.Cb)({attribute:!1})],y.prototype,"hass",void 0),(0,v.__decorate)([(0,g.Cb)({attribute:!1})],y.prototype,"entities",void 0),(0,v.__decorate)([(0,g.Cb)({attribute:!1})],y.prototype,"entityFilter",void 0),(0,v.__decorate)([(0,g.Cb)()],y.prototype,"label",void 0),y=(0,v.__decorate)([(0,g.Mo)("hui-entity-editor")],y),t()}catch(w){t(w)}})},40958:function(e,t,i){i.d(t,{e:function(){return n}});i(26847),i(54480),i(1455),i(48694),i(27530);var a=i(39884),n=function(e,t){(0,a.B)(e,"show-dialog",{dialogTag:"hui-dialog-select-dashboard",dialogImport:function(){return Promise.all([i.e("79576"),i.e("71353"),i.e("5055"),i.e("35582"),i.e("29969")]).then(i.bind(i,40181))},dialogParams:t})}},90513:function(e,t,i){i.a(e,async function(e,a){try{i.r(t),i.d(t,{HuiDialogEditView:function(){return Y}});var n,o,s,r,l,c,d,h,u,v,p,g,_=i(54982),f=i(33850),m=i(29694),b=i(10354),y=i(75778),w=i(54521),k=i(4490),x=i(67063),Z=i(20129),z=i(85297),C=(i(12212),i(24819),i(21700),i(87799),i(54480),i(64455),i(6202),i(73742)),L=i(59048),V=i(7616),M=i(31733),H=i(39884),T=i(98921),A=i(67050),S=i(65829),D=(i(12942),i(72953),i(83378),i(67101),i(69760),i(6514)),B=(i(43109),i(25151)),I=i(52802),O=i(72242),j=i(95814),P=i(41963),E=i(71764),U=i(82033),K=i(30889),N=i(20434),F=i(40958),$=(i(91730),i(47861),i(54545),i(9036)),W=e([D,P,$]);[D,P,$]=W.then?(await W)():W;var q=["strategy"],J=["tab-settings","tab-background","tab-visibility"],Y=function(e){function t(){var e;(0,w.Z)(this,t);for(var i=arguments.length,a=new Array(i),n=0;n<i;n++)a[n]=arguments[n];return(e=(0,Z.Z)(this,t,[].concat(a)))._saving=!1,e._currTab=J[0],e._dirty=!1,e._yamlMode=!1,e._currentType=(0,K.W)(),e._moveViewToDashboard=function(){var t=(0,y.Z)((0,m.Z)().m(function t(i){var a,n,o,s,r,l,c,d,h,u,v,p;return(0,m.Z)().w(function(t){for(;;)switch(t.n){case 0:return t.p=0,t.n=1,(0,B.Q2)(e.hass.connection,i,!1);case 1:n=t.v,t.n=3;break;case 2:t.p=2,u=t.v,a=e.hass.localize("ui.panel.lovelace.editor.select_dashboard.get_config_failed"),console.error(u);case 3:if(n&&(0,B.Tx)(n)&&(a=e.hass.localize("ui.panel.lovelace.editor.select_dashboard.cannot_move_to_strategy")),a){t.n=11;break}return s=(0,N.K_)(e.hass,e._lovelace.config,n,e._params.viewIndex),r=(0,b.Z)(s,2),l=r[0],c=r[1],d=e._lovelace.config,h=n,o=function(){var t=(0,y.Z)((0,m.Z)().m(function t(){return(0,m.Z)().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,(0,B.Oh)(e.hass,i,h);case 1:return t.n=2,e._lovelace.saveConfig(d);case 2:return t.a(2)}},t)}));return function(){return t.apply(this,arguments)}}(),t.p=4,t.n=5,e._lovelace.saveConfig(l);case 5:return t.n=6,(0,B.Oh)(e.hass,i,c);case 6:t.n=11;break;case 7:return t.p=7,v=t.v,console.error(v),t.p=8,t.n=9,o();case 9:a=e.hass.localize("ui.panel.lovelace.editor.select_dashboard.move_failed"),t.n=11;break;case 10:t.p=10,p=t.v,console.error(p),a=e.hass.localize("ui.panel.lovelace.editor.select_dashboard.revert_failed");case 11:a?(0,O.showAlertDialog)((0,x.Z)(e),{text:a}):(e._lovelace.showToast({message:e.hass.localize("ui.panel.lovelace.editor.select_dashboard.success"),duration:4e3,action:{action:o,text:e.hass.localize("ui.common.undo")}}),e.closeDialog(),(0,A.c)("/".concat(window.location.pathname.split("/")[1])));case 12:return t.a(2)}},t,null,[[8,10],[4,7],[0,2]])}));return function(e){return t.apply(this,arguments)}}(),e}return(0,z.Z)(t,e),(0,k.Z)(t,[{key:"_type",get:function(){return(0,K.W)(this._config)}},{key:"updated",value:function(e){if(this._yamlMode&&e.has("_yamlMode")){var t,i=Object.assign({},this._config);null===(t=this._editor)||void 0===t||t.setValue(i)}}},{key:"showDialog",value:function(e){if(this._params=e,void 0===this._params.viewIndex)return this._config={type:E.zh},void(this._dirty=!1);this._lovelace=this._params.lovelace;var t=this._lovelace.config.views[this._params.viewIndex];if((0,I.s)(t)){t.strategy;var i=(0,f.Z)(t,q);this._config=i}else this._config=t,this._currentType=this._type}},{key:"closeDialog",value:function(){this._params=void 0,this._config={},this._yamlMode=!1,this._dirty=!1,this._currTab=J[0],(0,H.B)(this,"dialog-closed",{dialog:this.localName})}},{key:"_viewConfigTitle",get:function(){return this._config&&this._config.title?this.hass.localize("ui.panel.lovelace.editor.edit_view.header_name",{name:this._config.title}):this.hass.localize("ui.panel.lovelace.editor.edit_view.header")}},{key:"render",value:function(){var e,t,i,a=this;if(!this._params)return L.Ld;if(this._yamlMode)i=(0,L.dy)(n||(n=(0,_.Z)([' <ha-yaml-editor .hass="','" dialogInitialFocus @value-changed="','"></ha-yaml-editor> '])),this.hass,this._viewYamlChanged);else switch(this._currTab){case"tab-settings":i=(0,L.dy)(o||(o=(0,_.Z)([' <hui-view-editor .isNew="','" .hass="','" .config="','" @view-config-changed="','"></hui-view-editor> '])),void 0===this._params.viewIndex,this.hass,this._config,this._viewConfigChanged);break;case"tab-background":i=(0,L.dy)(s||(s=(0,_.Z)([' <hui-view-background-editor .hass="','" .config="','" @view-config-changed="','"></hui-view-background-editor> '])),this.hass,this._config,this._viewConfigChanged);break;case"tab-visibility":i=(0,L.dy)(r||(r=(0,_.Z)([' <hui-view-visibility-editor .hass="','" .config="','" @view-visibility-changed="','"></hui-view-visibility-editor> '])),this.hass,this._config,this._viewVisibilityChanged)}var g=this._type===E.zh&&this._currentType!==E.zh&&(null===(e=this._config)||void 0===e||null===(e=e.cards)||void 0===e?void 0:e.length),f=this._type!==E.zh&&this._currentType===E.zh&&(null===(t=this._config)||void 0===t||null===(t=t.sections)||void 0===t?void 0:t.length);return(0,L.dy)(l||(l=(0,_.Z)([' <ha-dialog open scrimClickAction escapeKeyAction @closed="','" .heading="','" class="','"> <ha-dialog-header show-border slot="heading"> <ha-icon-button slot="navigationIcon" dialogAction="cancel" .label="','" .path="','"></ha-icon-button> <h2 slot="title">','</h2> <ha-button-menu slot="actionItems" fixed corner="BOTTOM_END" menu-corner="END" @action="','" @closed="','"> <ha-icon-button slot="trigger" .label="','" .path="','"></ha-icon-button> <ha-list-item graphic="icon"> ',' <ha-svg-icon slot="graphic" .path="','"></ha-svg-icon> </ha-list-item> <ha-list-item graphic="icon"> ',' <ha-svg-icon slot="graphic" .path="','"></ha-svg-icon> </ha-list-item> </ha-button-menu> '," "," "," </ha-dialog-header> "," ",' <ha-button class="save" slot="primaryAction" ?disabled="','" @click="','"> '," ","</ha-button> </ha-dialog> "])),this.closeDialog,this._viewConfigTitle,(0,M.$)({"yaml-mode":this._yamlMode}),this.hass.localize("ui.common.close"),"M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z",this._viewConfigTitle,this._handleAction,T.U,this.hass.localize("ui.common.menu"),"M12,16A2,2 0 0,1 14,18A2,2 0 0,1 12,20A2,2 0 0,1 10,18A2,2 0 0,1 12,16M12,10A2,2 0 0,1 14,12A2,2 0 0,1 12,14A2,2 0 0,1 10,12A2,2 0 0,1 12,10M12,4A2,2 0 0,1 14,6A2,2 0 0,1 12,8A2,2 0 0,1 10,6A2,2 0 0,1 12,4Z",this.hass.localize("ui.panel.lovelace.editor.edit_view.edit_".concat(this._yamlMode?"ui":"yaml")),"M3 6V8H14V6H3M3 10V12H14V10H3M20 10.1C19.9 10.1 19.7 10.2 19.6 10.3L18.6 11.3L20.7 13.4L21.7 12.4C21.9 12.2 21.9 11.8 21.7 11.6L20.4 10.3C20.3 10.2 20.2 10.1 20 10.1M18.1 11.9L12 17.9V20H14.1L20.2 13.9L18.1 11.9M3 14V16H10V14H3Z",this.hass.localize("ui.panel.lovelace.editor.edit_view.move_to_dashboard"),"M14 2H6C4.9 2 4 2.9 4 4V20C4 20.41 4.12 20.8 4.34 21.12C4.41 21.23 4.5 21.33 4.59 21.41C4.95 21.78 5.45 22 6 22H13.53C13 21.42 12.61 20.75 12.35 20H6V4H13V9H18V12C18.7 12 19.37 12.12 20 12.34V8L14 2M18 23L23 18.5L20 15.8L18 14V17H14V20H18V23Z",g?(0,L.dy)(c||(c=(0,_.Z)([' <ha-alert alert-type="info"> ',' <ha-button slot="action" .label="','" @click="','"> </ha-button> </ha-alert> '])),this.hass.localize("ui.panel.lovelace.editor.edit_view.card_to_section_convert"),this.hass.localize("ui.panel.lovelace.editor.edit_view.convert_view"),this._convertToSection):L.Ld,f?(0,L.dy)(d||(d=(0,_.Z)([' <ha-alert alert-type="warning"> '," </ha-alert> "])),this.hass.localize("ui.panel.lovelace.editor.edit_view.section_to_card_not_supported")):L.Ld,this._yamlMode?L.Ld:(0,L.dy)(h||(h=(0,_.Z)(['<sl-tab-group @sl-tab-show="','"> '," </sl-tab-group>"])),this._handleTabChanged,J.map(function(e){return(0,L.dy)(u||(u=(0,_.Z)([' <sl-tab slot="nav" .panel="','" .active="','"> '," </sl-tab> "])),e,a._currTab===e,a.hass.localize("ui.panel.lovelace.editor.edit_view.".concat(e.replace("-","_"))))})),i,void 0!==this._params.viewIndex?(0,L.dy)(v||(v=(0,_.Z)([' <ha-button class="warning" slot="secondaryAction" @click="','"> '," </ha-button> "])),this._deleteConfirm,this.hass.localize("ui.panel.lovelace.editor.edit_view.delete")):L.Ld,!this._config||this._saving||!this._dirty||g||f,this._save,this._saving?(0,L.dy)(p||(p=(0,_.Z)(['<ha-spinner size="small" aria-label="Saving"></ha-spinner>']))):L.Ld,this.hass.localize("ui.common.save"))}},{key:"_handleAction",value:(D=(0,y.Z)((0,m.Z)().m(function e(t){var i;return(0,m.Z)().w(function(e){for(;;)switch(e.n){case 0:t.stopPropagation(),t.preventDefault(),i=t.detail.index,e.n=0===i?1:1===i?2:3;break;case 1:return this._yamlMode=!this._yamlMode,e.a(3,3);case 2:return this._openSelectDashboard(),e.a(3,3);case 3:return e.a(2)}},e,this)})),function(e){return D.apply(this,arguments)})},{key:"_openSelectDashboard",value:function(){(0,F.e)(this,{lovelaceConfig:this._lovelace.config,dashboardSelectedCallback:this._moveViewToDashboard,urlPath:this._lovelace.urlPath})}},{key:"_convertToSection",value:(V=(0,y.Z)((0,m.Z)().m(function e(){var t,i,a;return(0,m.Z)().w(function(e){for(;;)switch(e.n){case 0:if(this._params&&this._config){e.n=1;break}return e.a(2);case 1:return e.n=2,(0,O.showConfirmationDialog)(this,{title:this.hass.localize("ui.panel.lovelace.editor.edit_view.convert_view_title"),text:this.hass.localize("ui.panel.lovelace.editor.edit_view.convert_view_text"),confirmText:this.hass.localize("ui.panel.lovelace.editor.edit_view.convert_view_action"),dismissText:this.hass.localize("ui.common.cancel")});case 2:if(e.v){e.n=3;break}return e.a(2);case 3:return(t=Object.assign({},this._config)).type=E.zh,t.sections=[(0,U.d)(this.hass.localize)],t.path=void 0,i=this._params.lovelace,e.p=4,e.n=5,i.saveConfig((0,N.Uo)(this.hass,i.config,t));case 5:this._params.saveCallback&&this._params.saveCallback(i.config.views.length,t),this.closeDialog(),e.n=7;break;case 6:e.p=6,a=e.v,(0,O.showAlertDialog)(this,{text:"".concat(this.hass.localize("ui.panel.lovelace.editor.edit_view.saving_failed"),": ").concat(a.message)});case 7:return e.p=7,this._saving=!1,e.f(7);case 8:return e.a(2)}},e,this,[[4,6,7,8]])})),function(){return V.apply(this,arguments)})},{key:"_delete",value:(C=(0,y.Z)((0,m.Z)().m(function e(){var t;return(0,m.Z)().w(function(e){for(;;)switch(e.n){case 0:if(this._params){e.n=1;break}return e.a(2);case 1:return e.p=1,e.n=2,this._params.lovelace.saveConfig((0,N.PT)(this._params.lovelace.config,this._params.viewIndex));case 2:this.closeDialog(),(0,A.c)("/".concat(window.location.pathname.split("/")[1])),e.n=4;break;case 3:e.p=3,t=e.v,(0,O.showAlertDialog)(this,{text:"Deleting failed: ".concat(t.message)});case 4:return e.a(2)}},e,this,[[1,3]])})),function(){return C.apply(this,arguments)})},{key:"_deleteConfirm",value:(a=(0,y.Z)((0,m.Z)().m(function e(){var t,i,a,n,o,s;return(0,m.Z)().w(function(e){for(;;)switch(e.n){case 0:return o=null!==(t=this._config)&&void 0!==t&&null!==(t=t.sections)&&void 0!==t&&t.length?"sections":null!==(i=this._config)&&void 0!==i&&null!==(i=i.cards)&&void 0!==i&&i.length?"cards":"only",s=null!==(a=this._config)&&void 0!==a&&a.title?"named":"unnamed",e.n=1,(0,O.showConfirmationDialog)(this,{title:this.hass.localize("ui.panel.lovelace.views.delete_title"),text:this.hass.localize("ui.panel.lovelace.views.delete_".concat(s,"_view_").concat(o),{name:null===(n=this._config)||void 0===n?void 0:n.title}),confirmText:this.hass.localize("ui.common.delete"),destructive:!0});case 1:if(e.v){e.n=2;break}return e.a(2);case 2:this._delete();case 3:return e.a(2)}},e,this)})),function(){return a.apply(this,arguments)})},{key:"_handleTabChanged",value:function(e){var t=e.detail.name;t!==this._currTab&&(this._currTab=t)}},{key:"_save",value:(i=(0,y.Z)((0,m.Z)().m(function e(){var t,i,a,n,o;return(0,m.Z)().w(function(e){for(;;)switch(e.n){case 0:if(this._params&&this._config){e.n=1;break}return e.a(2);case 1:if(this._isConfigChanged()){e.n=2;break}return this.closeDialog(),e.a(2);case 2:return this._saving=!0,(a=Object.assign({},this._config)).type!==E.zh||null!==(t=a.sections)&&void 0!==t&&t.length?null!==(i=a.cards)&&void 0!==i&&i.length||(a.cards=[]):a.sections=[(0,U.d)(this.hass.localize)],n=this._params.lovelace,e.p=3,e.n=4,n.saveConfig(this._creatingView?(0,N.Uo)(this.hass,n.config,a):(0,N.YI)(this.hass,n.config,this._params.viewIndex,a));case 4:this._params.saveCallback&&this._creatingView&&this._params.saveCallback(this._params.viewIndex||n.config.views.length,a),this.closeDialog(),e.n=6;break;case 5:e.p=5,o=e.v,(0,O.showAlertDialog)(this,{text:"".concat(this.hass.localize("ui.panel.lovelace.editor.edit_view.saving_failed"),": ").concat(o.message)});case 6:return e.p=6,this._saving=!1,e.f(6);case 7:return e.a(2)}},e,this,[[3,5,6,7]])})),function(){return i.apply(this,arguments)})},{key:"_viewConfigChanged",value:function(e){e.detail&&e.detail.config&&!(0,S.v)(this._config,e.detail.config)&&(this._config=e.detail.config,this._dirty=!0)}},{key:"_viewVisibilityChanged",value:function(e){e.detail.visible&&this._config&&(this._config=Object.assign(Object.assign({},this._config),{},{visible:e.detail.visible})),this._dirty=!0}},{key:"_viewYamlChanged",value:function(e){e.stopPropagation(),e.detail.isValid&&(this._config=e.detail.value,this._dirty=!0)}},{key:"_isConfigChanged",value:function(){return this._creatingView||JSON.stringify(this._config)!==JSON.stringify(this._params.lovelace.config.views[this._params.viewIndex])}},{key:"_creatingView",get:function(){return void 0===this._params.viewIndex}}],[{key:"styles",get:function(){return[j.yu,(0,L.iv)(g||(g=(0,_.Z)(["ha-dialog{--vertical-align-dialog:flex-start;--dialog-surface-margin-top:40px}@media all and (max-width:450px),all and (max-height:500px){ha-dialog{--dialog-surface-margin-top:0px}}ha-dialog.yaml-mode{--dialog-content-padding:0}h2{margin:0;font-size:inherit;font-weight:inherit}sl-tab{flex:1}sl-tab::part(base){width:100%;justify-content:center}ha-button.warning{margin-right:auto;margin-inline-end:auto;margin-inline-start:initial}.hidden{display:none}.error{color:var(--error-color);border-bottom:1px solid var(--error-color)}ha-alert{display:block}ha-alert ha-button{display:block}ha-button.save{position:relative}.save ha-spinner{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}@media all and (min-width:600px){ha-dialog{--mdc-dialog-min-width:600px}}"])))]}}]);var i,a,C,V,D}(L.oi);(0,C.__decorate)([(0,V.Cb)({attribute:!1})],Y.prototype,"hass",void 0),(0,C.__decorate)([(0,V.SB)()],Y.prototype,"_params",void 0),(0,C.__decorate)([(0,V.SB)()],Y.prototype,"_lovelace",void 0),(0,C.__decorate)([(0,V.SB)()],Y.prototype,"_config",void 0),(0,C.__decorate)([(0,V.SB)()],Y.prototype,"_saving",void 0),(0,C.__decorate)([(0,V.SB)()],Y.prototype,"_currTab",void 0),(0,C.__decorate)([(0,V.SB)()],Y.prototype,"_dirty",void 0),(0,C.__decorate)([(0,V.SB)()],Y.prototype,"_yamlMode",void 0),(0,C.__decorate)([(0,V.IO)("ha-yaml-editor")],Y.prototype,"_editor",void 0),(0,C.__decorate)([(0,V.SB)()],Y.prototype,"_currentType",void 0),Y=(0,C.__decorate)([(0,V.Mo)("hui-dialog-edit-view")],Y),a()}catch(Q){a(Q)}})},91730:function(e,t,i){var a,n,o=i(54982),s=i(42385),r=i(54521),l=i(4490),c=i(20129),d=i(85297),h=(i(12212),i(87799),i(64455),i(40005),i(73742)),u=i(28105),v=i(59048),p=i(7616),g=i(39884),_=(i(87979),function(e){function t(){var e;(0,r.Z)(this,t);for(var i=arguments.length,a=new Array(i),n=0;n<i;n++)a[n]=arguments[n];return(e=(0,c.Z)(this,t,[].concat(a)))._localizeValueCallback=function(t){return e.hass.localize(t)},e._schema=(0,u.Z)(function(e){return[{name:"image",selector:{background:{original:!0}}}].concat((0,s.Z)(e?[{name:"settings",flatten:!0,expanded:!0,type:"expandable",schema:[{name:"opacity",selector:{number:{min:0,max:100,mode:"slider",step:10}}},{name:"attachment",selector:{button_toggle:{translation_key:"ui.panel.lovelace.editor.edit_view.background.attachment",options:["scroll","fixed"]}}},{name:"size",required:!0,selector:{select:{translation_key:"ui.panel.lovelace.editor.edit_view.background.size",options:["auto","cover","contain"],mode:"dropdown"}}},{name:"alignment",required:!0,selector:{select:{translation_key:"ui.panel.lovelace.editor.edit_view.background.alignment",options:["top left","top center","top right","center left","center","center right","bottom left","bottom center","bottom right"],mode:"dropdown"}}},{name:"repeat",required:!0,selector:{select:{translation_key:"ui.panel.lovelace.editor.edit_view.background.repeat",options:["repeat","no-repeat"],mode:"dropdown"}}}]}]:[]))}),e._computeLabelCallback=function(t){switch(t.name){case"image":return e.hass.localize("ui.panel.lovelace.editor.edit_view.background.image");case"opacity":return e.hass.localize("ui.panel.lovelace.editor.edit_view.background.opacity");case"alignment":return e.hass.localize("ui.panel.lovelace.editor.edit_view.background.alignment.name");case"size":return e.hass.localize("ui.panel.lovelace.editor.edit_view.background.size.name");case"repeat":return e.hass.localize("ui.panel.lovelace.editor.edit_view.background.repeat.name");case"attachment":return e.hass.localize("ui.panel.lovelace.editor.edit_view.background.attachment.name");default:return e.hass.localize("ui.panel.lovelace.editor.edit_view.background.".concat(t.name))}},e}return(0,d.Z)(t,e),(0,l.Z)(t,[{key:"config",set:function(e){this._config=e}},{key:"render",value:function(){var e,t;if(!this.hass)return v.Ld;var i=null===(e=this._config)||void 0===e?void 0:e.background;if("string"==typeof i){var n,s=null===(n=i.match(/url\(['"]?([^'"]+)['"]?\)/))||void 0===n?void 0:n[1];i={image:s}}return i=i?Object.assign({opacity:100,alignment:"center",size:"cover",repeat:"no-repeat",attachment:"scroll"},i):{opacity:33,alignment:"center",size:"cover",repeat:"repeat",attachment:"fixed"},(0,v.dy)(a||(a=(0,o.Z)([' <ha-form .hass="','" .data="','" .schema="','" .computeLabel="','" @value-changed="','" .localizeValue="','" style="','"></ha-form> '])),this.hass,i,this._schema(!0),this._computeLabelCallback,this._valueChanged,this._localizeValueCallback,"--picture-opacity: ".concat((null!==(t=i.opacity)&&void 0!==t?t:100)/100,";"))}},{key:"_valueChanged",value:function(e){var t=Object.assign(Object.assign({},this._config),{},{background:e.detail.value});(0,g.B)(this,"view-config-changed",{config:t})}}])}(v.oi));_.styles=(0,v.iv)(n||(n=(0,o.Z)([":host{display:block;--file-upload-image-border-radius:4px}"]))),(0,h.__decorate)([(0,p.Cb)({attribute:!1})],_.prototype,"hass",void 0),(0,h.__decorate)([(0,p.SB)()],_.prototype,"_config",void 0),_=(0,h.__decorate)([(0,p.Mo)("hui-view-background-editor")],_)},47861:function(e,t,i){var a,n=i(54982),o=i(42385),s=i(54521),r=i(4490),l=i(20129),c=i(85297),d=(i(12212),i(24819),i(87799),i(54480),i(73742)),h=i(59048),u=i(7616),v=i(28105),p=i(39884),g=i(14778),_=(i(87979),i(71764)),f=i(30889),m=function(e){function t(){var e;(0,s.Z)(this,t);for(var i=arguments.length,a=new Array(i),n=0;n<i;n++)a[n]=arguments[n];return(e=(0,l.Z)(this,t,[].concat(a))).isNew=!1,e._suggestedPath=!1,e._schema=(0,v.Z)(function(e,t){return[{name:"type",selector:{select:{options:[_.zh,_.e4,_.rQ,_.Jh].map(function(t){return{value:t,label:e("ui.panel.lovelace.editor.edit_view.types.".concat(t))}})}}},{name:"title",selector:{text:{}}},{name:"icon",selector:{icon:{}}},{name:"path",selector:{text:{}}},{name:"theme",selector:{theme:{}}},{name:"subview",selector:{boolean:{}}}].concat((0,o.Z)(t===_.zh?[{name:"section_specifics",type:"expandable",flatten:!0,expanded:!0,schema:[{name:"max_columns",selector:{number:{min:1,max:10,mode:"slider",slider_ticks:!0}}},{name:"dense_section_placement",selector:{boolean:{}}},{name:"top_margin",selector:{boolean:{}}}]}]:[]))}),e._computeLabel=function(t){switch(t.name){case"path":return e.hass.localize("ui.panel.lovelace.editor.card.generic.url");case"type":case"subview":case"max_columns":case"dense_section_placement":case"top_margin":case"section_specifics":return e.hass.localize("ui.panel.lovelace.editor.edit_view.".concat(t.name));default:return e.hass.localize("ui.panel.lovelace.editor.card.generic.".concat(t.name))}},e._computeHelper=function(t){switch(t.name){case"subview":case"dense_section_placement":case"top_margin":return e.hass.localize("ui.panel.lovelace.editor.edit_view.".concat(t.name,"_helper"));default:return}},e}return(0,c.Z)(t,e),(0,r.Z)(t,[{key:"config",set:function(e){this._config=e}},{key:"_type",get:function(){return(0,f.W)(this._config)}},{key:"render",value:function(){if(!this.hass)return h.Ld;var e=this._schema(this.hass.localize,this._type),t=Object.assign(Object.assign({},this._config),{},{type:this._type});return void 0===t.max_columns&&this._type===_.zh&&(t.max_columns=4),(0,h.dy)(a||(a=(0,n.Z)([' <ha-form .hass="','" .data="','" .schema="','" .computeLabel="','" .computeHelper="','" @value-changed="','"></ha-form> '])),this.hass,t,e,this._computeLabel,this._computeHelper,this._valueChanged)}},{key:"_valueChanged",value:function(e){var t=e.detail.value;t.type!==_.zh&&(delete t.max_columns,delete t.dense_section_placement,delete t.top_margin),!this.isNew||this._suggestedPath||this._config.path!==t.path||this._config.path&&t.path!==(0,g.l)(this._config.title||"","-")||(t.path=(0,g.l)(t.title||"","-")),(0,p.B)(this,"view-config-changed",{config:t})}}])}(h.oi);(0,d.__decorate)([(0,u.Cb)({attribute:!1})],m.prototype,"hass",void 0),(0,d.__decorate)([(0,u.Cb)({attribute:!1})],m.prototype,"isNew",void 0),(0,d.__decorate)([(0,u.SB)()],m.prototype,"_config",void 0),m=(0,d.__decorate)([(0,u.Mo)("hui-view-editor")],m)},54545:function(e,t,i){var a,n,o,s=i(42385),r=i(54982),l=i(54521),c=i(4490),d=i(20129),h=i(85297),u=i(53389),v=(i(12212),i(25518),i(24819),i(2394),i(18574),i(81738),i(94814),i(6989),i(72489),i(54480),i(73742)),p=i(59048),g=i(7616),_=i(28105),f=i(39884),m=i(36221),b=(i(99747),i(69760),i(86699),i(99918)),y=function(e){function t(){var e;(0,l.Z)(this,t);for(var i=arguments.length,a=new Array(i),n=0;n<i;n++)a[n]=arguments[n];return(e=(0,d.Z)(this,t,[].concat(a)))._sortedUsers=(0,_.Z)(function(t){return t.sort(function(t,i){return(0,m.$K)(t.name,i.name,e.hass.locale.language)})}),e}return(0,h.Z)(t,e),(0,c.Z)(t,[{key:"config",set:function(e){this._config=e,this._visible=void 0===this._config.visible||this._config.visible}},{key:"firstUpdated",value:function(e){var i=this;(0,u.Z)(t,"firstUpdated",this,3)([e]),(0,b.uh)(this.hass).then(function(e){i._users=e.filter(function(e){return!e.system_generated})})}},{key:"render",value:function(){var e=this;return this.hass&&this._users?(0,p.dy)(a||(a=(0,r.Z)([" <p> "," </p> "," "])),this.hass.localize("ui.panel.lovelace.editor.edit_view.visibility.select_users"),this._sortedUsers(this._users).map(function(t){return(0,p.dy)(n||(n=(0,r.Z)([' <ha-list-item graphic="avatar" hasMeta> <ha-user-badge slot="graphic" .hass="','" .user="','"></ha-user-badge> <span>','</span> <ha-switch slot="meta" .userId="','" @change="','" .checked="','"></ha-switch> </ha-list-item> '])),e.hass,t,t.name,t.id,e._valChange,e.checkUser(t.id))})):p.Ld}},{key:"checkUser",value:function(e){return void 0===this._visible||("boolean"==typeof this._visible?this._visible:this._visible.some(function(t){return t.user===e}))}},{key:"_valChange",value:function(e){var t=this,i=e.currentTarget.userId,a=e.currentTarget.checked,n=[];"boolean"==typeof this._visible?this._visible&&(n=this._users.map(function(e){return{user:e.id}})):n=(0,s.Z)(this._visible);if(!0===a){var o={user:i};n.push(o)}else n=n.filter(function(e){return e.user!==i});this._visible=n.filter(function(e){return t._users.some(function(t){return t.id===e.user})}),(0,f.B)(this,"view-visibility-changed",{visible:this._visible})}}])}(p.oi);y.styles=(0,p.iv)(o||(o=(0,r.Z)([":host{display:block}"]))),(0,v.__decorate)([(0,g.Cb)({attribute:!1})],y.prototype,"hass",void 0),(0,v.__decorate)([(0,g.SB)()],y.prototype,"_config",void 0),(0,v.__decorate)([(0,g.SB)()],y.prototype,"_users",void 0),(0,v.__decorate)([(0,g.SB)()],y.prototype,"_visible",void 0),y=(0,v.__decorate)([(0,g.Mo)("hui-view-visibility-editor")],y)},82033:function(e,t,i){i.d(t,{d:function(){return a}});var a=function(e){return{type:"grid",cards:[{type:"heading",heading:e("ui.panel.lovelace.editor.section.default_section_title")}]}}}}]);
//# sourceMappingURL=70540.6a356b2a9083aaf9.js.map