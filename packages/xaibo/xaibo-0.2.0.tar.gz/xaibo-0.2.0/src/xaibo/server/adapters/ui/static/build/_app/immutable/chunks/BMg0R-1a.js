var ge=Object.defineProperty;var we=(e,t,n)=>t in e?ge(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var P=(e,t,n)=>we(e,typeof t!="symbol"?t+"":t,n);import{A as T,D as G,d as le,m as fe,g as ue,c as pe,a as Y,k as Ee,l as Se,b as Pe,e as ke,h as Q,j as $e}from"./BQFB9udT.js";const Ie=e=>()=>({async network(t,{client:n,initialValue:r,resolve:o,marshalVariables:i}){if(t.artifact.kind===T.Fragment)return o(t,r);const s=t.fetch??globalThis.fetch,a={name:t.name,text:t.text,hash:t.hash,variables:{...i(t)}};for(const p of t.artifact.stripVariables)delete a.variables[p];const f=await Oe(n.url,t.fetchParams)({fetch:(p,h)=>{const c=je(a,h)??h;return s(p,{...c,signal:t.abortController.signal})},metadata:t.metadata,session:t.session||{},...a});o(t,{fetching:!1,variables:t.variables??{},data:f.data,errors:!f.errors||f.errors.length===0?null:f.errors,partial:!1,stale:!1,source:G.Network})}}),Oe=(e,t)=>{if(!e)throw new Error("Could not find configured client url. Please specify one in your HoudiniClient constructor.");return async({fetch:n,name:r,text:o,variables:i})=>{var a,l;const s=await n(e,{method:"POST",body:JSON.stringify({operationName:r,query:o,variables:i}),...t,headers:{Accept:"application/graphql+json, application/json","Content-Type":"application/json",...t==null?void 0:t.headers}});if(!s.ok&&!((a=s.headers.get("content-type"))!=null&&a.startsWith("application/json"))&&!((l=s.headers.get("content-type"))!=null&&l.startsWith("application/graphql+json")))throw new Error(`Failed to fetch: server returned invalid response with error ${s.status}: ${s.statusText}`);return await s.json()}};function je(e,t){const{files:n}=Ne({variables:e.variables});if(n.size){const r=t;let o={};if(r!=null&&r.headers){const l=Object.entries(r==null?void 0:r.headers).filter(([f,p])=>!(f.toLowerCase()=="content-type"&&p.toLowerCase()=="application/json"));o=Object.fromEntries(l)}const i=new FormData;t&&(t!=null&&t.body)?i.set("operations",t==null?void 0:t.body):i.set("operations",JSON.stringify({operationName:e.name,query:e.text,variables:e.variables}));const s={};let a=0;return n.forEach(l=>{s[++a]=l}),i.set("map",JSON.stringify(s)),a=0,n.forEach((l,f)=>{i.set(`${++a}`,f,f.name)}),{...r,headers:o,body:i}}}function Te(e){return typeof File<"u"&&e instanceof File||typeof Blob<"u"&&e instanceof Blob}function Ne(e){if(!arguments.length)throw new TypeError("Argument 1 `value` is required.");const t=new Map,n=new Map;function r(o,i,s){if(Te(o)){const f=n.get(o);return f?f.push(i):n.set(o,[i]),null}const a=Array.isArray(o)||typeof FileList<"u"&&o instanceof FileList,l=Ae(o);if(a||l){let f=t.get(o);const p=!f;if(p&&(f=a?[]:o instanceof Object?{}:Object.create(null),t.set(o,f)),!s.has(o)){const h=i?`${i}.`:"",c=new Set(s).add(o);if(a){let k=0;for(const R of o){const N=r(R,h+k++,c);p&&f.push(N)}}else for(const k in o){const R=r(o[k],h+k,c);p&&(f[k]=R)}}return f}return o}return{clone:r(e,"",new Set),files:n}}function Ae(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}const H=(e,t)=>()=>{const n=t(),r=i=>i?(s,a)=>s.artifact.kind!==e?a.next(s):i(s,a):void 0,o=i=>i?(s,a)=>s.artifact.kind!==e?a.resolve(s):i(s,a):void 0;return{start:r(n.start),network:r(n.network),beforeNetwork:r(n.beforeNetwork),afterNetwork:o(n.afterNetwork),end:o(n.end),catch:n.catch?(i,s)=>n.catch(i,s):void 0,cleanup:(...i)=>{var s;return(s=n.cleanup)==null?void 0:s.call(n,...i)}}},Re=e=>H(T.Query,function(){let t=null,n=null;return{start(r,{next:o}){var s;const i={session:r.session};r.variables={...n,...Object.fromEntries(Object.entries(((s=r.artifact.input)==null?void 0:s.runtimeScalars)??{}).map(([a,l])=>{var p,h;const f=(h=(p=r.config.features)==null?void 0:p.runtimeScalars)==null?void 0:h[l];return f?[a,f.resolve(i)]:[a,l]})),...r.variables},o(r)},end(r,{resolve:o,marshalVariables:i,variablesChanged:s}){var a,l;if(s(r)&&!((a=r.cacheParams)!=null&&a.disableSubscriptions)){t&&e.unsubscribe(t,((l=t.variables)==null?void 0:l.call(t))||{}),n={...i(r)};const f=n;t={rootType:r.artifact.rootType,selection:r.artifact.selection,variables:()=>f,set:p=>{o(r,{data:p,errors:null,fetching:!1,partial:!1,stale:!1,source:G.Cache,variables:r.variables??{}})}},e.subscribe(t,n)}o(r)},cleanup(){var r;t&&(e.unsubscribe(t,(r=t.variables)==null?void 0:r.call(t)),n=null)}}}),De=e=>H(T.Fragment,function(){let t=null,n=null;return{start(r,{next:o,resolve:i,variablesChanged:s,marshalVariables:a}){var f,p;if(!r.stuff.parentID)return o(r);const l={parent:r.stuff.parentID,variables:a(r)};if(!((f=r.cacheParams)!=null&&f.disableSubscriptions)&&(!le(n,l)||s(r))){t&&e.unsubscribe(t,((p=t.variables)==null?void 0:p.call(t))||{});const h=a(r);t={rootType:r.artifact.rootType,selection:r.artifact.selection,variables:()=>h,parentID:r.stuff.parentID,set:c=>{i(r,{data:c,errors:null,fetching:!1,partial:!1,stale:!1,source:G.Cache,variables:h})}},e.subscribe(t,h),n=l}o(r)},cleanup(){var r;t&&e.unsubscribe(t,(r=t.variables)==null?void 0:r.call(t))}}}),Fe=e=>H(T.Mutation,()=>({async start(t,{next:n,marshalVariables:r}){const o=e._internal_unstable.storage.createLayer(!0);let i=[];const s=t.stuff.optimisticResponse;s&&(i=e.write({selection:t.artifact.selection,data:await fe({selection:t.artifact.selection,data:s}),variables:r(t),layer:o.id})),t.cacheParams={...t.cacheParams,layer:o,notifySubscribers:i,forceNotify:!0},n(t)},afterNetwork(t,{resolve:n}){var r;(r=t.cacheParams)!=null&&r.layer&&e.clearLayer(t.cacheParams.layer.id),n(t)},end(t,{resolve:n,value:r}){var i,s;r.errors&&r.errors.length>0&&(i=t.cacheParams)!=null&&i.layer&&e.clearLayer(t.cacheParams.layer.id),(s=t.cacheParams)!=null&&s.layer&&e._internal_unstable.storage.resolveLayer(t.cacheParams.layer.id),n(t)},catch(t,{error:n}){var r;if((r=t.cacheParams)!=null&&r.layer){const{layer:o}=t.cacheParams;e.clearLayer(o.id),e._internal_unstable.storage.resolveLayer(o.id)}throw n}}));function qe(e){return H(T.Subscription,()=>{let t=null,n=null;return{start(r,{resolve:o,next:i,initialValue:s}){if(typeof globalThis.window>"u"){o(r,s);return}i(r)},async network(r,{resolve:o,initialValue:i,variablesChanged:s,marshalVariables:a}){const l={fetchParams:r.fetchParams??{},session:r.session??{},metadata:r.metadata??{}},f=s(r),p=!le(n,l);if(!f&&!p){o(r,i);return}n=l,p&&await _e(r,e),t==null||t(),t=ye.subscribe({operationName:r.name,query:r.text,variables:a(r)},{next:({data:h,errors:c})=>{o(r,{data:h??null,errors:[...c??[]],fetching:!1,partial:!0,stale:!1,source:G.Network,variables:r.variables??{}})},error(h){t==null||t(),o(r,{partial:!0,stale:!1,source:G.Network,data:null,errors:[h],fetching:!1,variables:r.variables??{}})},complete(){}})},cleanup(){t==null||t(),n=null}}})}let C=null,ye;function _e(e,t){return C||(C=new Promise(n=>{ye=t(e),n(),C=null}),C)}const We=({operations:e,error:t})=>()=>{const n=e.includes("all"),r=o=>n||{[T.Query]:e.includes("query"),[T.Mutation]:e.includes("mutation"),[T.Fragment]:!1,[T.Subscription]:e.includes("subscription")}[o];return{async end(o,{value:i,resolve:s}){if(i.errors&&i.errors.length>0&&r(o.artifact.kind))throw await(t??Le)(i.errors,o);s(o)}}},Le=async e=>new Error(e.map(t=>t.message).join(". ")+"."),Me=(e=()=>({}))=>()=>({start(t,{next:n,marshalVariables:r}){n({...t,fetchParams:e({config:t.config,policy:t.policy,metadata:t.metadata,session:t.session,stuff:t.stuff,document:t.artifact,variables:r(t),text:t.text,hash:t.hash})})}}),Ke={},Be={},de={},Ce=(e,t=Be,n=Ke,r=de,o=1)=>()=>({async start(i,{next:s}){const a=i.stuff.optimisticResponse,l={...i};a&&i.artifact.kind===T.Mutation&&i.artifact.optimisticKeys&&(l.stuff.mutationID=o++,Z({selection:i.artifact.selection,response:a,callbackStore:t,keyStore:n,objectIDs:r,mutationID:l.stuff.mutationID}),l.stuff.optimisticResponse=a),s(l)},beforeNetwork(i,{next:s}){if(Object.keys(n).length===0)return s(i);const a=v(i.variables??{},t);if(Object.keys(a).length===0)return s(i);for(const l of Object.keys(a))t[l].push(f=>{a[l]=f,Object.values(a).every(p=>p!==null)&&s({...i,variables:ee({...i.variables},a)})})},afterNetwork(i,{value:s,resolve:a}){i.artifact.kind===T.Mutation&&i.artifact.optimisticKeys&&typeof i.stuff.mutationID<"u"&&x(e,s.data??{},i.artifact.selection,n,i.stuff.mutationID,{onNewKey:(l,f)=>{t[l].forEach(p=>{p(f)}),delete t[l]},onIDChange:(l,f)=>{e.registerKeyMap(l,f)}}),a(i)},end(i,{resolve:s}){typeof i.stuff.mutationID<"u"&&(delete n[i.stuff.mutationID],delete r[i.stuff.mutationID]),s(i)}});function Z(e){let t=ue(e.selection,e.response.__typename,!1);const n=[];for(const[r,{type:o,selection:i,optimisticKey:s}]of Object.entries(t)){const a=e.response[r],l=`${e.path??""}.${r}`;if(s){let f;if(a){const{marshaled:p}=fe({data:{marshaled:a},selection:{fields:{value:{type:o,keyRaw:"value"}}}});f=p}else f=ze(o);n.push(f),e.response[r]=f,e.callbackStore[f]=[],e.keyStore[e.mutationID]={[l]:f}}if(i)if(Array.isArray(a))for(const[f,p]of V(a).entries())p&&typeof p=="object"&&!Array.isArray(p)&&Z({...e,selection:i,response:p,type:o,path:`${l}[${f}]`});else a&&typeof a=="object"&&Z({...e,selection:i,response:a,type:o,path:l})}if(n.length>0){const r=`${e.type}:${pe(Y,e.type??"",e.response)}`;for(const o of n)e.objectIDs[e.mutationID]={...e.objectIDs[e.mutationID],[o]:r}}return e.response}function v(e,t,n={}){for(const r of Object.values(e))if(typeof r=="string"&&t[r]&&(n[r]=null),Array.isArray(r))for(const o of V(r))o&&typeof o=="object"&&v(o,t,n);else r&&typeof r=="object"&&v(r,t,n);return n}function x(e,t,n,r,o,i,s=de,a="",l=""){let f=ue(n,t.__typename,!1),p=null;for(const[h,c]of Object.entries(t)){const k=`${a??""}.${h}`;if(typeof c=="string"&&r[o][k]){const _=r[o][k];i.onNewKey(_,c),p=s[o][_]}if(!n||!f[h])continue;let{type:R,selection:N}=f[h];if(Array.isArray(c))for(const[_,A]of V(c).entries())A&&typeof A=="object"&&N&&x(e,A,N,r,o,i,s,`${k}[${_}]`,R);else c&&typeof c=="object"&&N&&x(e,c,N,r,o,i,s,k,R)}if(p){const h=pe(Y,l,t);i.onIDChange(`${l}:${h}`,p),e.write({selection:{fields:Object.fromEntries(Ee(Y,l).map(c=>[c,{type:"scalar",keyRaw:c}]))},parent:p,data:t})}}function V(e){const t=[],n=[...e];for(;n.length>0;){const r=n.shift();Array.isArray(r)?n.push(...r):t.push(r)}return t}function ee(e,t){for(const[n,r]of Object.entries(e))if(typeof r=="string"&&t[r]&&(e[n]=t[r]),Array.isArray(r))for(const o of V(r))o&&typeof o=="object"&&ee(o,t);else r&&typeof r=="object"&&ee(r,t);return e}function ze(e){if(e==="Int")return new Date().getTime();if(e==="String")return new Date().getTime().toString();if(e==="ID")return new Date().getTime().toString();throw new Error(`unsupported type for optimistic key: ${e}. Please provide a value in your mutation arguments.`)}const Ge=[];var Je=Ge;class Ue{constructor({url:t,fetchParams:n,plugins:r,pipeline:o,throwOnError:i}={}){P(this,"url");P(this,"throwOnError_operations");P(this,"cache",null);P(this,"throwOnError");P(this,"fetchParams");P(this,"pipeline");P(this,"extraPlugins");P(this,"proxies",{});P(this,"componentCache",{});var a,l;if(r&&o)throw new Error("A client cannot be given a pipeline and a list of plugins at the same time.");this.throwOnError_operations=(i==null?void 0:i.operations)??[];let s=((l=(a=globalThis.process)==null?void 0:a.env)==null?void 0:l.HOUDINI_PORT)??"5173";this.url=t??(globalThis.window?"":`https://localhost:${s}`)+Se(Pe()),this.throwOnError=i,this.fetchParams=n,this.pipeline=o,this.extraPlugins=r}setCache(t){this.cache=t}get plugins(){return ke([].concat(this.throwOnError?[We(this.throwOnError)]:[],Me(this.fetchParams),this.pipeline??[Ce(this.cache??Q),Re(this.cache??Q),Fe(this.cache??Q),De(this.cache??Q)].concat(this.extraPlugins??[],Je,Ie())))}observe({enableCache:t=!0,fetching:n=!1,...r}){return new $e({client:this,plugins:me(this.plugins),fetching:n,enableCache:t,cache:this.cache??void 0,...r})}registerProxy(t,n){this.proxies[t]=n}}function me(e){return e.reduce((t,n)=>{if(typeof n!="function")throw new Error("Encountered client plugin that's not a function");const r=n();if(!r)return t;if(!Array.isArray(r))return t.concat(r);for(const o of r)if(o){if(typeof o=="function")return t.concat(me([o]));t.push(o)}return t},[])}function I(e){return e===null?"null":Array.isArray(e)?"array":typeof e}function q(e){return I(e)==="object"}function Qe(e){return Array.isArray(e)&&e.length>0&&e.every(t=>"message"in t)}function ae(e,t){return e.length<124?e:t}const He="graphql-transport-ws";var O=(e=>(e[e.InternalServerError=4500]="InternalServerError",e[e.InternalClientError=4005]="InternalClientError",e[e.BadRequest=4400]="BadRequest",e[e.BadResponse=4004]="BadResponse",e[e.Unauthorized=4401]="Unauthorized",e[e.Forbidden=4403]="Forbidden",e[e.SubprotocolNotAcceptable=4406]="SubprotocolNotAcceptable",e[e.ConnectionInitialisationTimeout=4408]="ConnectionInitialisationTimeout",e[e.ConnectionAcknowledgementTimeout=4504]="ConnectionAcknowledgementTimeout",e[e.SubscriberAlreadyExists=4409]="SubscriberAlreadyExists",e[e.TooManyInitialisationRequests=4429]="TooManyInitialisationRequests",e))(O||{}),j=(e=>(e.ConnectionInit="connection_init",e.ConnectionAck="connection_ack",e.Ping="ping",e.Pong="pong",e.Subscribe="subscribe",e.Next="next",e.Error="error",e.Complete="complete",e))(j||{});function he(e){if(!q(e))throw new Error(`Message is expected to be an object, but got ${I(e)}`);if(!e.type)throw new Error("Message is missing the 'type' property");if(typeof e.type!="string")throw new Error(`Message is expects the 'type' property to be a string, but got ${I(e.type)}`);switch(e.type){case"connection_init":case"connection_ack":case"ping":case"pong":{if(e.payload!=null&&!q(e.payload))throw new Error(`"${e.type}" message expects the 'payload' property to be an object or nullish or missing, but got "${e.payload}"`);break}case"subscribe":{if(typeof e.id!="string")throw new Error(`"${e.type}" message expects the 'id' property to be a string, but got ${I(e.id)}`);if(!e.id)throw new Error(`"${e.type}" message requires a non-empty 'id' property`);if(!q(e.payload))throw new Error(`"${e.type}" message expects the 'payload' property to be an object, but got ${I(e.payload)}`);if(typeof e.payload.query!="string")throw new Error(`"${e.type}" message payload expects the 'query' property to be a string, but got ${I(e.payload.query)}`);if(e.payload.variables!=null&&!q(e.payload.variables))throw new Error(`"${e.type}" message payload expects the 'variables' property to be a an object or nullish or missing, but got ${I(e.payload.variables)}`);if(e.payload.operationName!=null&&I(e.payload.operationName)!=="string")throw new Error(`"${e.type}" message payload expects the 'operationName' property to be a string or nullish or missing, but got ${I(e.payload.operationName)}`);if(e.payload.extensions!=null&&!q(e.payload.extensions))throw new Error(`"${e.type}" message payload expects the 'extensions' property to be a an object or nullish or missing, but got ${I(e.payload.extensions)}`);break}case"next":{if(typeof e.id!="string")throw new Error(`"${e.type}" message expects the 'id' property to be a string, but got ${I(e.id)}`);if(!e.id)throw new Error(`"${e.type}" message requires a non-empty 'id' property`);if(!q(e.payload))throw new Error(`"${e.type}" message expects the 'payload' property to be an object, but got ${I(e.payload)}`);break}case"error":{if(typeof e.id!="string")throw new Error(`"${e.type}" message expects the 'id' property to be a string, but got ${I(e.id)}`);if(!e.id)throw new Error(`"${e.type}" message requires a non-empty 'id' property`);if(!Qe(e.payload))throw new Error(`"${e.type}" message expects the 'payload' property to be an array of GraphQL errors, but got ${JSON.stringify(e.payload)}`);break}case"complete":{if(typeof e.id!="string")throw new Error(`"${e.type}" message expects the 'id' property to be a string, but got ${I(e.id)}`);if(!e.id)throw new Error(`"${e.type}" message requires a non-empty 'id' property`);break}default:throw new Error(`Invalid message 'type' property "${e.type}"`)}return e}function Ve(e,t){return he(typeof e=="string"?JSON.parse(e,t):e)}function z(e,t){return he(e),JSON.stringify(e,t)}function Xe(e){const{url:t,connectionParams:n,lazy:r=!0,onNonLazyError:o=console.error,lazyCloseTimeout:i=0,keepAlive:s=0,disablePong:a,connectionAckWaitTimeout:l=0,retryAttempts:f=5,retryWait:p=async function(b){const u=Math.pow(2,b);await new Promise(d=>setTimeout(d,u*1e3+Math.floor(Math.random()*2700+300)))},shouldRetry:h=X,on:c,webSocketImpl:k,generateID:R=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,b=>{const u=Math.random()*16|0;return(b=="x"?u:u&3|8).toString(16)})},jsonMessageReplacer:N,jsonMessageReviver:_}=e;let A;if(k){if(!Ze(k))throw new Error("Invalid WebSocket implementation provided");A=k}else typeof WebSocket<"u"?A=WebSocket:typeof global<"u"?A=global.WebSocket||global.MozWebSocket:typeof window<"u"&&(A=window.WebSocket||window.MozWebSocket);if(!A)throw new Error("WebSocket implementation missing; on Node you can `import WebSocket from 'ws';` and pass `webSocketImpl: WebSocket` to `createClient`");const W=A,E=(()=>{const y=(()=>{const u={};return{on(d,g){return u[d]=g,()=>{delete u[d]}},emit(d){var g;"id"in d&&((g=u[d.id])==null||g.call(u,d))}}})(),b={connecting:c!=null&&c.connecting?[c.connecting]:[],opened:c!=null&&c.opened?[c.opened]:[],connected:c!=null&&c.connected?[c.connected]:[],ping:c!=null&&c.ping?[c.ping]:[],pong:c!=null&&c.pong?[c.pong]:[],message:c!=null&&c.message?[y.emit,c.message]:[y.emit],closed:c!=null&&c.closed?[c.closed]:[],error:c!=null&&c.error?[c.error]:[]};return{onMessage:y.on,on(u,d){const g=b[u];return g.push(d),()=>{g.splice(g.indexOf(d),1)}},emit(u,...d){for(const g of[...b[u]])g(...d)}}})();function te(y){const b=[E.on("error",u=>{b.forEach(d=>d()),y(u)}),E.on("closed",u=>{b.forEach(d=>d()),y(u)})]}let D,F=0,re,K=!1,J=0,ne=!1;async function oe(){clearTimeout(re);const[y,b]=await(D??(D=new Promise((g,$)=>(async()=>{if(K){if(await p(J),!F)return D=void 0,$({code:1e3,reason:"All Subscriptions Gone"});J++}E.emit("connecting",K);const m=new W(typeof t=="function"?await t():t,He);let L,B;function U(){isFinite(s)&&s>0&&(clearTimeout(B),B=setTimeout(()=>{m.readyState===W.OPEN&&(m.send(z({type:j.Ping})),E.emit("ping",!1,void 0))},s))}te(S=>{D=void 0,clearTimeout(L),clearTimeout(B),$(S),S instanceof ce&&(m.close(4499,"Terminated"),m.onerror=null,m.onclose=null)}),m.onerror=S=>E.emit("error",S),m.onclose=S=>E.emit("closed",S),m.onopen=async()=>{try{E.emit("opened",m);const S=typeof n=="function"?await n():n;if(m.readyState!==W.OPEN)return;m.send(z(S?{type:j.ConnectionInit,payload:S}:{type:j.ConnectionInit},N)),isFinite(l)&&l>0&&(L=setTimeout(()=>{m.close(O.ConnectionAcknowledgementTimeout,"Connection acknowledgement timeout")},l)),U()}catch(S){E.emit("error",S),m.close(O.InternalClientError,ae(S instanceof Error?S.message:String(S),"Internal client error"))}};let M=!1;m.onmessage=({data:S})=>{try{const w=Ve(S,_);if(E.emit("message",w),w.type==="ping"||w.type==="pong"){E.emit(w.type,!0,w.payload),w.type==="pong"?U():a||(m.send(z(w.payload?{type:j.Pong,payload:w.payload}:{type:j.Pong})),E.emit("pong",!1,w.payload));return}if(M)return;if(w.type!==j.ConnectionAck)throw new Error(`First message cannot be of type ${w.type}`);clearTimeout(L),M=!0,E.emit("connected",m,w.payload,K),K=!1,J=0,g([m,new Promise((ve,be)=>te(be))])}catch(w){m.onmessage=null,E.emit("error",w),m.close(O.BadResponse,ae(w instanceof Error?w.message:String(w),"Bad response"))}}})())));y.readyState===W.CLOSING&&await b;let u=()=>{};const d=new Promise(g=>u=g);return[y,u,Promise.race([d.then(()=>{if(!F){const g=()=>y.close(1e3,"Normal Closure");isFinite(i)&&i>0?re=setTimeout(()=>{y.readyState===W.OPEN&&g()},i):g()}}),b])]}function ie(y){if(X(y)&&(Ye(y.code)||[O.InternalServerError,O.InternalClientError,O.BadRequest,O.BadResponse,O.Unauthorized,O.SubprotocolNotAcceptable,O.SubscriberAlreadyExists,O.TooManyInitialisationRequests].includes(y.code)))throw y;if(ne)return!1;if(X(y)&&y.code===1e3)return F>0;if(!f||J>=f||!h(y))throw y;return K=!0}r||(async()=>{for(F++;;)try{const[,,y]=await oe();await y}catch(y){try{if(!ie(y))return}catch(b){return o==null?void 0:o(b)}}})();function se(y,b){const u=R(y);let d=!1,g=!1,$=()=>{F--,d=!0};return(async()=>{for(F++;;)try{const[m,L,B]=await oe();if(d)return L();const U=E.onMessage(u,M=>{switch(M.type){case j.Next:{b.next(M.payload);return}case j.Error:{g=!0,d=!0,b.error(M.payload),$();return}case j.Complete:{d=!0,$();return}}});m.send(z({id:u,type:j.Subscribe,payload:y},N)),$=()=>{!d&&m.readyState===W.OPEN&&m.send(z({id:u,type:j.Complete},N)),F--,d=!0,L()},await B.finally(U);return}catch(m){if(!ie(m))return}})().then(()=>{g||b.complete()}).catch(m=>{b.error(m)}),()=>{d||$()}}return{on:E.on,subscribe:se,iterate(y){const b=[],u={done:!1,error:null,resolve:()=>{}},d=se(y,{next($){b.push($),u.resolve()},error($){u.done=!0,u.error=$,u.resolve()},complete(){u.done=!0,u.resolve()}}),g=async function*(){for(;;){for(b.length||await new Promise(m=>u.resolve=m);b.length;)yield b.shift();if(u.error)throw u.error;if(u.done)return}}();return g.throw=async $=>(u.done||(u.done=!0,u.error=$,u.resolve()),{done:!0,value:void 0}),g.return=async()=>(d(),{done:!0,value:void 0}),g},async dispose(){if(ne=!0,D){const[y]=await D;y.close(1e3,"Normal Closure")}},terminate(){D&&E.emit("closed",new ce)}}}class ce extends Error{constructor(){super(...arguments);P(this,"name","TerminatedCloseEvent");P(this,"message","4499: Terminated");P(this,"code",4499);P(this,"reason","Terminated");P(this,"wasClean",!1)}}function X(e){return q(e)&&"code"in e&&"reason"in e}function Ye(e){return[1e3,1001,1006,1005,1012,1013,1014].includes(e)?!1:e>=1e3&&e<=1999}function Ze(e){return typeof e=="function"&&"constructor"in e&&"CLOSED"in e&&"CLOSING"in e&&"CONNECTING"in e&&"OPEN"in e}const tt=new Ue({url:window.location.protocol+"//"+window.location.host+"/api/ui/graphql",plugins:[qe(()=>Xe({url:(window.location.protocol=="http:"?"ws:":"wss:")+"//"+window.location.host+"/graphql"}))]});export{tt as default};
