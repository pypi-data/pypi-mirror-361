"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([["59544"],{86420:function(t,i,e){e.d(i,{D:function(){return a}});e(20655);const a=t=>{var i;return null===(i=t.name)||void 0===i?void 0:i.trim()}},39800:function(t,i,e){e.d(i,{Z:function(){return n}});e(40777),e(15519),e(64455),e(26086),e(6202);var a=function(t){var i=parseFloat(t);if(isNaN(i))throw new Error("".concat(t," is not a number"));return i};function n(t){if(!t)return null;try{if(t.endsWith("%"))return{w:100,h:a(t.substr(0,t.length-1))};var i=t.replace(":","x").split("x");return 0===i.length?null:1===i.length?{w:a(i[0]),h:1}:{w:a(i[0]),h:a(i[1])}}catch(e){}return null}},91823:function(t,i,e){var a,n,r,o=e(54982),s=e(54521),c=e(4490),l=e(20129),u=e(85297),d=(e(12212),e(25718),e(73742)),h=e(59048),f=e(7616),p=e(20480),v=e(39800),_=function(t){function i(){var t;(0,s.Z)(this,i);for(var e=arguments.length,a=new Array(e),n=0;n<e;n++)a[n]=arguments[n];return(t=(0,l.Z)(this,i,[].concat(a)))._ratio=null,t}return(0,u.Z)(i,t),(0,c.Z)(i,[{key:"willUpdate",value:function(t){(t.has("aspect_ratio")||null===this._ratio)&&(this._ratio=this.aspectRatio?(0,v.Z)(this.aspectRatio):null,(null===this._ratio||this._ratio.w<=0||this._ratio.h<=0)&&(this._ratio=(0,v.Z)("16:9")))}},{key:"render",value:function(){return this.aspectRatio?(0,h.dy)(n||(n=(0,o.Z)([' <div class="ratio" style="','"> <slot></slot> </div> '])),(0,p.V)({paddingBottom:"".concat((100*this._ratio.h/this._ratio.w).toFixed(2),"%")})):(0,h.dy)(a||(a=(0,o.Z)(["<slot></slot>"])))}}])}(h.oi);_.styles=(0,h.iv)(r||(r=(0,o.Z)([".ratio ::slotted(*){position:absolute;top:0;left:0;width:100%;height:100%}"]))),(0,d.__decorate)([(0,f.Cb)({type:String,attribute:"aspect-ratio"})],_.prototype,"aspectRatio",void 0),_=(0,d.__decorate)([(0,f.Mo)("ha-aspect-ratio")],_)},44066:function(t,i,e){e.a(t,async function(t,a){try{e.r(i),e.d(i,{DEFAULT_ASPECT_RATIO:function(){return T},DEVICE_CLASSES:function(){return U},HuiAreaCard:function(){return $}});var n,r,o,s,c,l,u,d,h,f,p,v,_,g=e(29694),y=e(75778),m=e(54982),b=e(54521),x=e(4490),w=e(20129),Z=e(85297),k=(e(40777),e(12212),e(25518),e(70021),e(39710),e(26847),e(24819),e(2394),e(44438),e(69643),e(81738),e(94814),e(29981),e(6989),e(93190),e(7175),e(96821),e(87799),e(24533),e(54480),e(69920),e(1455),e(56389),e(48694),e(27530),e(73742)),C=e(59048),S=e(7616),A=e(25191),E=e(20480),L=e(28105),j=e(34394),z=e(40141),B=e(86420),D=e(68626),O=e(67050),V=e(28598),H=e(27417),I=e(39800),M=(e(91823),e(31138),e(56712),e(58239),e(38255)),P=(e(46358),e(82601),e(993),e(97822),e(97985),e(484),e(16230)),R=e(91915),F=e(76815),N=t([M,R,V]);[M,R,V]=N.then?(await N)():N;var T="16:9",U={sensor:["temperature","humidity"],binary_sensor:["motion","moisture"]},$=function(t){function i(){var t;(0,b.Z)(this,i);for(var e=arguments.length,a=new Array(e),n=0;n<e;n++)a[n]=arguments[n];return(t=(0,w.Z)(this,i,[].concat(a)))._featureContext={},t._ratio=null,t._groupEntitiesByDeviceClass=function(i){return i.reduce(function(i,e){var a=t.hass.states[e],n=a.attributes.device_class;return i.has(n)||i.set(n,[]),i.get(n).push(a.entity_id),i},new Map)},t._groupedSensorEntityIds=(0,L.Z)(function(i,e,a,n){var r=(0,D.$)(t.hass,{area:e,entity_category:"none",domain:"sensor",device_class:a}),o=Object.keys(i).filter(function(t){return r(t)&&!(null!=n&&n.includes(t))});return t._groupEntitiesByDeviceClass(o)}),t._groupedBinarySensorEntityIds=(0,L.Z)(function(i,e,a,n){var r=(0,D.$)(t.hass,{area:e,entity_category:"none",domain:"binary_sensor",device_class:a}),o=Object.keys(i).filter(function(t){return r(t)&&!(null!=n&&n.includes(t))});return t._groupEntitiesByDeviceClass(o)}),t._getCameraEntity=(0,L.Z)(function(i,e){var a=(0,D.$)(t.hass,{area:e,entity_category:"none",domain:"camera"}),n=Object.keys(i).filter(a);return n.length>0?n[0]:void 0}),t._featurePosition=(0,L.Z)(function(t){return t.features_position||"bottom"}),t._displayedFeatures=(0,L.Z)(function(i){var e=i.features||[];return"inline"===t._featurePosition(i)?e.slice(0,1):e}),t}return(0,Z.Z)(i,t),(0,x.Z)(i,[{key:"setConfig",value:function(t){if(!t.area)throw new Error("Specify an area");var i=t.display_type||(t.show_camera?"camera":"picture");this._config=Object.assign(Object.assign({},t),{},{display_type:i}),this._featureContext={area_id:t.area,exclude_entities:t.exclude_entities}}},{key:"getCardSize",value:function(){var t,i,e=this._config&&this._featurePosition(this._config),a=(null===(t=this._config)||void 0===t?void 0:t.display_type)||"picture",n=(null===(i=this._config)||void 0===i||null===(i=i.features)||void 0===i?void 0:i.length)||0;return 1+("compact"===a?0:2)+("inline"===e?0:n)}},{key:"getGridOptions",value:function(){var t,i,e=6,a=1,n=this._config?this._featurePosition(this._config):"bottom",r=(null===(t=this._config)||void 0===t||null===(t=t.features)||void 0===t?void 0:t.length)||0;return r&&("inline"===n?e=12:a+=r),"compact"!==((null===(i=this._config)||void 0===i?void 0:i.display_type)||"picture")&&(a+=2),{columns:6,rows:a,min_columns:e,min_rows:a}}},{key:"_hasCardAction",get:function(){var t;return null===(t=this._config)||void 0===t?void 0:t.navigation_path}},{key:"_handleAction",value:function(){var t;null!==(t=this._config)&&void 0!==t&&t.navigation_path&&(0,O.c)(this._config.navigation_path)}},{key:"_computeActiveAlertStates",value:function(){var t,i,e,a=this,n=null===(t=this._config)||void 0===t?void 0:t.area,r=n?this.hass.areas[n]:void 0,o=null===(i=this._config)||void 0===i?void 0:i.alert_classes,s=null===(e=this._config)||void 0===e?void 0:e.exclude_entities;if(!r||!o)return[];var c=this._groupedBinarySensorEntityIds(this.hass.entities,r.area_id,o,s);return o.map(function(t){var i=c.get(t)||[];return i?i.map(function(t){return a.hass.states[t]}).filter(function(t){return(null==t?void 0:t.state)===z.uo}):[]}).filter(function(t){return t.length>0}).map(function(t){return t[0]})}},{key:"_renderAlertSensorBadge",value:function(){var t=this._computeActiveAlertStates();if(0===t.length)return C.Ld;var i=t[0];return(0,C.dy)(n||(n=(0,m.Z)([' <ha-tile-badge class="alert-badge"> <ha-state-icon .hass="','" .stateObj="','"></ha-state-icon> </ha-tile-badge> '])),this.hass,i)}},{key:"_renderAlertSensors",value:function(){var t=this,i=this._computeActiveAlertStates();return 0===i.length?C.Ld:(0,C.dy)(r||(r=(0,m.Z)([' <div class="alerts"> '," </div> "])),i.map(function(i){return(0,C.dy)(o||(o=(0,m.Z)([' <div class="alert"> <ha-state-icon .hass="','" .stateObj="','"></ha-state-icon> </div> '])),t.hass,i)}))}},{key:"_computeSensorsDisplay",value:function(){var t,i,e,a=this,n=null===(t=this._config)||void 0===t?void 0:t.area,r=n?this.hass.areas[n]:void 0,o=null===(i=this._config)||void 0===i?void 0:i.sensor_classes,s=null===(e=this._config)||void 0===e?void 0:e.exclude_entities;if(r&&o){var c=this._groupedSensorEntityIds(this.hass.entities,r.area_id,o,s);return o.map(function(t){var i;if("temperature"===t&&r.temperature_entity_id){var e=a.hass.states[r.temperature_entity_id];return!e||(0,P.rk)(e.state)?"":a.hass.formatEntityState(e)}if("humidity"===t&&r.humidity_entity_id){var n=a.hass.states[r.humidity_entity_id];return!n||(0,P.rk)(n.state)?"":a.hass.formatEntityState(n)}var o=c.get(t);if(o){var s=o.map(function(t){return a.hass.states[t]}).filter(Boolean);if(0!==s.length){if(1===s.length){var l=s[0];return(0,P.rk)(l.state)?"":a.hass.formatEntityState(l)}var u=null===(i=s.find(function(t){return t.attributes.unit_of_measurement}))||void 0===i?void 0:i.attributes.unit_of_measurement,d=s.filter(function(t){return t.attributes.unit_of_measurement===u&&(0,V.SL)(t)&&!isNaN(Number(t.state))});if(0!==d.length){var h=d.reduce(function(t,i){return t+Number(i.state)},0)/d.length,f=(0,V.uf)(h,a.hass.locale,{maximumFractionDigits:1}),p=u?"".concat((0,H.L)(u,a.hass.locale)).concat(u):"";return"".concat(f).concat(p)}}}}).filter(Boolean).join(" Â· ")}}},{key:"willUpdate",value:function(t){var i,e;(t.has("_config")||null===this._ratio)&&(this._ratio=null!==(i=this._config)&&void 0!==i&&i.aspect_ratio?(0,I.Z)(null===(e=this._config)||void 0===e?void 0:e.aspect_ratio):null,(null===this._ratio||this._ratio.w<=0||this._ratio.h<=0)&&(this._ratio=(0,I.Z)(T)))}},{key:"render",value:function(){var t;if(!this._config||!this.hass)return C.Ld;var i=null===(t=this._config)||void 0===t?void 0:t.area,e=i?this.hass.areas[i]:void 0;if(!e)return(0,C.dy)(s||(s=(0,m.Z)([' <hui-warning .hass="','"> '," </hui-warning> "])),this.hass,this.hass.localize("ui.card.area.area_not_found"));var a=e.icon,n=this._config.name||(0,B.D)(e),r=this._computeSensorsDisplay(),o=this._featurePosition(this._config),_=this._displayedFeatures(this._config),g="inline"===o?"horizontal":"",y=this._config.display_type||"picture",b="camera"===y?this._getCameraEntity(this.hass.entities,e.area_id):void 0,x="grid"===this.layout||"panel"===this.layout,w={"--tile-color":this._config.color?(0,j.I)(this._config.color):void 0};return(0,C.dy)(c||(c=(0,m.Z)([' <ha-card style="','"> <div class="background" @action="','" .actionHandler="','" role="','" tabindex="','" aria-labelledby="info"> <ha-ripple .disabled="','"></ha-ripple> </div> ',' <div class="container ','"> <div class="content"> <ha-tile-icon> '," ",' </ha-tile-icon> <ha-tile-info id="info" .primary="','" .secondary="','"></ha-tile-info> </div> '," </div> </ha-card> "])),(0,E.V)(w),this._handleAction,(0,F.K)(),(0,A.o)(this._hasCardAction?"button":void 0),(0,A.o)(this._hasCardAction?"0":void 0),!this._hasCardAction,"compact"===y?C.Ld:(0,C.dy)(l||(l=(0,m.Z)([' <div class="header"> <div class="picture"> '," </div> "," </div> "])),"picture"!==y&&"camera"!==y||!b&&!e.picture?(0,C.dy)(d||(d=(0,m.Z)([' <ha-aspect-ratio .aspectRatio="','"> <div class="icon-container"> '," </div> </ha-aspect-ratio> "])),x?void 0:this._config.aspect_ratio||T,e.icon?(0,C.dy)(h||(h=(0,m.Z)(['<ha-icon .icon="','"></ha-icon>'])),e.icon):C.Ld):(0,C.dy)(u||(u=(0,m.Z)([' <hui-image .cameraImage="','" .cameraView="','" .image="','" .hass="','" fit-mode="cover" .aspectRatio="','"></hui-image> '])),b,this._config.camera_view,e.picture?e.picture:void 0,this.hass,x?void 0:this._config.aspect_ratio||T),this._renderAlertSensors()),g,"compact"===y?this._renderAlertSensorBadge():C.Ld,a?(0,C.dy)(f||(f=(0,m.Z)(['<ha-icon slot="icon" .icon="','"></ha-icon>'])),a):(0,C.dy)(p||(p=(0,m.Z)([' <ha-svg-icon slot="icon" .path="','"></ha-svg-icon> '])),"M20 2H4C2.9 2 2 2.9 2 4V20C2 21.11 2.9 22 4 22H20C21.11 22 22 21.11 22 20V4C22 2.9 21.11 2 20 2M4 6L6 4H10.9L4 10.9V6M4 13.7L13.7 4H18.6L4 18.6V13.7M20 18L18 20H13.1L20 13.1V18M20 10.3L10.3 20H5.4L20 5.4V10.3Z"),n,r,_.length>0?(0,C.dy)(v||(v=(0,m.Z)([' <hui-card-features .hass="','" .context="','" .color="','" .features="','" .position="','"></hui-card-features> '])),this.hass,this._featureContext,this._config.color,_,o):C.Ld)}}],[{key:"getConfigElement",value:(_=(0,y.Z)((0,g.Z)().m(function t(){return(0,g.Z)().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,Promise.all([e.e("49170"),e.e("98609")]).then(e.bind(e,91648));case 1:return t.a(2,document.createElement("hui-area-card-editor"))}},t)})),function(){return _.apply(this,arguments)})},{key:"getStubConfig",value:(a=(0,y.Z)((0,g.Z)().m(function t(i){var e,a;return(0,g.Z)().w(function(t){for(;;)if(0===t.n)return a=Object.values(i.areas),t.a(2,{type:"area",area:(null===(e=a[0])||void 0===e?void 0:e.area_id)||""})},t)})),function(t){return a.apply(this,arguments)})}]);var a,_}(C.oi);$.styles=(0,C.iv)(_||(_=(0,m.Z)([':host{--tile-color:var(--state-icon-color);-webkit-tap-highlight-color:transparent}ha-card:has(.background:focus-visible){--shadow-default:var(--ha-card-box-shadow, 0 0 0 0 transparent);--shadow-focus:0 0 0 1px var(--tile-color);border-color:var(--tile-color);box-shadow:var(--shadow-default),var(--shadow-focus)}ha-card{--ha-ripple-color:var(--tile-color);--ha-ripple-hover-opacity:0.04;--ha-ripple-pressed-opacity:0.12;height:100%;transition:box-shadow 180ms ease-in-out,border-color 180ms ease-in-out;display:flex;flex-direction:column;justify-content:space-between}[role=button]{cursor:pointer;pointer-events:auto}[role=button]:focus{outline:0}.background{position:absolute;top:0;left:0;bottom:0;right:0;border-radius:var(--ha-card-border-radius,12px);margin:calc(-1 * var(--ha-card-border-width,1px));overflow:hidden}.header{flex:1;overflow:hidden;border-radius:var(--ha-card-border-radius,12px);border-end-end-radius:0;border-end-start-radius:0;pointer-events:none}.picture{height:100%;width:100%;background-size:cover;background-position:center;position:relative}.picture hui-image{height:100%}.picture .icon-container{height:100%;width:100%;display:flex;align-items:center;justify-content:center;--mdc-icon-size:48px;color:var(--tile-color)}.picture .icon-container::before{position:absolute;content:"";width:100%;height:100%;background-color:var(--tile-color);opacity:.12}.container{margin:calc(-1 * var(--ha-card-border-width,1px));display:flex;flex-direction:column;flex:1}.header+.container{height:auto;flex:none}.container.horizontal{flex-direction:row}.content{position:relative;display:flex;flex-direction:row;align-items:center;padding:10px;flex:1;min-width:0;box-sizing:border-box;pointer-events:none;gap:10px}ha-tile-icon{--tile-icon-color:var(--tile-color);position:relative;padding:6px;margin:-6px}ha-tile-badge{position:absolute;top:3px;right:3px;inset-inline-end:3px;inset-inline-start:initial}ha-tile-info{position:relative;min-width:0;transition:background-color 180ms ease-in-out;box-sizing:border-box}hui-card-features{--feature-color:var(--tile-color);padding:0 12px 12px 12px}.container.horizontal hui-card-features{width:calc(50% - var(--column-gap,0px)/ 2 - 12px);flex:none;--feature-height:36px;padding:0 12px;padding-inline-start:0}.alert-badge{--tile-badge-background-color:var(--orange-color)}.alerts{position:absolute;top:0;left:0;display:flex;flex-direction:row;gap:8px;padding:8px;pointer-events:none;z-index:1}.alert{background-color:var(--orange-color);border-radius:12px;width:24px;height:24px;padding:2px;box-sizing:border-box;--mdc-icon-size:16px;display:flex;align-items:center;justify-content:center;color:#fff}']))),(0,k.__decorate)([(0,S.Cb)({attribute:!1})],$.prototype,"hass",void 0),(0,k.__decorate)([(0,S.Cb)({attribute:!1})],$.prototype,"layout",void 0),(0,k.__decorate)([(0,S.SB)()],$.prototype,"_config",void 0),(0,k.__decorate)([(0,S.SB)()],$.prototype,"_featureContext",void 0),$=(0,k.__decorate)([(0,S.Mo)("hui-area-card")],$),a()}catch(G){a(G)}})}}]);
//# sourceMappingURL=59544.c4d3d82c52134f9c.js.map