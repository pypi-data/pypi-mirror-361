"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([["90749"],{5496:function(t,e,i){i.d(e,{Z:function(){return o}});i(12212),i(70820);var a=function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,i=""+t,a=1;a<e;a++)i=parseInt(i)<Math.pow(10,a)?"0".concat(i):i;return i};function o(t){var e=Math.floor(t/1e3/3600),i=Math.floor(t/1e3%3600/60),o=Math.floor(t/1e3%3600%60),n=Math.floor(t%1e3);return e>0?"".concat(e,":").concat(a(i),":").concat(a(o)):i>0?"".concat(i,":").concat(a(o)):o>0||n>0?"".concat(o).concat(n>0?".".concat(a(n,3)):""):null}},89868:function(t,e,i){i.d(e,{i:function(){return n}});var a=i(61943),o=(i(40777),i(87799),i(96389),(0,i(40645).P)(function(t){history.replaceState({scrollPosition:t},"")},300));function n(t){return function(e,i){if("object"===(0,a.Z)(i))throw new Error("This decorator does not support this compilation type.");var n=e.connectedCallback;e.connectedCallback=function(){var e=this;n.call(this);var a=this[i];a&&this.updateComplete.then(function(){var i=e.renderRoot.querySelector(t);i&&setTimeout(function(){i.scrollTop=a},0)})};var r,s=Object.getOwnPropertyDescriptor(e,i);if(void 0===s)r={get:function(){var t;return this["__".concat(String(i))]||(null===(t=history.state)||void 0===t?void 0:t.scrollPosition)},set:function(t){o(t),this["__".concat(String(i))]=t},configurable:!0,enumerable:!0};else{var c=s.set;r=Object.assign(Object.assign({},s),{},{set:function(t){o(t),this["__".concat(String(i))]=t,null==c||c.call(this,t)}})}Object.defineProperty(e,i,r)}}},76121:function(t,e,i){i.a(t,async function(t,e){try{var a,o=i(75706),n=i(54982),r=i(54521),s=i(4490),c=i(67063),h=i(20129),d=i(85297),l=(i(12212),i(70021),i(26847),i(24819),i(2394),i(81738),i(29981),i(22960),i(72489),i(27427),i(96821),i(32396),i(54480),i(15519),i(11353),i(67886),i(65451),i(46015),i(38334),i(94880),i(75643),i(29761),i(48694),i(67398),i(27530),i(73742)),u=i(59048),p=i(7616),m=i(20480),_=i(55815),y=i(97050),v=i(37008),f=i(74266),g=i(28598),b=i(3901),x=i(39884),w=i(30570),T=i(27417),C=t([f,g,v]);[f,g,v]=C.then?(await C)():C;var D=function(t){var e=parseFloat(t);return isFinite(e)?e:null},Y=function(t){function e(){var t;(0,r.Z)(this,e);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return(t=(0,h.Z)(this,e,[].concat(a))).data=[],t.showNames=!0,t.clickForMoreInfo=!0,t.paddingYAxis=0,t.logarithmicScale=!1,t.fitYData=!1,t._chartData=[],t._entityIds=[],t._datasetToDataIndex=[],t._hiddenStats=new Set,t._yWidth=25,t._chartTime=new Date,t._previousYAxisLabelValue=0,t._renderTooltip=function(e){var i=e[0].axisValue,a=(0,f.E8)(new Date(i),t.hass.locale,t.hass.config)+"<br>",o=[];t._chartData.forEach(function(a,n){var r;if(!1!==(null===(r=a.tooltip)||void 0===r?void 0:r.show)&&!t._hiddenStats.has(a.name)){var s=e.find(function(t){return t.seriesIndex===n});if(s)o.push(s);else{for(var c,h=a.data||[],d=h.length-1;d>=0;d--){var l=h[d];if(l&&l[0]<=i&&"number"==typeof l[1]){c=l;break}}c&&o.push({seriesName:a.name,seriesIndex:n,value:c,marker:'<span style="display:inline-block;margin-right:4px;margin-inline-end:4px;margin-inline-start:initial;border-radius:10px;width:10px;height:10px;background-color:'.concat(a.color,';"></span>')})}}});var n=t.unit?"".concat((0,T.L)(t.unit,t.hass.locale)).concat(t.unit):"";return a+o.map(function(e){var i=t._entityIds[e.seriesIndex],a=t.hass.states[i],o=t.hass.entities[i],r=String(e.value[1]),s=a?t.hass.formatEntityState(a,r):"".concat((0,g.uf)(r,t.hass.locale,(0,g.l4)(void 0,o))).concat(n),c=t._datasetToDataIndex[e.seriesIndex],h=t.data[c];h.statistics&&h.statistics.length>0&&(s+="<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;",s+=0===h.states.length||e.value[0]<h.states[0].last_changed?"".concat(t.hass.localize("ui.components.history_charts.source_stats")):"".concat(t.hass.localize("ui.components.history_charts.source_history")));return e.seriesName?"".concat(e.marker," ").concat(e.seriesName,": ").concat(s):"".concat(e.marker," ").concat(s)}).join("<br>")},t._formatYAxisLabel=function(e){var i=Math.max(1,-Math.floor(Math.log10(Math.abs(e-t._previousYAxisLabelValue||1)))),a=(0,g.uf)(e,t.hass.locale,{maximumFractionDigits:i}),o=(0,b.U)(a,12)+5;return o>t._yWidth&&(t._yWidth=o,(0,x.B)((0,c.Z)(t),"y-width-changed",{value:t._yWidth,chartIndex:t.chartIndex})),t._previousYAxisLabelValue=e,a},t}return(0,d.Z)(e,t),(0,s.Z)(e,[{key:"render",value:function(){return(0,u.dy)(a||(a=(0,n.Z)([' <ha-chart-base .hass="','" .data="','" .options="','" .height="','" style="','" @dataset-hidden="','" @dataset-unhidden="','" .expandLegend="','"></ha-chart-base> '])),this.hass,this._chartData,this._chartOptions,this.height,(0,m.V)({height:this.height}),this._datasetHidden,this._datasetUnhidden,this.expandLegend)}},{key:"_datasetHidden",value:function(t){this._hiddenStats.add(t.detail.name)}},{key:"_datasetUnhidden",value:function(t){this._hiddenStats.delete(t.detail.name)}},{key:"willUpdate",value:function(t){var e=this;if((t.has("data")||t.has("startTime")||t.has("endTime")||this._chartTime<new Date(this.endTime.getTime()-v.Q))&&this._generateData(),!this.hasUpdated||t.has("showNames")||t.has("startTime")||t.has("endTime")||t.has("unit")||t.has("logarithmicScale")||t.has("minYAxis")||t.has("maxYAxis")||t.has("fitYData")||t.has("paddingYAxis")||t.has("_visualMap")||t.has("_yWidth")){var i=(0,y.HE)(this.hass),a=this.minYAxis,o=this.maxYAxis;"number"==typeof a?this.fitYData&&(a=function(t){var i=t.min;return Math.min(e._roundYAxis(i,Math.floor),e.minYAxis)}):this.logarithmicScale&&(a=function(t){var i=t.min,a=i>0?.95*i:1.05*i;return e._roundYAxis(a,Math.floor)}),"number"==typeof o?this.fitYData&&(o=function(t){var i=t.max;return Math.max(e._roundYAxis(i,Math.ceil),e.maxYAxis)}):this.logarithmicScale&&(o=function(t){var i=t.max,a=i>0?1.05*i:.95*i;return e._roundYAxis(a,Math.ceil)}),this._chartOptions={xAxis:{type:"time",min:this.startTime,max:this.endTime},yAxis:{type:this.logarithmicScale?"log":"value",name:this.unit,min:this._clampYAxis(a),max:this._clampYAxis(o),position:i?"right":"left",scale:!0,nameGap:2,nameTextStyle:{align:"left"},axisLine:{show:!1},axisLabel:{margin:5,formatter:this._formatYAxisLabel}},legend:{type:"custom",show:this.showNames},grid:{top:15,left:i?1:Math.max(this.paddingYAxis,this._yWidth),right:i?Math.max(this.paddingYAxis,this._yWidth):1,bottom:20},visualMap:this._visualMap,tooltip:{trigger:"axis",appendTo:document.body,formatter:this._renderTooltip}}}}},{key:"_generateData",value:function(){var t=this,e=0,i=getComputedStyle(this),a=this.data,n=[],r=[],s=[];if(0!==a.length){this._chartTime=new Date;var c=this.endTime,h=this.names||{};a.forEach(function(a,d){var l=a.domain,u=h[a.entity_id]||a.name,p=null,m=[],y=function(t,e){e&&(t>c||(m.forEach(function(i,a){null===e[a]&&p&&null!==p[a]&&i.data.push([t,p[a]]),i.data.push([t,e[a]])}),p=e))},v=function(t,o,n){var c=arguments.length>3&&void 0!==arguments[3]&&arguments[3];n||(n=(0,_.hZ)(e,i),e++),m.push({id:t,data:[],type:"line",cursor:"default",name:o,color:n,symbol:"circle",symbolSize:1,step:"end",sampling:"minmax",animationDurationUpdate:0,lineStyle:{width:c?0:1.5},areaStyle:c?{color:n+"7F"}:void 0,tooltip:{show:!c}}),r.push(a.entity_id),s.push(d)};if("thermostat"===l||"climate"===l||"water_heater"===l){var f=a.states.some(function(t){var e;return null===(e=t.attributes)||void 0===e?void 0:e.hvac_action}),g="climate"===l&&f?function(t){var e;return"heat"===w.hB[null===(e=t.attributes)||void 0===e?void 0:e.hvac_action]}:function(t){return"heat"===t.state},b="climate"===l&&f?function(t){var e;return"cool"===w.hB[null===(e=t.attributes)||void 0===e?void 0:e.hvac_action]}:function(t){return"cool"===t.state},x=a.states.some(g),T=a.states.some(b),C=a.states.some(function(t){return t.attributes&&t.attributes.target_temp_high!==t.attributes.target_temp_low});v(a.entity_id+"-current_temperature",t.showNames?t.hass.localize("ui.card.climate.current_temperature",{name:u}):t.hass.localize("component.climate.entity_component._.state_attributes.current_temperature.name")),x&&v(a.entity_id+"-heating",t.showNames?t.hass.localize("ui.card.climate.heating",{name:u}):t.hass.localize("component.climate.entity_component._.state_attributes.hvac_action.state.heating"),i.getPropertyValue("--state-climate-heat-color"),!0),T&&v(a.entity_id+"-cooling",t.showNames?t.hass.localize("ui.card.climate.cooling",{name:u}):t.hass.localize("component.climate.entity_component._.state_attributes.hvac_action.state.cooling"),i.getPropertyValue("--state-climate-cool-color"),!0),C?(v(a.entity_id+"-target_temperature_mode",t.showNames?t.hass.localize("ui.card.climate.target_temperature_mode",{name:u,mode:t.hass.localize("ui.card.climate.high")}):t.hass.localize("component.climate.entity_component._.state_attributes.target_temp_high.name")),v(a.entity_id+"-target_temperature_mode_low",t.showNames?t.hass.localize("ui.card.climate.target_temperature_mode",{name:u,mode:t.hass.localize("ui.card.climate.low")}):t.hass.localize("component.climate.entity_component._.state_attributes.target_temp_low.name"))):v(a.entity_id+"-target_temperature",t.showNames?t.hass.localize("ui.card.climate.target_temperature_entity",{name:u}):t.hass.localize("component.climate.entity_component._.state_attributes.temperature.name")),a.states.forEach(function(t){if(t.attributes){var e=D(t.attributes.current_temperature),i=[e];if(x&&i.push(g(t)?e:null),T&&i.push(b(t)?e:null),C){var a=D(t.attributes.target_temp_high),o=D(t.attributes.target_temp_low);i.push(a,o),y(new Date(t.last_changed),i)}else{var n=D(t.attributes.temperature);i.push(n),y(new Date(t.last_changed),i)}}})}else if("humidifier"===l){var Y=a.states.some(function(t){var e;return null===(e=t.attributes)||void 0===e?void 0:e.action}),k=a.states.some(function(t){var e;return null===(e=t.attributes)||void 0===e?void 0:e.current_humidity}),S=Y&&a.states.some(function(t){var e;return"humidifying"===(null===(e=t.attributes)||void 0===e?void 0:e.action)}),N=Y&&a.states.some(function(t){var e;return"drying"===(null===(e=t.attributes)||void 0===e?void 0:e.action)});v(a.entity_id+"-target_humidity",t.showNames?t.hass.localize("ui.card.humidifier.target_humidity_entity",{name:u}):t.hass.localize("component.humidifier.entity_component._.state_attributes.humidity.name")),k&&v(a.entity_id+"-current_humidity",t.showNames?t.hass.localize("ui.card.humidifier.current_humidity_entity",{name:u}):t.hass.localize("component.humidifier.entity_component._.state_attributes.current_humidity.name")),S?v(a.entity_id+"-humidifying",t.showNames?t.hass.localize("ui.card.humidifier.humidifying",{name:u}):t.hass.localize("component.humidifier.entity_component._.state_attributes.action.state.humidifying"),i.getPropertyValue("--state-humidifier-on-color"),!0):N?v(a.entity_id+"-drying",t.showNames?t.hass.localize("ui.card.humidifier.drying",{name:u}):t.hass.localize("component.humidifier.entity_component._.state_attributes.action.state.drying"),i.getPropertyValue("--state-humidifier-on-color"),!0):v(a.entity_id+"-on",t.showNames?t.hass.localize("ui.card.humidifier.on_entity",{name:u}):t.hass.localize("component.humidifier.entity_component._.state.on"),void 0,!0),a.states.forEach(function(t){var e;if(t.attributes){var i,a=D(t.attributes.humidity),o=k?D(null===(e=t.attributes)||void 0===e?void 0:e.current_humidity):a,n=[a];if(k&&n.push(o),S)n.push("humidifying"===(null===(i=t.attributes)||void 0===i?void 0:i.action)?o:null);else if(N){var r;n.push("drying"===(null===(r=t.attributes)||void 0===r?void 0:r.action)?o:null)}else n.push("on"===t.state?o:null);y(new Date(t.last_changed),n)}})}else{var z,A;v(a.entity_id,u);var M=null,I=function(t){var e=D(t.state),i=new Date(t.last_changed);if(null!==e&&M){var a,o=i.getTime(),n=M.getTime(),r=null===(a=A)||void 0===a?void 0:a.getTime();y(M,[(n-r)/(o-r)*(e-z)+z]),y(new Date(n+1),[null]),y(i,[e]),A=i,z=e,M=null}else null!==e&&null===M?(y(i,[e]),A=i,z=e):null===e&&null===M&&void 0!==z&&(M=i)};if(a.statistics){var B,W=a.states&&0!==a.states.length?a.states[0].last_changed:0,Z=(0,o.Z)(a.statistics);try{for(Z.s();!(B=Z.n()).done;){var E=B.value;if(W&&E.last_changed>=W)break;I(E)}}catch(L){Z.e(L)}finally{Z.f()}}a.states.forEach(function(t){I(t)}),null!==M&&y(M,[null])}y(c,p),Array.prototype.push.apply(n,m)}),this._chartData=n,this._entityIds=r,this._datasetToDataIndex=s;var d=[];this._chartData.forEach(function(e,i){var a,o,n=t._datasetToDataIndex[i],r=t.data[n];if(r.statistics&&0!==r.statistics.length){var s=null!==(a=null===(o=r.states[0])||void 0===o?void 0:o.last_changed)&&void 0!==a?a:t.endTime.getTime();d.push({show:!1,seriesIndex:i,dimension:0,pieces:[{max:s-.01,colorAlpha:.5},{min:s,colorAlpha:1}]})}}),this._visualMap=d.length>0?d:void 0}}},{key:"_clampYAxis",value:function(t){if(this.logarithmicScale){if("number"==typeof t)return Math.max(t,Number.EPSILON);if("function"==typeof t)return function(e){return Math.max(t(e),Number.EPSILON)}}return t}},{key:"_roundYAxis",value:function(t,e){return Math.abs(t)<1?t:e(t)}}])}(u.oi);(0,l.__decorate)([(0,p.Cb)({attribute:!1})],Y.prototype,"hass",void 0),(0,l.__decorate)([(0,p.Cb)({attribute:!1})],Y.prototype,"data",void 0),(0,l.__decorate)([(0,p.Cb)({attribute:!1})],Y.prototype,"names",void 0),(0,l.__decorate)([(0,p.Cb)()],Y.prototype,"unit",void 0),(0,l.__decorate)([(0,p.Cb)()],Y.prototype,"identifier",void 0),(0,l.__decorate)([(0,p.Cb)({attribute:"show-names",type:Boolean})],Y.prototype,"showNames",void 0),(0,l.__decorate)([(0,p.Cb)({attribute:"click-for-more-info",type:Boolean})],Y.prototype,"clickForMoreInfo",void 0),(0,l.__decorate)([(0,p.Cb)({attribute:!1})],Y.prototype,"startTime",void 0),(0,l.__decorate)([(0,p.Cb)({attribute:!1})],Y.prototype,"endTime",void 0),(0,l.__decorate)([(0,p.Cb)({attribute:!1,type:Number})],Y.prototype,"paddingYAxis",void 0),(0,l.__decorate)([(0,p.Cb)({attribute:!1,type:Number})],Y.prototype,"chartIndex",void 0),(0,l.__decorate)([(0,p.Cb)({attribute:"logarithmic-scale",type:Boolean})],Y.prototype,"logarithmicScale",void 0),(0,l.__decorate)([(0,p.Cb)({attribute:!1,type:Number})],Y.prototype,"minYAxis",void 0),(0,l.__decorate)([(0,p.Cb)({attribute:!1,type:Number})],Y.prototype,"maxYAxis",void 0),(0,l.__decorate)([(0,p.Cb)({attribute:"fit-y-data",type:Boolean})],Y.prototype,"fitYData",void 0),(0,l.__decorate)([(0,p.Cb)({type:String})],Y.prototype,"height",void 0),(0,l.__decorate)([(0,p.Cb)({attribute:"expand-legend",type:Boolean})],Y.prototype,"expandLegend",void 0),(0,l.__decorate)([(0,p.SB)()],Y.prototype,"_chartData",void 0),(0,l.__decorate)([(0,p.SB)()],Y.prototype,"_entityIds",void 0),(0,l.__decorate)([(0,p.SB)()],Y.prototype,"_chartOptions",void 0),(0,l.__decorate)([(0,p.SB)()],Y.prototype,"_yWidth",void 0),(0,l.__decorate)([(0,p.SB)()],Y.prototype,"_visualMap",void 0),customElements.define("state-history-chart-line",Y),e()}catch(k){e(k)}})},11184:function(t,e,i){i.a(t,async function(t,e){try{var a,o,n=i(54982),r=i(54521),s=i(4490),c=i(20129),h=i(85297),d=(i(12212),i(70021),i(2394),i(81738),i(29981),i(22960),i(96821),i(87799),i(54480),i(67398),i(73742)),l=i(59048),u=i(7616),p=i(74266),m=i(5496),_=i(97050),y=i(37008),v=i(32483),f=i(68234),g=i(9763),b=i(45657),x=i(3901),w=i(39884),T=t([p,y]);[p,y]=T.then?(await T)():T;var C=function(t){function e(){var t;(0,r.Z)(this,e);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return(t=(0,c.Z)(this,e,[].concat(a))).data=[],t.narrow=!1,t.showNames=!0,t.clickForMoreInfo=!0,t.chunked=!1,t.paddingYAxis=0,t._chartData=[],t._yWidth=0,t._chartTime=new Date,t._renderItem=function(t,e){var i=e.value(0),a=e.coord([e.value(1),i]),o=e.coord([e.value(2),i]),n=t.coordSys,r=f.default.graphic.clipRectByRect({x:a[0],y:a[1]-10,width:o[0]-a[0],height:20},{x:n.x,y:n.y,width:n.width,height:n.height});if(!r)return null;var s={type:"rect",transition:"shape",shape:r,style:{fill:e.value(4)}},c=e.value(3);return(0,x.U)(c,12)<r.width-8?{type:"group",children:[s,{type:"text",style:Object.assign(Object.assign({},r),{},{x:r.x+4,text:c,fill:e.value(5),fontSize:12,lineHeight:r.height})}]}:s},t._renderTooltip=function(e){var i=Array.isArray(e)?e[0]:e,a=i.value,o=i.name,n=i.marker,r=i.seriesName,s=i.color,c=r?'<h4 style="text-align: center; margin: 0;">'.concat(r,"</h4>"):"",h=a[2]-a[1],d="".concat(t.hass.localize("ui.components.history_charts.duration"),": ").concat((0,m.Z)(h));return[c,[((0,_.HE)(t.hass)?'<span style="direction: rtl;display:inline-block;margin-right:4px;margin-inline-end:4px;border-radius:10px;width:10px;height:10px;background-color:'.concat(s,';"></span>'):n)+o,(0,p.E8)(new Date(a[1]),t.hass.locale,t.hass.config),(0,p.E8)(new Date(a[2]),t.hass.locale,t.hass.config),d].join("<br>")].join("")},t}return(0,h.Z)(e,t),(0,s.Z)(e,[{key:"render",value:function(){return(0,l.dy)(a||(a=(0,n.Z)([' <ha-chart-base .hass="','" .options="','" .height="','" .data="','" small-controls @chart-click="','"></ha-chart-base> '])),this.hass,this._chartOptions,"".concat(30*this.data.length+30,"px"),this._chartData,this._handleChartClick)}},{key:"willUpdate",value:function(t){(t.has("startTime")||t.has("endTime")||t.has("data")||this._chartTime<new Date(this.endTime.getTime()-y.Q))&&this._generateData(),(!this.hasUpdated||t.has("startTime")||t.has("endTime")||t.has("showNames")||t.has("paddingYAxis")||t.has("_yWidth"))&&this._createOptions()}},{key:"_createOptions",value:function(){var t=this,e=this.narrow,i=this.chunked||this.showNames,a=e?105:185,o=i?Math.max(this.paddingYAxis,this._yWidth):0,n=(0,_.HE)(this.hass);this._chartOptions={xAxis:{type:"time",min:this.startTime,max:this.endTime,axisTick:{show:!0},splitLine:{show:!1}},yAxis:{type:"category",inverse:!0,position:n?"right":"left",triggerEvent:!0,axisTick:{show:!1},axisLine:{show:!1},axisLabel:{show:i,width:o,overflow:"truncate",margin:5,formatter:function(e){var i,o=null===(i=t._chartData.find(function(t){return t.id===e}))||void 0===i?void 0:i.name,n=o?Math.min((0,x.U)(o,12)+5,a):0;return n>t._yWidth&&(t._yWidth=n,(0,w.B)(t,"y-width-changed",{value:t._yWidth,chartIndex:t.chartIndex})),o},hideOverlap:!0}},grid:{top:10,bottom:30,left:n?1:o,right:n?o:1},tooltip:{appendTo:document.body,formatter:this._renderTooltip}}}},{key:"_generateData",value:function(){var t=this,e=getComputedStyle(this),i=this.data;i||(i=[]),this._chartTime=new Date;var a=this.startTime,o=this.endTime,n=[],r=this.names||{};i.forEach(function(i){var s,c=null,h=null,d=a,l=t.showNames?r[i.entity_id]||i.name||i.entity_id:"",u=[];if(i.data.forEach(function(a){var n=a.state;if(n||(n=null),!(new Date(a.last_changed)>o))if(null===c)c=n,h=a.state_localize,d=new Date(a.last_changed);else if(n!==c){s=new Date(a.last_changed);var r=(0,v.U)(c,e,t.hass.states[i.entity_id]);u.push({value:[i.entity_id,d,s,h,r,(0,g.T2)((0,b.wK)(r))>.5?"#000":"#fff"],itemStyle:{color:r}}),c=n,h=a.state_localize,d=s}}),null!==c){var p=(0,v.U)(c,e,t.hass.states[i.entity_id]);u.push({value:[i.entity_id,d,o,h,p,(0,g.T2)((0,b.wK)(p))>.5?"#000":"#fff"],itemStyle:{color:p}})}n.push({id:i.entity_id,data:u,name:l,dimensions:["id","start","end","name","color","textColor"],type:"custom",encode:{x:[1,2],y:0,itemName:3},renderItem:t._renderItem})}),this._chartData=n}},{key:"_handleChartClick",value:function(t){if("axisLabel"===t.detail.targetType){var e=this._chartData[t.detail.dataIndex];e&&(0,w.B)(this,"hass-more-info",{entityId:e.id})}}}])}(l.oi);C.styles=(0,l.iv)(o||(o=(0,n.Z)(["ha-chart-base{--chart-max-height:none}"]))),(0,d.__decorate)([(0,u.Cb)({attribute:!1})],C.prototype,"hass",void 0),(0,d.__decorate)([(0,u.Cb)({attribute:!1})],C.prototype,"data",void 0),(0,d.__decorate)([(0,u.Cb)({type:Boolean})],C.prototype,"narrow",void 0),(0,d.__decorate)([(0,u.Cb)({attribute:!1})],C.prototype,"names",void 0),(0,d.__decorate)([(0,u.Cb)()],C.prototype,"unit",void 0),(0,d.__decorate)([(0,u.Cb)()],C.prototype,"identifier",void 0),(0,d.__decorate)([(0,u.Cb)({attribute:"show-names",type:Boolean})],C.prototype,"showNames",void 0),(0,d.__decorate)([(0,u.Cb)({attribute:"click-for-more-info",type:Boolean})],C.prototype,"clickForMoreInfo",void 0),(0,d.__decorate)([(0,u.Cb)({type:Boolean})],C.prototype,"chunked",void 0),(0,d.__decorate)([(0,u.Cb)({attribute:!1})],C.prototype,"startTime",void 0),(0,d.__decorate)([(0,u.Cb)({attribute:!1})],C.prototype,"endTime",void 0),(0,d.__decorate)([(0,u.Cb)({attribute:!1,type:Number})],C.prototype,"paddingYAxis",void 0),(0,d.__decorate)([(0,u.Cb)({attribute:!1,type:Number})],C.prototype,"chartIndex",void 0),(0,d.__decorate)([(0,u.SB)()],C.prototype,"_chartData",void 0),(0,d.__decorate)([(0,u.SB)()],C.prototype,"_chartOptions",void 0),(0,d.__decorate)([(0,u.SB)()],C.prototype,"_yWidth",void 0),C=(0,d.__decorate)([(0,u.Mo)("state-history-chart-timeline")],C),e()}catch(D){e(D)}})},96778:function(t,e,i){i.a(t,async function(t,e){try{var a,o,n,r,s,c,h,d,l,u=i(42385),p=i(54982),m=i(54521),_=i(4490),y=i(20129),v=i(85297),f=(i(12212),i(39710),i(26847),i(24819),i(2394),i(44438),i(81738),i(6989),i(93190),i(96821),i(54480),i(69920),i(27530),i(73742)),g=i(59048),b=i(7616),x=i(37528),w=i(89868),T=i(54643),C=i(76121),D=i(11184),Y=t([C,D]);[C,D]=Y.then?(await Y)():Y;var k=function(t){function e(){var t;(0,m.Z)(this,e);for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return(t=(0,y.Z)(this,e,[].concat(r))).narrow=!1,t.virtualize=!1,t.upToNow=!1,t.showNames=!0,t.clickForMoreInfo=!0,t.isLoadingData=!1,t.logarithmicScale=!1,t.fitYData=!1,t._maxYWidth=0,t._childYWidths=[],t._chartCount=0,t._renderHistoryItem=function(e,i){return e&&void 0!==i?Array.isArray(e)?(0,g.dy)(n||(n=(0,p.Z)(['<div class="entry-container timeline"> <state-history-chart-timeline .hass="','" .data="','" .startTime="','" .endTime="','" .showNames="','" .names="','" .narrow="','" .chunked="','" .paddingYAxis="','" .chartIndex="','" .clickForMoreInfo="','" @y-width-changed="','"></state-history-chart-timeline> </div> '])),t.hass,e,t._computedStartTime,t._computedEndTime,t.showNames,t.names,t.narrow,t.virtualize,t._maxYWidth,i,t.clickForMoreInfo,t._yWidthChanged):(0,g.dy)(o||(o=(0,p.Z)(['<div class="entry-container line"> <state-history-chart-line .hass="','" .unit="','" .data="','" .identifier="','" .showNames="','" .startTime="','" .endTime="','" .paddingYAxis="','" .names="','" .chartIndex="','" .clickForMoreInfo="','" .logarithmicScale="','" .minYAxis="','" .maxYAxis="','" .fitYData="','" @y-width-changed="','" .height="','" .expandLegend="','"></state-history-chart-line> </div> '])),t.hass,e.unit,e.data,e.identifier,t.showNames,t._computedStartTime,t._computedEndTime,t._maxYWidth,t.names,i,t.clickForMoreInfo,t.logarithmicScale,t.minYAxis,t.maxYAxis,t.fitYData,t._yWidthChanged,t.virtualize?void 0:t.height,t.expandLegend):(0,g.dy)(a||(a=(0,p.Z)([""])))},t}return(0,v.Z)(e,t),(0,_.Z)(e,[{key:"render",value:function(){var t=this;if(!(0,x.p)(this.hass,"history"))return(0,g.dy)(r||(r=(0,p.Z)(['<div class="info"> '," </div>"])),this.hass.localize("ui.components.history_charts.history_disabled"));if(this.isLoadingData&&!this.historyData)return(0,g.dy)(s||(s=(0,p.Z)(['<div class="info"> '," </div>"])),this.hass.localize("ui.components.history_charts.loading_history"));if(this._isHistoryEmpty())return(0,g.dy)(c||(c=(0,p.Z)(['<div class="info"> '," </div>"])),this.hass.localize("ui.components.history_charts.no_history_found"));var e,i,a=this.historyData.timeline.length?(this.virtualize?(e=this.historyData.timeline,i=10,e.reduce(function(t,e,a){var o=Math.floor(a/i);return t[o]||(t[o]=[]),t[o].push(e),t},[])):[this.historyData.timeline]).concat(this.historyData.line):this.historyData.line;return this._chartCount=a.length,this.virtualize?(0,g.dy)(h||(h=(0,p.Z)(['<div class="container ha-scrollbar" @scroll="','"> <lit-virtualizer scroller class="ha-scrollbar" .items="','" .renderItem="','"> </lit-virtualizer> </div>'])),this._saveScrollPos,a,this._renderHistoryItem):(0,g.dy)(d||(d=(0,p.Z)(["",""])),a.map(function(e,i){return t._renderHistoryItem(e,i)}))}},{key:"shouldUpdate",value:function(t){return(1!==t.size||!t.has("hass"))&&(1!==t.size||!t.has("_maxYWidth")||t.get("_maxYWidth")!==this._maxYWidth)}},{key:"willUpdate",value:function(t){if(this.hasUpdated||(0,T.o)(),(0,u.Z)(t.keys()).some(function(t){return!["_maxYWidth","_childYWidths","_chartCount"].includes(t)})){var e=new Date;if(this._computedEndTime=this.upToNow||!this.endTime||this.endTime>e?e:this.endTime,this.startTime)this._computedStartTime=this.startTime;else if(this.hoursToShow)this._computedStartTime=new Date((new Date).getTime()-3600*this.hoursToShow*1e3);else{var i,a,o,n,r=(null!==(i=null===(a=this.historyData)||void 0===a?void 0:a.timeline)&&void 0!==i?i:[]).reduce(function(t,e){return Math.min(t,new Date(e.data[0].last_changed).getTime())},(new Date).getTime());r=(null!==(o=null===(n=this.historyData)||void 0===n?void 0:n.line)&&void 0!==o?o:[]).reduce(function(t,e){return Math.min(t,e.data.reduce(function(t,e){return Math.min(t,new Date(e.states[0].last_changed).getTime())},t))},r),this._computedStartTime=new Date(r)}}}},{key:"updated",value:function(t){t.has("_chartCount")&&this._chartCount<this._childYWidths.length&&(this._childYWidths.length=this._chartCount,this._maxYWidth=Math.max.apply(Math,(0,u.Z)(Object.values(this._childYWidths)).concat([0])))}},{key:"_yWidthChanged",value:function(t){this._childYWidths[t.detail.chartIndex]=t.detail.value,this._maxYWidth=Math.max.apply(Math,(0,u.Z)(Object.values(this._childYWidths)).concat([0]))}},{key:"_isHistoryEmpty",value:function(){var t=!this.historyData||!this.historyData.timeline||!this.historyData.line||0===this.historyData.timeline.length&&0===this.historyData.line.length;return!this.isLoadingData&&t}},{key:"_saveScrollPos",value:function(t){this._savedScrollPos=t.target.scrollTop}}])}(g.oi);k.styles=(0,g.iv)(l||(l=(0,p.Z)([":host{display:flex;flex-direction:column;min-height:60px}:host([virtualize]){height:100%}.info{text-align:center;line-height:60px;color:var(--secondary-text-color)}.container{max-height:var(--history-max-height)}.entry-container{width:100%}.entry-container.line{flex:1;padding-top:8px;overflow:hidden}.entry-container:hover{z-index:1}:host([virtualize]) .entry-container{padding-left:1px;padding-right:1px;padding-inline-start:1px;padding-inline-end:1px}.entry-container.timeline:first-child{margin-top:var(--timeline-top-margin)}.entry-container:not(:first-child){border-top:2px solid var(--divider-color);margin-top:16px}.container,lit-virtualizer{height:100%;width:100%}lit-virtualizer{contain:size layout!important}state-history-chart-line,state-history-chart-timeline{width:100%}"]))),(0,f.__decorate)([(0,b.Cb)({attribute:!1})],k.prototype,"hass",void 0),(0,f.__decorate)([(0,b.Cb)({attribute:!1})],k.prototype,"historyData",void 0),(0,f.__decorate)([(0,b.Cb)({type:Boolean})],k.prototype,"narrow",void 0),(0,f.__decorate)([(0,b.Cb)({attribute:!1})],k.prototype,"names",void 0),(0,f.__decorate)([(0,b.Cb)({type:Boolean,reflect:!0})],k.prototype,"virtualize",void 0),(0,f.__decorate)([(0,b.Cb)({attribute:!1})],k.prototype,"endTime",void 0),(0,f.__decorate)([(0,b.Cb)({attribute:!1})],k.prototype,"startTime",void 0),(0,f.__decorate)([(0,b.Cb)({type:Boolean,attribute:"up-to-now"})],k.prototype,"upToNow",void 0),(0,f.__decorate)([(0,b.Cb)({attribute:!1,type:Number})],k.prototype,"hoursToShow",void 0),(0,f.__decorate)([(0,b.Cb)({attribute:"show-names",type:Boolean})],k.prototype,"showNames",void 0),(0,f.__decorate)([(0,b.Cb)({attribute:"click-for-more-info",type:Boolean})],k.prototype,"clickForMoreInfo",void 0),(0,f.__decorate)([(0,b.Cb)({attribute:"is-loading-data",type:Boolean})],k.prototype,"isLoadingData",void 0),(0,f.__decorate)([(0,b.Cb)({attribute:"logarithmic-scale",type:Boolean})],k.prototype,"logarithmicScale",void 0),(0,f.__decorate)([(0,b.Cb)({attribute:!1,type:Number})],k.prototype,"minYAxis",void 0),(0,f.__decorate)([(0,b.Cb)({attribute:!1,type:Number})],k.prototype,"maxYAxis",void 0),(0,f.__decorate)([(0,b.Cb)({attribute:"fit-y-data",type:Boolean})],k.prototype,"fitYData",void 0),(0,f.__decorate)([(0,b.Cb)({type:String})],k.prototype,"height",void 0),(0,f.__decorate)([(0,b.Cb)({attribute:"expand-legend",type:Boolean})],k.prototype,"expandLegend",void 0),(0,f.__decorate)([(0,b.SB)()],k.prototype,"_maxYWidth",void 0),(0,f.__decorate)([(0,b.SB)()],k.prototype,"_childYWidths",void 0),(0,f.__decorate)([(0,b.SB)()],k.prototype,"_chartCount",void 0),(0,f.__decorate)([(0,w.i)(".container")],k.prototype,"_savedScrollPos",void 0),(0,f.__decorate)([(0,b.hO)({passive:!0})],k.prototype,"_saveScrollPos",null),k=(0,f.__decorate)([(0,b.Mo)("state-history-charts")],k),e()}catch(S){e(S)}})},84447:function(t,e,i){i(26847),i(87799),i(27530);var a=i(73742),o=i(27885),n=i(67522),r=i(23533),s=i(7046),c=i(59048),h=i(7616);let d,l,u,p,m=t=>t;class _ extends o.g{renderOutline(){return this.filled?(0,c.dy)(d||(d=m`<span class="filled"></span>`)):super.renderOutline()}getContainerClasses(){return Object.assign(Object.assign({},super.getContainerClasses()),{},{active:this.active})}renderPrimaryContent(){return(0,c.dy)(l||(l=m` <span class="leading icon" aria-hidden="true"> ${0} </span> <span class="label">${0}</span> <span class="touch"></span> <span class="trailing leading icon" aria-hidden="true"> ${0} </span> `),this.renderLeadingIcon(),this.label,this.renderTrailingIcon())}renderTrailingIcon(){return(0,c.dy)(u||(u=m`<slot name="trailing-icon"></slot>`))}constructor(...t){super(...t),this.filled=!1,this.active=!1}}_.styles=[r.W,s.W,n.W,(0,c.iv)(p||(p=m`:host{--md-sys-color-primary:var(--primary-text-color);--md-sys-color-on-surface:var(--primary-text-color);--md-assist-chip-container-shape:var(
          --ha-assist-chip-container-shape,
          16px
        );--md-assist-chip-outline-color:var(--outline-color);--md-assist-chip-label-text-weight:400}.filled{display:flex;pointer-events:none;border-radius:inherit;inset:0;position:absolute;background-color:var(--ha-assist-chip-filled-container-color)}::slotted([slot=icon]),::slotted([slot=trailing-icon]){display:flex;--mdc-icon-size:var(--md-input-chip-icon-size, 18px);font-size:var(--_label-text-size)!important}.trailing.icon ::slotted(*),.trailing.icon svg{margin-inline-end:unset;margin-inline-start:var(--_icon-label-space)}::before{background:var(--ha-assist-chip-container-color,transparent);opacity:var(--ha-assist-chip-container-opacity, 1)}:where(.active)::before{background:var(--ha-assist-chip-active-container-color);opacity:var(--ha-assist-chip-active-container-opacity)}.label{font-family:var(--ha-font-family-body)}`))],(0,a.__decorate)([(0,h.Cb)({type:Boolean,reflect:!0})],_.prototype,"filled",void 0),(0,a.__decorate)([(0,h.Cb)({type:Boolean})],_.prototype,"active",void 0),_=(0,a.__decorate)([(0,h.Mo)("ha-assist-chip")],_)},68234:function(t,e,i){i.r(e);var a=i(6762),o=i(8066),n=i(56557),r=i(45476),s=i(8199),c=i(39061),h=i(84778),d=i(23066),l=i(80919),u=i(8657),p=i(94359),m=i(50332),_=i(19337),y=i(14152),v=i(77185),f=i(93407);a.D([n.N,r.N,s.N,c.N,h.N,d.N,l.N,u.N,p.N,m.N,y.T,v.z,f.N,_.N]),e.default=o},54643:function(t,e,i){i.d(e,{o:function(){return a}});i(26847),i(1455),i(27530);const a=async()=>{await Promise.all([i.e("59323"),i.e("24858")]).then(i.bind(i,23684))}},3901:function(t,e,i){i.d(e,{U:function(){return o}});var a;i(12212);function o(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Roboto, Noto, sans-serif";a||(a=document.createElement("canvas"));var o=a.getContext("2d");if(!o)return 0;o.font="".concat(e,"px ").concat(i);var n=o.measureText(t);return Math.ceil(Math.max(n.actualBoundingBoxRight+n.actualBoundingBoxLeft,n.width))}}}]);
//# sourceMappingURL=90749.92b12ddc67b6bd7e.js.map