[tool.poetry]
name = "airadar"
version = "0.10.0"
description = "Radar sdk"
authors = ["ProtectAI <community@protectai.com>"]
readme = "README.md"
packages = [{ include = "airadar" }]
license = ""
exclude = ["tests/*", "Makefile", "docs/*", "*.md", ".github/*", "mkdocs.yml", "package.json"]

[tool.poetry.dependencies]
python = ">=3.10,<3.13"
GitPython = "^3.1.41"
typing_extensions = "^4.0.0"
pydantic = ">=2.0.0"
docstring-parser = "0.16"
requests = "^2.32.3"
python-dotenv = "^1.0.0"
pyjwt = "^2.9.0"
google-cloud-storage = "^2.19.0"
cryptography = ">=44.0.1,<46.0.0"

[tool.poetry.group.test.dependencies]
pytest = "^8.3.3"
pytest-watch = "^4.2.0"
pytest-mock = "^3.11.1"
botocore = "^1.34.106"
s3fs = ">=2024.10,<2026.0"
mypy = "^1.11.1"
types-protobuf = "^5.27.0.20240920"
mypy-protobuf = "^3.4.0"
types-requests = ">1.26"
requests-mock = "^1.11.0"
pytest-cov = "^6.0.0"
coverage = "^7.6.1"
types-setuptools = ">=75.8.0.20250110,<81.0.0.0"

[tool.poetry.group.dev.dependencies]
bandit = { version = "^1.7.10", extras = ["toml"] }
black = "^24.8.0"
pre-commit = "^3.8.0"
boto3 = "^1.35.16"
s3fs = ">=2024.10,<2026.0"
mlflow = "^3.1.1"
poetry-dynamic-versioning = {extras = ["plugin"], version = "^1.7.0"}
datamodel-code-generator = {extras = ["http"], version = "^0.31.0"}
pillow = "^11.3.0"

[tool.poetry.group.docs.dependencies]
mkdocs = "^1.6.0"
mkdocs-meta-descriptions-plugin = ">=3,<5"
mkdocstrings = "^0.27.0"
mkdocstrings-python = "^1.10.8"
mkdocs-material = "^9.5.36"
urllib3 = "2.5.0"  # Fix for vercel until they update libssl

[tool.poetry-dynamic-versioning]
enable = false
vcs = "git"
style = "pep440"

[tool.mypy]
plugins = ["pydantic.mypy"]
follow_imports = "silent"
ignore_missing_imports = true
warn_redundant_casts = true
disallow_any_generics = true
check_untyped_defs = true
no_implicit_reexport = true
disallow_untyped_defs = true

[tool.pydantic-mypy]
init_forbid_extra = true
init_typed = true
warn_required_dynamic_aliases = true

[tool.bandit]
exclude_dirs = ["tests"]

[build-system]
requires = ["poetry-core>=1.0.0", "poetry-dynamic-versioning"]
build-backend = "poetry_dynamic_versioning.backend"

[tool.poetry.plugins."mlflow.run_context_provider"]
airadar = "airadar.tracking.plugins.mlflow.run_context_provider:AIRadarRunContextProvider"

[tool.datamodel-codegen]
field-constraints = true
snake-case-field = true
strip-default-none = false
target-python-version = "3.9"

[tool.coverage.run]
omit = ["tests/*"]