.. _lino.contrib.legal:

=====================================
Legal considerations for contributors
=====================================

.. contents::
    :depth: 1
    :local:


Contributor License Agreement
=============================

Before we can accept your code contributions, there is an administrative thing
to do: you must give us permission to use them. You must sign the `Contributor
License Agreement
<https://www.saffre-rumma.net/dl/contributor_license_agreement.pdf>`__ (CLA).
The CLA basically says that you promise to be the author of your contributions,
and that you give us an irrevocable right to integrate them into our work.

Unless you are Estonian, the easiest way to sign the CLA is to

- print the `pdf document
  <https://www.saffre-rumma.net/dl/contributor_license_agreement.pdf>`__
- sign it on paper and
- send us photos of (1) your national ID card and (2) the signed document.

We apologize for the inconveniences.


.. rubric:: Why is this needed?

The :term:`copyright holder` of a software project must be a clearly defined
legal person because otherwise there would be disadvantages regarding personal
liability, lack of a framework for management or mistakes regarding tax
obligations (more about this for example `here
<https://www.dmlp.org/legal-guide/informal-group>`__). `Rumma & Ko Ltd
<https://www.saffre-rumma.net/>`__ is our pragmatic choice as long as no other
legal person applies for getting the job.

.. Rumma & Ko provides
  infrastructure for coordinating the work of all contributors.

We cannot use your contribution if you don't sign this document. Just imagine
that some third party would infringe copyright, e.g. by making a non-free fork,
and we would decide to protect the software by going to court: without a clear
and unique legal :term:`copyright holder` the infringer could use nasty tricks
to escape justice.

The CLA protects you from certain responsibilities like getting sued if, for example, a
bug in your code would cause damage to a user of the software.

The CLA also protects us all from the risk that Lino, like any Free Software
product, would get jeopardized by a `Rights-Ratchet Model
<https://meshedinsights.com/2021/02/02/rights-ratchet/>`__.  To avoid this risk,
paragraph (3) of our CLA explicitly states that we "shall not use Your
Contributions in a way that is contrary to the license terms in effect at the
time of the Contri­bu­tion."

Coding standards
================

Any new source code file should start with the following header::

  # -*- coding: UTF-8 -*-
  # Copyright AAAA-ZZZZ Rumma & Ko Ltd
  # License: GNU Affero General Public License v3 (see file COPYING for details)

The start year (AAAA) should be the year of first publication. If your file is
based on an existing file, keep the original value of AAAA. When updating a
file, check the end year (ZZZZ) and increase it if needed. We write only the
start and the end year. Anyway these year numbers are informative, in case of a
dispute the git history would be authoritative.

The FSF recommends to add a quite long header with three paragraphs of text to
each source file. This long header was one of the major reasons why we changed
from GPL to BSD in October 2016.  In April 2021 we switched back to GPL (and
even to the strictest of them, the AGPL) after realizing that actually we don't
need follow this recommendation. We assume that a one-line header is enough to
protect the code from accidentally being separated from its license.

Standard files
==============

Every repository should contain the following four files in its root directory:

.. xfile:: README.rst

    A file named ``README`` (or some variant thereof) should be in the root
    directory of every public code repository and should contain a description
    of the project, links to more detailed documentation, ...

    In Synodalsoft projects this file is automatically generated by the
    :cmd:`inv bd` command from the :term:`long_description` in your
    :xfile:`setup_info.py` file.

.. xfile:: CONTRIBUTING.rst

    Explains how to contribute. For repositories maintained by *Rumma & Ko Ltd*
    this just links to :doc:`/contrib/index`.

.. xfile:: CHANGELOG.rst

    Just a link to :doc:`/changes/index`.

.. xfile:: AUTHORS.rst

    Lists all source contributors. This is a reviewed output of :cmd:`git
    shortlog --summary --numbered --email`.

.. xfile:: COPYING

    A copy of https://www.gnu.org/licenses/agpl-3.0.en.html

The content of these files should be the same for all repositories that are part
of the Lino framework. The book repository is considered the master copy: if we
change any thing in one of these files, the other repositories should copy the
new version as soon as possible.
