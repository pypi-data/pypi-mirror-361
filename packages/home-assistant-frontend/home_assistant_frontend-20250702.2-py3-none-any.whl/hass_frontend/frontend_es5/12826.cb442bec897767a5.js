"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([["12826"],{84447:function(e,t,a){a(26847),a(87799),a(27530);var i=a(73742),n=a(27885),r=a(67522),o=a(23533),s=a(7046),c=a(59048),l=a(7616);let u,d,h,p,v=e=>e;class f extends n.g{renderOutline(){return this.filled?(0,c.dy)(u||(u=v`<span class="filled"></span>`)):super.renderOutline()}getContainerClasses(){return Object.assign(Object.assign({},super.getContainerClasses()),{},{active:this.active})}renderPrimaryContent(){return(0,c.dy)(d||(d=v` <span class="leading icon" aria-hidden="true"> ${0} </span> <span class="label">${0}</span> <span class="touch"></span> <span class="trailing leading icon" aria-hidden="true"> ${0} </span> `),this.renderLeadingIcon(),this.label,this.renderTrailingIcon())}renderTrailingIcon(){return(0,c.dy)(h||(h=v`<slot name="trailing-icon"></slot>`))}constructor(...e){super(...e),this.filled=!1,this.active=!1}}f.styles=[o.W,s.W,r.W,(0,c.iv)(p||(p=v`:host{--md-sys-color-primary:var(--primary-text-color);--md-sys-color-on-surface:var(--primary-text-color);--md-assist-chip-container-shape:var(
          --ha-assist-chip-container-shape,
          16px
        );--md-assist-chip-outline-color:var(--outline-color);--md-assist-chip-label-text-weight:400}.filled{display:flex;pointer-events:none;border-radius:inherit;inset:0;position:absolute;background-color:var(--ha-assist-chip-filled-container-color)}::slotted([slot=icon]),::slotted([slot=trailing-icon]){display:flex;--mdc-icon-size:var(--md-input-chip-icon-size, 18px);font-size:var(--_label-text-size)!important}.trailing.icon ::slotted(*),.trailing.icon svg{margin-inline-end:unset;margin-inline-start:var(--_icon-label-space)}::before{background:var(--ha-assist-chip-container-color,transparent);opacity:var(--ha-assist-chip-container-opacity, 1)}:where(.active)::before{background:var(--ha-assist-chip-active-container-color);opacity:var(--ha-assist-chip-active-container-opacity)}.label{font-family:var(--ha-font-family-body)}`))],(0,i.__decorate)([(0,l.Cb)({type:Boolean,reflect:!0})],f.prototype,"filled",void 0),(0,i.__decorate)([(0,l.Cb)({type:Boolean})],f.prototype,"active",void 0),f=(0,i.__decorate)([(0,l.Mo)("ha-assist-chip")],f)},14159:function(e,t,a){a.d(t,{Dm:function(){return o},jg:function(){return n},pN:function(){return r},xC:function(){return i}});a(12212),a(6988),a(69643),a(54480),a(70820),a(56303),a(18977);var i=function(e){var t=e;return"string"==typeof e&&(t=parseInt(e,16)),"0x"+t.toString(16).padStart(4,"0")},n=function(e,t){var a=e.user_given_name?e.user_given_name:e.name,i=t.user_given_name?t.user_given_name:t.name;return a.localeCompare(i)},r=function(e,t){var a=e.name,i=t.name;return a.localeCompare(i)},o=function(e){return"".concat(e.name," (Endpoint id: ").concat(e.endpoint_id,", Id: ").concat(i(e.id),", Type: ").concat(e.type,")")}},83366:function(e,t,a){a.a(e,async function(e,i){try{a.r(t),a.d(t,{ZHANetworkVisualizationPage:function(){return C}});var n,r,o=a(29694),s=a(75778),c=a(54982),l=a(54521),u=a(4490),d=a(20129),h=a(85297),p=a(53389),v=(a(12212),a(25518),a(70021),a(39710),a(2394),a(18574),a(81738),a(29981),a(22960),a(87799),a(54480),a(70820),a(64455),a(6202),a(67398),a(73742)),f=(a(98334),a(59048)),y=a(7616),g=a(80634),_=a(68986),b=(a(92622),a(14159)),m=a(87106),z=a(96829),w=a(67050),k=e([g,m]);[g,m]=k.then?(await k)():k;var C=function(e){function t(){var e;(0,l.Z)(this,t);for(var a=arguments.length,i=new Array(a),n=0;n<a;n++)i[n]=arguments[n];return(e=(0,d.Z)(this,t,[].concat(i))).narrow=!1,e.isWide=!1,e._networkData={nodes:[],links:[],categories:[]},e._devices=[],e._tooltipFormatter=function(t){var a=t.dataType,i=t.data,n=t.name;if("edge"===a){var r,o=i.source,s=i.target,c=i.value,l=e._networkData.nodes.find(function(e){return e.id===s}).name,u=e._networkData.nodes.find(function(e){return e.id===o}).name,d="".concat(u," → ").concat(l).concat(c?" <b>LQI:</b> ".concat(c):""),h=null===(r=e._networkData.links.find(function(e){return e.source===o&&e.target===s}))||void 0===r?void 0:r.reverseValue;return h?"".concat(d,"<br>").concat(l," → ").concat(u," <b>LQI:</b> ").concat(h):d}var p=e._devices.find(function(e){return e.ieee===i.id});if(!p)return n;var v="<b>IEEE: </b>".concat(p.ieee);if(v+="<br><b>".concat(e.hass.localize("ui.panel.config.zha.visualization.device_type"),": </b>").concat(p.device_type.replace("_"," ")),null!=p.nwk&&(v+="<br><b>NWK: </b>".concat((0,b.xC)(p.nwk))),null!=p.manufacturer&&null!=p.model?v+="<br><b>".concat(e.hass.localize("ui.panel.config.zha.visualization.device"),": </b>").concat(p.manufacturer," ").concat(p.model):v+="<br><b>".concat(e.hass.localize("ui.panel.config.zha.visualization.device_not_in_db"),"</b>"),p.area_id){var f=e.hass.areas[p.area_id];f&&(v+="<br><b>".concat(e.hass.localize("ui.panel.config.zha.visualization.area"),": </b>").concat(f.name))}return v},e}return(0,h.Z)(t,e),(0,u.Z)(t,[{key:"firstUpdated",value:function(e){(0,p.Z)(t,"firstUpdated",this,3)([e]),this.hass&&this._fetchData()}},{key:"render",value:function(){return(0,f.dy)(n||(n=(0,c.Z)([' <hass-tabs-subpage .tabs="','" .hass="','" .narrow="','" .isWide="','" .route="','" header="','"> <ha-network-graph .hass="','" .data="','" .tooltipFormatter="','" @chart-click="','"> <ha-icon-button slot="button" class="refresh-button" .path="','" @click="','" label="','"></ha-icon-button> </ha-network-graph> </hass-tabs-subpage> '])),m.zhaTabs,this.hass,this.narrow,this.isWide,this.route,this.hass.localize("ui.panel.config.zha.visualization.header"),this.hass,this._networkData,this._tooltipFormatter,this._handleChartClick,"M17.65,6.35C16.2,4.9 14.21,4 12,4A8,8 0 0,0 4,12A8,8 0 0,0 12,20C15.73,20 18.84,17.45 19.73,14H17.65C16.83,16.33 14.61,18 12,18A6,6 0 0,1 6,12A6,6 0 0,1 12,6C13.66,6 15.14,6.69 16.22,7.78L13,11H20V4L17.65,6.35Z",this._refreshTopology,this.hass.localize("ui.panel.config.zha.visualization.refresh_topology"))}},{key:"_fetchData",value:(i=(0,s.Z)((0,o.Z)().m(function e(){return(0,o.Z)().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,(0,_.LO)(this.hass);case 1:this._devices=e.v,this._networkData=this._createChartData(this._devices);case 2:return e.a(2)}},e,this)})),function(){return i.apply(this,arguments)})},{key:"_refreshTopology",value:(a=(0,s.Z)((0,o.Z)().m(function e(){return(0,o.Z)().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,(0,_.f3)(this.hass);case 1:return e.n=2,this._fetchData();case 2:return e.a(2)}},e,this)})),function(){return a.apply(this,arguments)})},{key:"_handleChartClick",value:function(e){if("node"===e.detail.dataType&&"pointer"===e.detail.event.target.cursor){var t=e.detail.data.id,a=this._devices.find(function(e){return e.ieee===t});a&&(0,w.c)("/config/devices/device/".concat(a.device_reg_id))}}},{key:"_createChartData",value:function(e){var t=this,a=z.VQ["primary-color"],i=z.VQ["cyan-color"],n=z.VQ["teal-color"],r=z.VQ["error-color"],o=[],s=[],c=[{name:this.hass.localize("ui.panel.config.zha.visualization.coordinator"),symbol:"roundRect",itemStyle:{color:a}},{name:this.hass.localize("ui.panel.config.zha.visualization.router"),symbol:"circle",itemStyle:{color:i}},{name:this.hass.localize("ui.panel.config.zha.visualization.end_device"),symbol:"circle",itemStyle:{color:n}},{name:this.hass.localize("ui.panel.config.zha.visualization.offline"),symbol:"circle",itemStyle:{color:r}}];return e.forEach(function(c){var l,u="Coordinator"===c.device_type;l=c.available?u?0:"Router"===c.device_type?1:2:3,o.push({id:c.ieee,name:c.user_given_name||c.name||c.ieee,category:l,value:u?3:"Router"===c.device_type?2:1,symbolSize:u?40:"Router"===c.device_type?30:20,symbol:u?"roundRect":"circle",itemStyle:{color:c.available?u?a:"Router"===c.device_type?i:n:r},polarDistance:0===l?0:1===l?.5:.9});var d=s.filter(function(e){return e.source===c.ieee||e.target===c.ieee});if(c.routes&&c.routes.length>0)c.routes.forEach(function(e){var i=c.neighbors.find(function(t){return t.nwk===e.next_hop});if(i){var n=d.find(function(e){return e.source===i.ieee||e.target===i.ieee});if(n){var r;if(n.source===c.ieee)n.value=Math.max(n.value,parseInt(i.lqi));else n.reverseValue=Math.max(null!==(r=n.reverseValue)&&void 0!==r?r:0,parseInt(i.lqi));var o=t._getLQIWidth(parseInt(i.lqi));n.symbolSize=o/4*6+3,n.lineStyle=Object.assign(Object.assign({},n.lineStyle),{},{width:o,color:"Active"===e.route_status?a:n.lineStyle.color,type:["Child","Parent"].includes(i.relationship)?"solid":n.lineStyle.type})}else{var l=t._getLQIWidth(parseInt(i.lqi)),u={source:c.ieee,target:i.ieee,value:parseInt(i.lqi),lineStyle:{width:l,color:"Active"===e.route_status?a:z.VQ["disabled-color"],type:["Child","Parent"].includes(i.relationship)?"solid":"dotted"},symbolSize:l/4*6+3,ignoreForceLayout:!0};s.push(u),d.push(u)}}});else if(0===d.length){var h,p=null!==(h=c.neighbors)&&void 0!==h?h:[];0===p.length&&e.forEach(function(e){if(e.neighbors&&e.neighbors.length>0){var t=e.neighbors.find(function(e){return e.ieee===c.ieee});t&&p.push({ieee:e.ieee,lqi:t.lqi})}});var v=p.sort(function(e,t){return parseInt(t.lqi)-parseInt(e.lqi)})[0];v&&s.push({source:c.ieee,target:v.ieee,value:parseInt(v.lqi),symbolSize:5,lineStyle:{width:1,color:z.VQ["disabled-color"],type:"dotted"},ignoreForceLayout:!0})}}),e.forEach(function(e){var t;"Coordinator"===e.device_type?s.forEach(function(t){t.source!==e.ieee&&t.target!==e.ieee||(t.ignoreForceLayout=!1)}):(s.forEach(function(a){var i,n;(a.source===e.ieee||a.target===e.ieee)&&a.value>(null!==(i=null===(n=t)||void 0===n?void 0:n.value)&&void 0!==i?i:0)&&(t=a)}),t&&(t.ignoreForceLayout=!1))}),{nodes:o,links:s,categories:c}}},{key:"_getLQIWidth",value:function(e){return e>200?3:e>100?2:1}}],[{key:"styles",get:function(){return[(0,f.iv)(r||(r=(0,c.Z)(["ha-network-graph{height:100%}"])))]}}]);var a,i}(f.oi);(0,v.__decorate)([(0,y.Cb)({attribute:!1})],C.prototype,"hass",void 0),(0,v.__decorate)([(0,y.Cb)({attribute:!1})],C.prototype,"route",void 0),(0,v.__decorate)([(0,y.Cb)({type:Boolean,reflect:!0})],C.prototype,"narrow",void 0),(0,v.__decorate)([(0,y.Cb)({attribute:"is-wide",type:Boolean})],C.prototype,"isWide",void 0),(0,v.__decorate)([(0,y.SB)()],C.prototype,"_networkData",void 0),(0,v.__decorate)([(0,y.SB)()],C.prototype,"_devices",void 0),C=(0,v.__decorate)([(0,y.Mo)("zha-network-visualization-page")],C),i()}catch(I){i(I)}})},83788:function(e,t,a){a.a(e,async function(e,t){try{a(26847),a(54480),a(1455),a(48694),a(27530);"function"!=typeof window.ResizeObserver&&(window.ResizeObserver=(await a.e("89931").then(a.bind(a,11860))).default),t()}catch(i){t(i)}},1)}}]);
//# sourceMappingURL=12826.cb442bec897767a5.js.map