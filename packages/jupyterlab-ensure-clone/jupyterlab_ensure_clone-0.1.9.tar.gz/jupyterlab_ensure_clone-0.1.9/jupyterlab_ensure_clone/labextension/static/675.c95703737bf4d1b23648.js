"use strict";(self.webpackChunkjupyterlab_ensure_clone=self.webpackChunkjupyterlab_ensure_clone||[]).push([[675],{675:(e,t,r)=>{r.r(t),r.d(t,{default:()=>c});var n=r(679),o=r(805),a=r(256),s=r(708),i=r(955);async function p(e="",t={}){const r=i.ServerConnection.makeSettings(),n=s.URLExt.join(r.baseUrl,"jupyterlab-ensure-clone",e);let o;try{o=await i.ServerConnection.makeRequest(n,t,r)}catch(e){throw new i.ServerConnection.NetworkError(e)}let a=await o.text();if(a.length>0)try{a=JSON.parse(a)}catch(e){console.log("Not a JSON response body.",o)}if(!o.ok)throw new i.ServerConnection.ResponseError(o,a.message||a);return a}const l={id:"jupyterlab-ensure-clone:plugin",description:"Ensure a git repo is cloned on startup.",autoStart:!0,requires:[n.ISettingRegistry],activate:async(e,t)=>{console.log(`JupyterLab extension ${l.id} is activated!`);const r=(await t.load(l.id)).composite.private;window.setTimeout((()=>async function(e){const t=new u(e);let r=e,n=0;for(;;)try{await p("",{method:"POST",body:JSON.stringify(r)});break}catch(a){n++;const s=n<2?e.title:"Error ensuring clone, try again?";for(;r=await(0,o.showDialog)({title:s,body:t}),!r.button.accept;)if(confirm("You may be missing functionality if you cancel. Are you sure?"))return;r=r.value,r.repoUrl=r.repoUrl||e.repoUrl,r.targetDir=r.targetDir||e.targetDir}}(r)),2e3)}};class u extends a.Widget{constructor(e){super(),this.addClass("jp-LoginForm"),e.helpText&&(this.node.appendChild(document.createElement("p")).textContent=e.helpText),this.repoUrlInput=this.createInput({placeholder:"Repo URL"}),this.targetDirInput=this.createInput({placeholder:"Target directory"}),this.usernameInput=this.createInput({placeholder:"Username"}),this.passwordInput=this.createInput({placeholder:"Password",type:"password"}),e.repoUrl||this.node.appendChild(this.repoUrlInput),e.targetDir||this.node.appendChild(this.targetDirInput),e.needCredentials&&(this.node.appendChild(this.usernameInput),this.node.appendChild(this.passwordInput))}createInput({placeholder:e="",type:t="text"}){const r=document.createElement("input");return r.placeholder=e,r.type=t,r.className="jp-mod-styled jp-Input",r.style.marginBottom="10px",r}getValue(){return{repoUrl:this.repoUrlInput.value,targetDir:this.targetDirInput.value,username:this.usernameInput.value,password:this.passwordInput.value}}}const c=l}}]);