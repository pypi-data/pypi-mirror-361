"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([["61680"],{13105:function(t,e,a){a.r(e),a.d(e,{HuiStatisticCardEditor:function(){return x}});var n,i=a(29694),o=a(75778),r=a(54982),s=a(10354),c=a(54521),u=a(4490),l=a(20129),d=a(85297),h=(a(12212),a(39710),a(24819),a(81738),a(22960),a(6989),a(87799),a(48454),a(24533),a(54480),a(56389),a(67398),a(73742)),_=a(59048),f=a(7616),p=a(28105),y=a(95632),m=a(39884),v=a(65829),g=(a(87979),a(7214)),j=a(82881),b=a(90806),Z=(0,y.f0)(b.I,(0,y.Ry)({entity:(0,y.jt)((0,y.Z_)()),name:(0,y.jt)((0,y.Z_)()),icon:(0,y.jt)((0,y.Z_)()),unit:(0,y.jt)((0,y.Z_)()),stat_type:(0,y.jt)((0,y.Z_)()),period:(0,y.jt)((0,y.Yj)()),theme:(0,y.jt)((0,y.Z_)()),footer:(0,y.jt)(j.ds),collection_key:(0,y.jt)((0,y.Z_)())})),k=["mean","min","max","change"],w={mean:"mean",min:"min",max:"max",change:"sum"},O={today:{calendar:{period:"day"}},yesterday:{calendar:{period:"day",offset:-1}},this_week:{calendar:{period:"week"}},last_week:{calendar:{period:"week",offset:-1}},this_month:{calendar:{period:"month"}},last_month:{calendar:{period:"month",offset:-1}},this_year:{calendar:{period:"year"}},last_year:{calendar:{period:"year",offset:-1}}},x=function(t){function e(){var t;(0,c.Z)(this,e);for(var a=arguments.length,n=new Array(a),i=0;i<a;i++)n[i]=arguments[i];return(t=(0,l.Z)(this,e,[].concat(n)))._data=(0,p.Z)(function(t){if(!t||!t.period)return t;for(var e=0,a=Object.entries(O);e<a.length;e++){var n=(0,s.Z)(a[e],2),i=n[0],o=n[1];if((0,v.v)(o,t.period))return Object.assign(Object.assign({},t),{},{period:i})}return t}),t._schema=(0,p.Z)(function(t,e,a){return[{name:"entity",required:!0,selector:{statistic:{}}},{name:"stat_type",required:!0,selector:{select:{multiple:!1,options:k.map(function(t){return{value:t,label:e("ui.panel.lovelace.editor.card.statistic.stat_type_labels.".concat(t)),disabled:!a||!(0,g.Z0)(a,w[t])}})}}},{name:"period",required:!0,selector:t&&Object.keys(O).includes(t)?{select:{multiple:!1,options:Object.keys(O).map(function(t){return{value:t,label:e("ui.panel.lovelace.editor.card.statistic.periods.".concat(t))||t}})}}:{object:{}}},{type:"grid",name:"",schema:[{name:"name",selector:{text:{}}},{name:"icon",selector:{icon:{}},context:{icon_entity:"entity"}},{name:"unit",selector:{text:{}}},{name:"theme",selector:{theme:{}}}]}]}),t._computeLabelCallback=function(e){return"period"===e.name?t.hass.localize("ui.panel.lovelace.editor.card.statistic.period"):"theme"===e.name?"".concat(t.hass.localize("ui.panel.lovelace.editor.card.generic.theme")," (").concat(t.hass.localize("ui.panel.lovelace.editor.card.config.optional"),")"):t.hass.localize("ui.panel.lovelace.editor.card.generic.".concat(e.name))},t}return(0,d.Z)(e,t),(0,u.Z)(e,[{key:"setConfig",value:function(t){(0,y.hu)(t,Z),this._config=t,this._fetchMetadata()}},{key:"firstUpdated",value:function(){var t=this;this._fetchMetadata().then(function(){var e,a,n;null!==(e=t._config)&&void 0!==e&&e.stat_type||null===(a=t._config)||void 0===a||!a.entity||(0,m.B)(t,"config-changed",{config:Object.assign(Object.assign({},t._config),{},{stat_type:null!==(n=t._metadata)&&void 0!==n&&n.has_sum?"change":"mean"})})})}},{key:"render",value:function(){if(!this.hass||!this._config)return _.Ld;var t=this._data(this._config),e=this._schema("string"==typeof t.period?t.period:void 0,this.hass.localize,this._metadata);return(0,_.dy)(n||(n=(0,r.Z)([' <ha-form .hass="','" .data="','" .schema="','" .computeLabel="','" @value-changed="','"></ha-form> '])),this.hass,t,e,this._computeLabelCallback,this._valueChanged)}},{key:"_fetchMetadata",value:(h=(0,o.Z)((0,i.Z)().m(function t(){return(0,i.Z)().w(function(t){for(;;)switch(t.n){case 0:if(this.hass&&this._config){t.n=1;break}return t.a(2);case 1:return t.n=2,(0,g.Py)(this.hass,[this._config.entity]);case 2:this._metadata=t.v[0];case 3:return t.a(2)}},t,this)})),function(){return h.apply(this,arguments)})},{key:"_valueChanged",value:(a=(0,o.Z)((0,i.Z)().m(function t(e){var a,n,o,r,s,c,u,l,d,h,_,f,p;return(0,i.Z)().w(function(t){for(;;)switch(t.n){case 0:if(n=Object.assign({},e.detail.value),Object.keys(n).forEach(function(t){return""===n[t]&&delete n[t]}),"string"==typeof n.period&&(o=O[n.period])&&(n.period=o),!n.stat_type||!n.entity||n.entity===(null===(a=this._metadata)||void 0===a?void 0:a.statistic_id)){t.n=5;break}return t.n=1,(0,g.Py)(this.hass,[n.entity]);case 1:if(d=r=t.v,l=null===d){t.n=2;break}l=void 0===r;case 2:if(!l){t.n=3;break}h=void 0,t.n=4;break;case 3:h=r[0];case 4:(s=h)&&!s.has_sum&&"change"===n.stat_type&&(n.stat_type="mean"),s&&s.mean_type===g.F7.NONE&&"change"!==n.stat_type&&(n.stat_type="change");case 5:if(n.stat_type||!n.entity){t.n=10;break}return t.n=6,(0,g.Py)(this.hass,[n.entity]);case 6:if(f=c=t.v,_=null===f){t.n=7;break}_=void 0===c;case 7:if(!_){t.n=8;break}p=void 0,t.n=9;break;case 8:p=c[0];case 9:u=p,n.stat_type=null!=u&&u.has_sum?"change":"mean";case 10:(0,m.B)(this,"config-changed",{config:n});case 11:return t.a(2)}},t,this)})),function(t){return a.apply(this,arguments)})}]);var a,h}(_.oi);(0,h.__decorate)([(0,f.Cb)({attribute:!1})],x.prototype,"hass",void 0),(0,h.__decorate)([(0,f.SB)()],x.prototype,"_config",void 0),(0,h.__decorate)([(0,f.SB)()],x.prototype,"_metadata",void 0),x=(0,h.__decorate)([(0,f.Mo)("hui-statistic-card-editor")],x)},90806:function(t,e,a){a.d(e,{I:function(){return i}});var n=a(95632),i=(0,n.Ry)({type:(0,n.Z_)(),view_layout:(0,n.Yj)(),layout_options:(0,n.Yj)(),grid_options:(0,n.Yj)(),visibility:(0,n.Yj)()})},4178:function(t,e,a){a.d(e,{k:function(){return o}});var n=a(95632),i=a(20560),o=(0,n.Ry)({entity:(0,n.Z_)(),name:(0,n.jt)((0,n.Z_)()),icon:(0,n.jt)((0,n.Z_)()),image:(0,n.jt)((0,n.Z_)()),show_name:(0,n.jt)((0,n.O7)()),show_icon:(0,n.jt)((0,n.O7)()),tap_action:(0,n.jt)(i.fJ),hold_action:(0,n.jt)(i.fJ),double_tap_action:(0,n.jt)(i.fJ)})},82881:function(t,e,a){a.d(e,{ds:function(){return l},gg:function(){return u}});var n=a(61943),i=a(95632),o=a(20560),r=a(4178),s=(0,i.Ry)({type:(0,i.Z_)(),image:(0,i.Z_)(),tap_action:(0,i.jt)(o.fJ),hold_action:(0,i.jt)(o.fJ),double_tap_action:(0,i.jt)(o.fJ),alt_text:(0,i.jt)((0,i.Z_)())}),c=(0,i.Ry)({type:(0,i.Z_)(),entities:(0,i.IX)(r.k)}),u=(0,i.Ry)({type:(0,i.Z_)(),entity:(0,i.Z_)(),detail:(0,i.jt)((0,i.Rx)()),hours_to_show:(0,i.jt)((0,i.Rx)())}),l=(0,i.D8)(function(t){if(t&&"object"===(0,n.Z)(t)&&"type"in t)switch(t.type){case"buttons":return c;case"graph":return u;case"picture":return s}return(0,i.G0)([c,u,s])})}}]);
//# sourceMappingURL=61680.2be56f2cb2b8db82.js.map