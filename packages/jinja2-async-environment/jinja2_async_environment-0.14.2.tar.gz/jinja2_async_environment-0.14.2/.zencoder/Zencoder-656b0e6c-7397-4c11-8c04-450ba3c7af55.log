cd /Users/les/Projects/jinja2-async-environment && pdm run python -m crackerjack --ai-agent
direnv: loading ~/Projects/jinja2-async-environment/.envrc                      
direnv: export +PDM_ACTIVE ~PATH
(jinja2-async-environment) [jinja2-async-environment] cd /Users/les/Projects/jinja2-async-environment && pdm run python -m crackerjack --ai-agent

Crackerjacking...

PDM installed: ✅


Running pre-commit hooks...

pdm-lock-check...........................................................Passed
trailing-whitespace......................................................Failed
- hook id: trailing-whitespace
- exit code: 1
- files were modified by this hook

Fixing jinja2_async_environment/environment.py
Fixing jinja2_async_environment/compiler.py
Fixing tests/test_package_loader.py

end-of-file-fixer........................................................Passed
check-yaml...............................................................Passed
check-toml...............................................................Passed
check-added-large-files..................................................Passed
ruff-format..............................................................Failed
- hook id: ruff-format
- files were modified by this hook

2 files reformatted, 14 files left unchanged

ruff.....................................................................Failed
- hook id: ruff
- files were modified by this hook

Fixed 4 errors:
- jinja2_async_environment/compiler.py:
    2 × F841 (unused-variable)
- jinja2_async_environment/environment.py:
    1 × F841 (unused-variable)
- jinja2_async_environment/loaders.py:
    1 × F401 (unused-import)

Found 4 errors (4 fixed, 0 remaining).

vulture..................................................................Passed
creosote.................................................................Passed
flynt....................................................................Passed
codespell................................................................Passed
autotyping...............................................................Passed
refurb...................................................................Failed
- hook id: refurb
- exit code: 1

jinja2_async_environment/environment.py:40:9 [FURB184]: Return statement should be chained

Run `refurb --explain ERR` to further explain an error. Use `--quiet` to silence this message

bandit...................................................................Passed
pyright..................................................................Failed
- hook id: pyright
- exit code: 1

/Users/les/Projects/jinja2-async-environment/jinja2_async_environment/compiler.py
  /Users/les/Projects/jinja2-async-environment/jinja2_async_environment/compiler.py:46:17 - error: Cannot access attribute "pull_locals" for class "object"
    Attribute "pull_locals" is unknown (reportAttributeAccessIssue)
  /Users/les/Projects/jinja2-async-environment/jinja2_async_environment/compiler.py:48:9 - error: Method "pull_dependencies" overrides class "CodeGenerator" in an incompatible manner
    Parameter 2 name mismatch: base parameter is named "nodes", override parameter is named "nodes_list" (reportIncompatibleMethodOverride)
/Users/les/Projects/jinja2-async-environment/jinja2_async_environment/environment.py
  /Users/les/Projects/jinja2-async-environment/jinja2_async_environment/environment.py:24:9 - error: Method "_generate" overrides class "Environment" in an incompatible manner
    Parameter 2 type mismatch: base parameter is type "Template", override parameter is type "str"
    Parameter 3 type mismatch: base parameter is type "str | None", override parameter is type "str"
      "Template" is not assignable to "str"
      Type "str | None" is not assignable to type "str"
        "None" is not assignable to "str" (reportIncompatibleMethodOverride)
  /Users/les/Projects/jinja2-async-environment/jinja2_async_environment/environment.py:32:12 - error: Condition will always evaluate to False since the types "str" and "None" have no overlap (reportUnnecessaryComparison)
  /Users/les/Projects/jinja2-async-environment/jinja2_async_environment/environment.py:38:35 - error: No parameter named "source" (reportCallIssue)
  /Users/les/Projects/jinja2-async-environment/jinja2_async_environment/environment.py:40:26 - error: Cannot access attribute "generate" for class "CodeGenerator"
    Attribute "generate" is unknown (reportAttributeAccessIssue)
  /Users/les/Projects/jinja2-async-environment/jinja2_async_environment/environment.py:79:15 - warning: Return type, "Generator[Unknown, Any, list[Unknown]]", is partially unknown (reportUnknownParameterType)
  /Users/les/Projects/jinja2-async-environment/jinja2_async_environment/environment.py:79:39 - warning: Type of parameter "generator_func" is unknown (reportUnknownParameterType)
  /Users/les/Projects/jinja2-async-environment/jinja2_async_environment/environment.py:79:39 - error: Type annotation is missing for parameter "generator_func" (reportMissingParameterType)
  /Users/les/Projects/jinja2-async-environment/jinja2_async_environment/environment.py:92:16 - error: Return statement with value is not allowed in async generator (reportGeneralTypeIssues)
/Users/les/Projects/jinja2-async-environment/jinja2_async_environment/loaders.py
  /Users/les/Projects/jinja2-async-environment/jinja2_async_environment/loaders.py:181:36 - error: Cannot access attribute "archive" for class "Loader"
    Attribute "archive" is unknown (reportAttributeAccessIssue)
9 errors, 2 warnings, 0 informations

ruff.....................................................................Passed
ruff-format..............................................................Passed
pdm-lock-check...........................................................Passed
trailing-whitespace......................................................Passed
end-of-file-fixer........................................................Passed
check-yaml...............................................................Passed
check-toml...............................................................Passed
check-added-large-files..................................................Passed
ruff-format..............................................................Passed
ruff.....................................................................Passed
vulture..................................................................Passed
creosote.................................................................Passed
flynt....................................................................Passed
codespell................................................................Passed
autotyping...............................................................Passed
refurb...................................................................Failed
- hook id: refurb
- exit code: 1

jinja2_async_environment/environment.py:40:9 [FURB184]: Return statement should be chained

Run `refurb --explain ERR` to further explain an error. Use `--quiet` to silence this message

bandit...................................................................Passed
pyright..................................................................Failed
- hook id: pyright
- exit code: 1

/Users/les/Projects/jinja2-async-environment/jinja2_async_environment/compiler.py
  /Users/les/Projects/jinja2-async-environment/jinja2_async_environment/compiler.py:46:17 - error: Cannot access attribute "pull_locals" for class "object"
    Attribute "pull_locals" is unknown (reportAttributeAccessIssue)
  /Users/les/Projects/jinja2-async-environment/jinja2_async_environment/compiler.py:48:9 - error: Method "pull_dependencies" overrides class "CodeGenerator" in an incompatible manner
    Parameter 2 name mismatch: base parameter is named "nodes", override parameter is named "nodes_list" (reportIncompatibleMethodOverride)
/Users/les/Projects/jinja2-async-environment/jinja2_async_environment/environment.py
  /Users/les/Projects/jinja2-async-environment/jinja2_async_environment/environment.py:24:9 - error: Method "_generate" overrides class "Environment" in an incompatible manner
    Parameter 2 type mismatch: base parameter is type "Template", override parameter is type "str"
    Parameter 3 type mismatch: base parameter is type "str | None", override parameter is type "str"
      "Template" is not assignable to "str"
      Type "str | None" is not assignable to type "str"
        "None" is not assignable to "str" (reportIncompatibleMethodOverride)
  /Users/les/Projects/jinja2-async-environment/jinja2_async_environment/environment.py:32:12 - error: Condition will always evaluate to False since the types "str" and "None" have no overlap (reportUnnecessaryComparison)
  /Users/les/Projects/jinja2-async-environment/jinja2_async_environment/environment.py:38:35 - error: No parameter named "source" (reportCallIssue)
  /Users/les/Projects/jinja2-async-environment/jinja2_async_environment/environment.py:40:26 - error: Cannot access attribute "generate" for class "CodeGenerator"
    Attribute "generate" is unknown (reportAttributeAccessIssue)
  /Users/les/Projects/jinja2-async-environment/jinja2_async_environment/environment.py:79:15 - warning: Return type, "Generator[Unknown, Any, list[Unknown]]", is partially unknown (reportUnknownParameterType)
  /Users/les/Projects/jinja2-async-environment/jinja2_async_environment/environment.py:79:39 - warning: Type of parameter "generator_func" is unknown (reportUnknownParameterType)
  /Users/les/Projects/jinja2-async-environment/jinja2_async_environment/environment.py:79:39 - error: Type annotation is missing for parameter "generator_func" (reportMissingParameterType)
  /Users/les/Projects/jinja2-async-environment/jinja2_async_environment/environment.py:92:16 - error: Return statement with value is not allowed in async generator (reportGeneralTypeIssues)
/Users/les/Projects/jinja2-async-environment/jinja2_async_environment/loaders.py
  /Users/les/Projects/jinja2-async-environment/jinja2_async_environment/loaders.py:181:36 - error: Cannot access attribute "archive" for class "Loader"
    Attribute "archive" is unknown (reportAttributeAccessIssue)
9 errors, 2 warnings, 0 informations

ruff.....................................................................Passed
ruff-format..............................................................Passed


Pre-commit failed. Please fix errors.

(jinja2-async-environment) [jinja2-async-environment]                                                                                                        main  ✭ ✱
