"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([["84982"],{88773:function(t,e,a){a.a(t,async function(t,n){try{a.r(e);var o,i,r=a(29694),s=a(75778),c=a(54982),d=a(54521),l=a(4490),h=a(20129),u=a(85297),p=a(53389),_=(a(40777),a(12212),a(26847),a(54480),a(48694),a(27530),a(41465),a(34845),a(95729),a(36330),a(38221),a(75863),a(73742)),f=a(59048),b=a(7616),w=(a(3370),a(78206)),v=a(16230),g=a(71876),y=a(35982),m=a(14778),k=t([w]);w=(k.then?(await k)():k)[0];var x=function(t){function e(){var t;(0,d.Z)(this,e);for(var a=arguments.length,n=new Array(a),o=0;o<a;o++)n[o]=arguments[o];return(t=(0,h.Z)(this,e,[].concat(n)))._attached=!1,t._waiting=!1,t}return(0,u.Z)(e,t),(0,l.Z)(e,[{key:"connectedCallback",value:function(){(0,p.Z)(e,"connectedCallback",this,3)([]),this._attached=!0}},{key:"disconnectedCallback",value:function(){(0,p.Z)(e,"disconnectedCallback",this,3)([]),this._attached=!1}},{key:"render",value:function(){return this._attached&&this.stateObj?(0,f.dy)(o||(o=(0,c.Z)([' <ha-camera-stream .hass="','" .stateObj="','" allow-exoplayer controls></ha-camera-stream> <div class="actions"> <ha-progress-button @click="','" .progress="','" .disabled="','"> '," </ha-progress-button> </div> "])),this.hass,this.stateObj,this._downloadSnapshot,this._waiting,this.stateObj.state===v.nZ,this.hass.localize("ui.dialogs.more_info_control.camera.download_snapshot")):f.Ld}},{key:"_downloadSnapshot",value:(a=(0,s.Z)((0,r.Z)().m(function t(e){var a,n,o,i,s,c,d,l;return(0,r.Z)().w(function(t){for(;;)switch(t.n){case 0:return a=e.currentTarget,this._waiting=!0,t.p=1,t.n=2,this.hass.callApiRaw("GET","camera_proxy/".concat(this.stateObj.entity_id));case 2:if(n=t.v){t.n=3;break}throw new Error("No response from API");case 3:return o=n.headers.get("content-type"),i="image/png"===o?"png":"jpg",s=(new Date).toLocaleString(),c="snapshot_".concat((0,m.l)(this.stateObj.entity_id),"_").concat(s,".").concat(i),t.n=4,n.blob();case 4:d=t.v,l=window.URL.createObjectURL(d),(0,g.N)(l,c),t.n=6;break;case 5:return t.p=5,t.v,this._waiting=!1,a.actionError(),(0,y.C)(this,{message:this.hass.localize("ui.dialogs.more_info_control.camera.failed_to_download")}),t.a(2);case 6:this._waiting=!1,a.actionSuccess();case 7:return t.a(2)}},t,this,[[1,5]])})),function(t){return a.apply(this,arguments)})}]);var a}(f.oi);x.styles=(0,f.iv)(i||(i=(0,c.Z)([":host{display:block}.actions{width:100%;display:flex;flex-direction:row;flex-wrap:wrap;justify-content:flex-end;box-sizing:border-box;padding:12px;z-index:1;gap:8px}"]))),(0,_.__decorate)([(0,b.Cb)({attribute:!1})],x.prototype,"hass",void 0),(0,_.__decorate)([(0,b.Cb)({attribute:!1})],x.prototype,"stateObj",void 0),(0,_.__decorate)([(0,b.SB)()],x.prototype,"_attached",void 0),(0,_.__decorate)([(0,b.SB)()],x.prototype,"_waiting",void 0),customElements.define("more-info-camera",x),n()}catch(Z){n(Z)}})},71876:function(t,e,a){a.d(e,{N:function(){return o},G:function(){return i}});var n=a(59719);const o=(t,e="")=>{const a=document.createElement("a");a.target="_blank",a.href=t,a.download=e,a.style.display="none",document.body.appendChild(a),a.dispatchEvent(new MouseEvent("click")),document.body.removeChild(a)},i=t=>{var e;return!(t=>!!t.auth.external&&n.G)(t)||!(null===(e=t.auth.external)||void 0===e||!e.config.downloadFileSupported)}},59719:function(t,e,a){a.d(e,{G:function(){return n}});a(64455),a(32192);var n=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}}]);
//# sourceMappingURL=84982.45384bdfdbc4fa11.js.map