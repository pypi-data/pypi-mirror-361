Metadata-Version: 2.4
Name: splitdatasets
Version: 0.9.0
Summary: Tools to randomly move images and split datasets (local or S3) into train/val/test.
Author-email: Daniel Robotics <grabardm@ml-dev.ru>
License-Expression: MIT
Project-URL: Homepage, https://github.com/Daniel-Robotic/SplitDatasets
Project-URL: Source, https://github.com/Daniel-Robotic/SplitDatasets
Project-URL: Tracker, https://github.com/Daniel-Robotic/SplitDatasets/issues
Requires-Python: >=3.12
Description-Content-Type: text/markdown
License-File: LICENSE
Requires-Dist: boto3>=1.39.4
Dynamic: license-file


# SplitDatasets

**SplitDatasets** ‚Äî —ç—Ç–æ CLI-–∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –Ω–∞ Python –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏ –∏ —Ä–∞–∑–º–µ—Ç–∫–∞–º–∏: –≤—ã–±–æ—Ä —Å–ª—É—á–∞–π–Ω—ã—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π, —Ä–∞–∑–±–∏–µ–Ω–∏–µ –Ω–∞ –æ–±—É—á–∞—é—â—É—é/–≤–∞–ª–∏–¥–∞—Ü–∏–æ–Ω–Ω—É—é/—Ç–µ—Å—Ç–æ–≤—É—é –≤—ã–±–æ—Ä–∫–∏ –∫–∞–∫ –≤ –ª–æ–∫–∞–ª—å–Ω–æ–π —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º–µ, —Ç–∞–∫ –∏ –≤ S3.

## üì¶ –£—Å—Ç–∞–Ω–æ–≤–∫–∞

### üîπ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å –ø–æ–º–æ—â—å—é [uv](https://github.com/astral-sh/uv)

```bash
uv pip install -e .
```

> –£—Å—Ç–∞–Ω–æ–≤–∏—Ç –ø—Ä–æ–µ–∫—Ç –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ (editable).

### üîπ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –≥–ª–æ–±–∞–ª—å–Ω–æ —Å –ø–æ–º–æ—â—å—é [pipx](https://github.com/pypa/pipx)

```bash
pipx install .
```

> –ï—Å–ª–∏ –ø–∞–∫–µ—Ç —É–∂–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω, –Ω–æ –≤—ã –≤–Ω–µ—Å–ª–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–¥ ‚Äî –ø–µ—Ä–µ—É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ:

```bash
pipx uninstall splitdatasets
pipx install .
```

---

## üöÄ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### 1. –°–ª—É—á–∞–π–Ω—ã–π –≤—ã–±–æ—Ä –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π

–ö–æ–ø–∏—Ä—É–µ—Ç —Å–ª—É—á–∞–π–Ω—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏–∑ `source_dir` –≤ `target_dir`, —Å –≤–æ–∑–º–æ–∂–Ω—ã–º –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ–º.

```bash
random-move SOURCE_DIR TARGET_DIR [--count 100] [--prefix PREFIX] [--extensions .jpg .jpeg .png] [--seed 42]
```

**–ü—Ä–∏–º–µ—Ä:**

```bash
random-move ./images ./sample --count 50 --prefix selected --seed 123
```

---

### 2. –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –¥–∞—Ç–∞—Å–µ—Ç–∞

–†–∞–∑–±–∏–≤–∞–µ—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –Ω–∞ –ø–æ–¥–¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ `images/train`, `images/val`, `images/test` –∏ `labels/...`

```bash
split-dataset-local SOURCE_DIR TARGET_DIR [--labels_dir LABELS_DIR] [--train_ratio 0.7] [--val_ratio 0.2] [--test_ratio 0.1] [--seed 42]
```

**–ü—Ä–∏–º–µ—Ä:**

```bash
split-dataset-local ./dataset/images ./dataset_split --labels_dir ./dataset/labels --seed 42
```

---

### 3. –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –¥–∞—Ç–∞—Å–µ—Ç–∞ –≤ S3 (MinIO)

–†–∞–∑–¥–µ–ª—è–µ—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏ –º–µ—Ç–∫–∏, –Ω–∞—Ö–æ–¥—è—â–∏–µ—Å—è –≤ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ S3, –ø–æ —Ç–µ–º –∂–µ –ø—Ä–∞–≤–∏–ª–∞–º.

```bash
split-dataset-s3 --bucket BUCKET \
                 --source_prefix SOURCE_PREFIX \
                 --target_prefix TARGET_PREFIX \
                 --endpoint http://IP:PORT \
                 --access_key ACCESS \
                 --secret_key SECRET \
                 [--labels_prefix LABELS_PREFIX] \
                 [--train_ratio 0.7] \
                 [--val_ratio 0.2] \
                 [--test_ratio 0.1] \ 
                 [--seed 42]
```

**–ü—Ä–∏–º–µ—Ä:**

```bash
split-dataset-s3 --bucket mybucket \
                 --source_prefix raw/images \
                 --target_prefix splits \
                 --endpoint http://localhost:9000 \
                 --access_key myaccesskey \
                 --secret_key mysecretkey \
                 --labels_prefix raw/labels \
                 --seed 123
```

---

## üß± –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
splitdatasets/
‚îú‚îÄ‚îÄ split_dataset/
‚îÇ   ‚îú‚îÄ‚îÄ select_and_move_images.py
‚îÇ   ‚îú‚îÄ‚îÄ split_dataset.py
‚îÇ   ‚îú‚îÄ‚îÄ split_dataset_s3.py
‚îÇ   ‚îî‚îÄ‚îÄ utils.py
‚îú‚îÄ‚îÄ pyproject.toml
‚îî‚îÄ‚îÄ README.md
```

## üõ† –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

- Python >= 3.12
- `boto3` –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å S3
- `uv` –∏ `pipx` (–¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏)

---

## üìù –õ–∏—Ü–µ–Ω–∑–∏—è

[MIT License](LICENSE) ¬© 2025
