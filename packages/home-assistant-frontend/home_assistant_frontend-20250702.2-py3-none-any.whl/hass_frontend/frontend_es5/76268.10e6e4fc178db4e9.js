"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([["76268"],{51869:function(e,t,o){var a,r,i,n,s,c=o(54982),l=o(54521),u=o(4490),d=o(20129),h=o(85297),b=(o(12212),o(73742)),v=o(59048),p=o(7616),_=o(89868),f=(o(45109),o(11969),o(95814)),m=function(e){function t(){var e;(0,l.Z)(this,t);for(var o=arguments.length,a=new Array(o),r=0;r<o;r++)a[r]=arguments[r];return(e=(0,d.Z)(this,t,[].concat(a))).mainPage=!1,e.narrow=!1,e.supervisor=!1,e}return(0,h.Z)(t,e),(0,u.Z)(t,[{key:"render",value:function(){var e;return(0,v.dy)(a||(a=(0,c.Z)([' <div class="toolbar"> ',' <div class="main-title"><slot name="header">','</slot></div> <slot name="toolbar-icon"></slot> </div> <div class="content ha-scrollbar" @scroll="','"> <slot></slot> </div> <div id="fab"> <slot name="fab"></slot> </div> '])),this.mainPage||null!==(e=history.state)&&void 0!==e&&e.root?(0,v.dy)(r||(r=(0,c.Z)([' <ha-menu-button .hassio="','" .hass="','" .narrow="','"></ha-menu-button> '])),this.supervisor,this.hass,this.narrow):this.backPath?(0,v.dy)(i||(i=(0,c.Z)([' <a href="','"> <ha-icon-button-arrow-prev .hass="','"></ha-icon-button-arrow-prev> </a> '])),this.backPath,this.hass):(0,v.dy)(n||(n=(0,c.Z)([' <ha-icon-button-arrow-prev .hass="','" @click="','"></ha-icon-button-arrow-prev> '])),this.hass,this._backTapped),this.header,this._saveScrollPos)}},{key:"_saveScrollPos",value:function(e){this._savedScrollPos=e.target.scrollTop}},{key:"_backTapped",value:function(){this.backCallback?this.backCallback():history.back()}}],[{key:"styles",get:function(){return[f.$c,(0,v.iv)(s||(s=(0,c.Z)([":host{display:block;height:100%;background-color:var(--primary-background-color);overflow:hidden;position:relative}:host([narrow]){width:100%;position:fixed}.toolbar{display:flex;align-items:center;font-size:var(--ha-font-size-xl);height:var(--header-height);padding:8px 12px;background-color:var(--app-header-background-color);font-weight:var(--ha-font-weight-normal);color:var(--app-header-text-color,#fff);border-bottom:var(--app-header-border-bottom,none);box-sizing:border-box}@media (max-width:599px){.toolbar{padding:4px}}.toolbar a{color:var(--sidebar-text-color);text-decoration:none}::slotted([slot=toolbar-icon]),ha-icon-button-arrow-prev,ha-menu-button{pointer-events:auto;color:var(--sidebar-icon-color)}.main-title{margin:var(--margin-title);line-height:var(--ha-line-height-normal);min-width:0;flex-grow:1;overflow-wrap:break-word;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden;text-overflow:ellipsis;padding-bottom:1px}.content{position:relative;width:100%;height:calc(100% - 1px - var(--header-height));overflow-y:auto;overflow:auto;-webkit-overflow-scrolling:touch}#fab{position:absolute;right:calc(16px + var(--safe-area-inset-right));inset-inline-end:calc(16px + var(--safe-area-inset-right));inset-inline-start:initial;bottom:calc(16px + var(--safe-area-inset-bottom));z-index:1;display:flex;flex-wrap:wrap;justify-content:flex-end;gap:8px}:host([narrow]) #fab.tabs{bottom:calc(84px + var(--safe-area-inset-bottom))}#fab[is-wide]{bottom:24px;right:24px;inset-inline-end:24px;inset-inline-start:initial}"])))]}}])}(v.oi);(0,b.__decorate)([(0,p.Cb)({attribute:!1})],m.prototype,"hass",void 0),(0,b.__decorate)([(0,p.Cb)()],m.prototype,"header",void 0),(0,b.__decorate)([(0,p.Cb)({type:Boolean,attribute:"main-page"})],m.prototype,"mainPage",void 0),(0,b.__decorate)([(0,p.Cb)({type:String,attribute:"back-path"})],m.prototype,"backPath",void 0),(0,b.__decorate)([(0,p.Cb)({attribute:!1})],m.prototype,"backCallback",void 0),(0,b.__decorate)([(0,p.Cb)({type:Boolean,reflect:!0})],m.prototype,"narrow",void 0),(0,b.__decorate)([(0,p.Cb)({type:Boolean})],m.prototype,"supervisor",void 0),(0,b.__decorate)([(0,_.i)(".content")],m.prototype,"_savedScrollPos",void 0),(0,b.__decorate)([(0,p.hO)({passive:!0})],m.prototype,"_saveScrollPos",null),m=(0,b.__decorate)([(0,p.Mo)("hass-subpage")],m)},22222:function(e,t,o){o.a(e,async function(e,a){try{o.r(t),o.d(t,{BluetoothNetworkVisualization:function(){return z}});var r,i,n=o(54982),s=o(54521),c=o(4490),l=o(20129),u=o(85297),d=o(53389),h=(o(12212),o(25518),o(70021),o(26847),o(24819),o(2394),o(81738),o(94814),o(29981),o(22960),o(6989),o(18514),o(54480),o(69920),o(67398),o(73742)),b=o(59048),v=o(7616),p=o(28105),_=o(80634),f=o(54631),m=(o(51869),o(96829)),y=o(67050),g=o(61137),w=o(68135),k=o(40645),x=e([_,w,g]);[_,w,g]=x.then?(await x)():x;var C="ha",D="Home Assistant",z=function(e){function t(){var e;(0,s.Z)(this,t);for(var o=arguments.length,a=new Array(o),r=0;r<o;r++)a[r]=arguments[r];return(e=(0,l.Z)(this,t,[].concat(a))).narrow=!1,e.isWide=!1,e._data=[],e._scanners={},e._sourceDevices={},e._throttledUpdateData=(0,k.P)(function(t){e._data=t},1e4),e._formatNetworkData=(0,p.Z)(function(t,o){var a=[{name:D,symbol:"roundRect",itemStyle:{color:m.VQ["primary-color"]}},{name:e.hass.localize("ui.panel.config.bluetooth.scanners"),symbol:"circle",itemStyle:{color:m.VQ["cyan-color"]}},{name:e.hass.localize("ui.panel.config.bluetooth.known_devices"),symbol:"circle",itemStyle:{color:m.VQ["teal-color"]}},{name:e.hass.localize("ui.panel.config.bluetooth.unknown_devices"),symbol:"circle",itemStyle:{color:m.VQ["disabled-color"]}}],r=[{id:C,name:D,category:0,value:4,symbol:"roundRect",symbolSize:40,polarDistance:0}],i=[];return Object.values(o).forEach(function(t){var o=e._sourceDevices[t.source];r.push({id:t.source,name:(null==o?void 0:o.name_by_user)||(null==o?void 0:o.name)||t.name,category:1,value:5,symbol:"circle",symbolSize:30,polarDistance:.25}),i.push({source:C,target:t.source,value:0,symbol:"none",lineStyle:{width:3,color:m.VQ["primary-color"]}})}),t.forEach(function(t){if(o[t.address])i.push({source:t.source,target:t.address,value:t.rssi,symbol:"none",lineStyle:{width:e._getLineWidth(t.rssi),color:m.VQ["primary-color"]}});else{var a=e._sourceDevices[t.address];r.push({id:t.address,name:e._getBluetoothDeviceName(t.address),value:a?1:0,category:a?2:3,symbolSize:20}),i.push({source:t.source,target:t.address,value:t.rssi,symbol:"none",lineStyle:{width:e._getLineWidth(t.rssi),color:a?m.VQ["primary-color"]:m.VQ["disabled-color"]}})}}),{nodes:r,links:i,categories:a}}),e._tooltipFormatter=function(t){var o=t.dataType,a=t.data,r="";if("edge"===o){var i=a.source,n=a.target,s=a.value,c=e._getBluetoothDeviceName(i),l=e._getBluetoothDeviceName(n);r="".concat(c," â†’ ").concat(l),i!==C&&(r+=" <b>".concat(e.hass.localize("ui.panel.config.bluetooth.rssi"),":</b> ").concat(s))}else{var u=a.id,d=e._getBluetoothDeviceName(u),h=e._data.find(function(e){return e.address===u});if(h)r="<b>".concat(d,"</b><br><b>").concat(e.hass.localize("ui.panel.config.bluetooth.address"),":</b> ").concat(u,"<br><b>").concat(e.hass.localize("ui.panel.config.bluetooth.rssi"),":</b> ").concat(h.rssi,"<br><b>").concat(e.hass.localize("ui.panel.config.bluetooth.source"),":</b> ").concat(h.source,"<br><b>").concat(e.hass.localize("ui.panel.config.bluetooth.updated"),":</b> ").concat((0,w.G)(new Date(1e3*h.time),e.hass.locale));else{var b=e._sourceDevices[u];if(b&&(r="<b>".concat(d,"</b><br><b>").concat(e.hass.localize("ui.panel.config.bluetooth.address"),":</b> ").concat(u),b.area_id)){var v=e.hass.areas[b.area_id];v&&(r+="<br><b>".concat(e.hass.localize("ui.panel.config.bluetooth.area"),": </b>").concat(v.name))}}}return r},e}return(0,u.Z)(t,e),(0,c.Z)(t,[{key:"connectedCallback",value:function(){var e=this;if((0,d.Z)(t,"connectedCallback",this,3)([]),this.hass){this._unsub_advertisements=(0,f.PT)(this.hass.connection,function(t){e._data.length?e._throttledUpdateData(t):e._data=t}),this._unsub_scanners=(0,f.ho)(this.hass.connection,function(t){e._scanners=t});var o=Object.values(this.hass.devices).filter(function(e){return e.connections.find(function(e){return"bluetooth"===e[0]})});this._sourceDevices=Object.fromEntries(o.map(function(e){return[e.connections.find(function(e){return"bluetooth"===e[0]})[1],e]}))}}},{key:"disconnectedCallback",value:function(){(0,d.Z)(t,"disconnectedCallback",this,3)([]),this._unsub_advertisements&&(this._unsub_advertisements(),this._unsub_advertisements=void 0),this._throttledUpdateData.cancel(),this._unsub_scanners&&(this._unsub_scanners(),this._unsub_scanners=void 0)}},{key:"render",value:function(){return(0,b.dy)(r||(r=(0,n.Z)([' <hass-tabs-subpage .hass="','" .narrow="','" .route="','" header="','" .tabs="','"> <ha-network-graph .hass="','" .data="','" .tooltipFormatter="','" @chart-click="','"></ha-network-graph> </hass-tabs-subpage> '])),this.hass,this.narrow,this.route,this.hass.localize("ui.panel.config.bluetooth.visualization"),g.bluetoothAdvertisementMonitorTabs,this.hass,this._formatNetworkData(this._data,this._scanners),this._tooltipFormatter,this._handleChartClick)}},{key:"_getBluetoothDeviceName",value:function(e){var t,o,a,r;return e===C?D:this._sourceDevices[e]?(null===(o=this._sourceDevices[e])||void 0===o?void 0:o.name_by_user)||(null===(a=this._sourceDevices[e])||void 0===a?void 0:a.name)||e:this._scanners[e]?(null===(r=this._scanners[e])||void 0===r?void 0:r.name)||e:(null===(t=this._data.find(function(t){return t.address===e}))||void 0===t?void 0:t.name)||e}},{key:"_getLineWidth",value:function(e){return e>-33?3:e>-66?2:1}},{key:"_handleChartClick",value:function(e){if("node"===e.detail.dataType&&"pointer"===e.detail.event.target.cursor){var t=e.detail.data.id,o=this._sourceDevices[t];o&&(0,y.c)("/config/devices/device/".concat(o.id))}}}],[{key:"styles",get:function(){return[(0,b.iv)(i||(i=(0,n.Z)(["ha-network-graph{height:100%}"])))]}}])}(b.oi);(0,h.__decorate)([(0,v.Cb)({attribute:!1})],z.prototype,"hass",void 0),(0,h.__decorate)([(0,v.Cb)({type:Boolean,reflect:!0})],z.prototype,"narrow",void 0),(0,h.__decorate)([(0,v.Cb)({attribute:"is-wide",type:Boolean})],z.prototype,"isWide",void 0),(0,h.__decorate)([(0,v.Cb)({attribute:!1})],z.prototype,"route",void 0),(0,h.__decorate)([(0,v.SB)()],z.prototype,"_data",void 0),(0,h.__decorate)([(0,v.SB)()],z.prototype,"_scanners",void 0),(0,h.__decorate)([(0,v.SB)()],z.prototype,"_sourceDevices",void 0),z=(0,h.__decorate)([(0,v.Mo)("bluetooth-network-visualization")],z),a()}catch(S){a(S)}})},29426:function(e,t,o){o.d(t,{_:function(){return r}});var a=o(1097);function r(e,t){return+(0,a.Q)(e)-+(0,a.Q)(t)}},19627:function(e,t,o){o.d(t,{X:function(){return n}});var a=o(40246),r=o(87191),i=o(29426);function n(e,t,o){var n=(0,i._)(e,t)/r.yJ;return(0,a.u)(null==o?void 0:o.roundingMethod)(n)}}}]);
//# sourceMappingURL=76268.10e6e4fc178db4e9.js.map