"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([["62298"],{97297:function(t,e,i){i.a(t,async function(t,e){try{var n,a,r,o,s,l,u,c=i(54982),h=i(54521),v=i(4490),f=i(20129),d=i(85297),_=i(53389),g=(i(12212),i(24819),i(18574),i(81738),i(6989),i(96821),i(54480),i(73742)),m=i(59048),p=i(7616),y=i(20480),b=i(28598),x=i(24481),k=i(65863),w=i(83533),Z=t([b]);b=(Z.then?(await Z)():Z)[0];var M=function(t,e,i){return 180*(0,w.Ff)((0,w.Fv)(t,e,i),e,i)/100},C=function(t){function e(){var t;(0,h.Z)(this,e);for(var i=arguments.length,n=new Array(i),a=0;a<i;a++)n[a]=arguments[a];return(t=(0,f.Z)(this,e,[].concat(n))).min=0,t.max=100,t.value=0,t.needle=!1,t.label="",t._angle=0,t._updated=!1,t._segment_label="",t}return(0,d.Z)(e,t),(0,v.Z)(e,[{key:"firstUpdated",value:function(t){var i=this;(0,_.Z)(e,"firstUpdated",this,3)([t]),(0,k.T)(function(){i._updated=!0,i._angle=M(i.value,i.min,i.max),i._segment_label=i._getSegmentLabel(),i._rescaleSvg()})}},{key:"updated",value:function(t){(0,_.Z)(e,"updated",this,3)([t]),this._updated&&(t.has("value")||t.has("valueText")||t.has("label")||t.has("_segment_label"))&&(this._angle=M(this.value,this.min,this.max),this._segment_label=this._getSegmentLabel(),this._rescaleSvg())}},{key:"render",value:function(){var t=this;return(0,m.YP)(n||(n=(0,c.Z)([' <svg viewBox="-50 -50 100 50" class="gauge"> '," "," ",'  </svg> <svg class="text"> <text class="value-text"> ',""," </text> </svg>"])),this.needle&&this.levels?"":(0,m.YP)(a||(a=(0,c.Z)(['<path class="dial" d="M -40 0 A 40 40 0 0 1 40 0"></path>']))),this.levels?this.levels.sort(function(t,e){return t.level-e.level}).map(function(e,i){var n;if(0===i&&e.level!==t.min){var a=M(t.min,t.min,t.max);n=(0,m.YP)(r||(r=(0,c.Z)(['<path stroke="var(--info-color)" class="level" d="M\n                          ',"\n                          ",'\n                         A 40 40 0 0 1 40 0\n                        "></path>'])),0-40*Math.cos(a*Math.PI/180),0-40*Math.sin(a*Math.PI/180))}var s=M(e.level,t.min,t.max);return(0,m.YP)(o||(o=(0,c.Z)(["",'<path stroke="','" class="level" d="M\n                        ',"\n                        ",'\n                       A 40 40 0 0 1 40 0\n                      "></path>'])),n,e.stroke,0-40*Math.cos(s*Math.PI/180),0-40*Math.sin(s*Math.PI/180))}):"",this.needle?(0,m.YP)(s||(s=(0,c.Z)(['<path class="needle" d="M -25 -2.5 L -47.5 0 L -25 2.5 z" style="','"> </path>'])),(0,y.V)({transform:"rotate(".concat(this._angle,"deg)")})):(0,m.YP)(l||(l=(0,c.Z)(['<path class="value" d="M -40 0 A 40 40 0 1 0 40 0" style="','"></path>'])),(0,y.V)({transform:"rotate(".concat(this._angle,"deg)")})),this._segment_label?this._segment_label:this.valueText||(0,b.uf)(this.value,this.locale,this.formatOptions),this._segment_label?"":"%"===this.label?(0,x.K)(this.locale)+"%":" ".concat(this.label))}},{key:"_rescaleSvg",value:function(){var t=this.shadowRoot.querySelector(".text"),e=t.querySelector("text").getBBox();t.setAttribute("viewBox","".concat(e.x," ").concat(e.y," ").concat(e.width," ").concat(e.height))}},{key:"_getSegmentLabel",value:function(){if(this.levels){this.levels.sort(function(t,e){return t.level-e.level});for(var t=this.levels.length-1;t>=0;t--)if(this.value>=this.levels[t].level)return this.levels[t].label}return""}}])}(m.oi);C.styles=(0,m.iv)(u||(u=(0,c.Z)([":host{position:relative}.dial{fill:none;stroke:var(--primary-background-color);stroke-width:15}.value{fill:none;stroke-width:15;stroke:var(--gauge-color);transition:all 1s ease 0s}.needle{fill:var(--primary-text-color);transition:all 1s ease 0s}.level{fill:none;stroke-width:15}.gauge{display:block}.text{position:absolute;max-height:40%;max-width:55%;left:50%;bottom:-6%;transform:translate(-50%,0%)}.value-text{font-size:50px;fill:var(--primary-text-color);text-anchor:middle;direction:ltr}"]))),(0,g.__decorate)([(0,p.Cb)({type:Number})],C.prototype,"min",void 0),(0,g.__decorate)([(0,p.Cb)({type:Number})],C.prototype,"max",void 0),(0,g.__decorate)([(0,p.Cb)({type:Number})],C.prototype,"value",void 0),(0,g.__decorate)([(0,p.Cb)({attribute:!1})],C.prototype,"formatOptions",void 0),(0,g.__decorate)([(0,p.Cb)({attribute:!1,type:String})],C.prototype,"valueText",void 0),(0,g.__decorate)([(0,p.Cb)({attribute:!1})],C.prototype,"locale",void 0),(0,g.__decorate)([(0,p.Cb)({type:Boolean})],C.prototype,"needle",void 0),(0,g.__decorate)([(0,p.Cb)({type:Array})],C.prototype,"levels",void 0),(0,g.__decorate)([(0,p.Cb)()],C.prototype,"label",void 0),(0,g.__decorate)([(0,p.SB)()],C.prototype,"_angle",void 0),(0,g.__decorate)([(0,p.SB)()],C.prototype,"_updated",void 0),(0,g.__decorate)([(0,p.SB)()],C.prototype,"_segment_label",void 0),C=(0,g.__decorate)([(0,p.Mo)("ha-gauge")],C),e()}catch(N){e(N)}})},43309:function(t,e,i){i.a(t,async function(t,n){try{i.r(e),i.d(e,{DEFAULT_MAX:function(){return U},DEFAULT_MIN:function(){return O},severityMap:function(){return Y}});var a,r,o,s,l,u=i(29694),c=i(75778),h=i(75706),v=i(42385),f=i(54982),d=i(54521),_=i(4490),g=i(20129),m=i(53389),p=i(85297),y=(i(40777),i(26847),i(24819),i(18574),i(81738),i(6989),i(96821),i(87799),i(24533),i(54480),i(1455),i(48694),i(27530),i(73742)),b=i(59048),x=i(7616),k=i(25191),w=i(31733),Z=i(20480),M=i(4427),C=i(15459),N=i(7334),S=i(28598),A=(i(31138),i(97297)),L=i(16230),P=i(76815),B=i(45063),z=i(88887),E=i(37807),I=i(93647),T=i(99389),F=t([A,S]);[A,S]=F.then?(await F)():F;var O=0,U=100,Y={red:"var(--error-color)",green:"var(--success-color)",yellow:"var(--warning-color)",normal:"var(--info-color)"},j=function(t){function e(){return(0,d.Z)(this,e),(0,g.Z)(this,e,arguments)}return(0,p.Z)(e,t),(0,_.Z)(e,[{key:"getCardSize",value:function(){return 4}},{key:"setConfig",value:function(t){if(!t.entity)throw new Error("Entity must be specified");if(!(0,N.T)(t.entity))throw new Error("Invalid entity");this._config=Object.assign({min:O,max:U},t)}},{key:"render",value:function(){var t,e;if(!this._config||!this.hass)return b.Ld;var i=this.hass.states[this._config.entity];if(!i)return(0,b.dy)(a||(a=(0,f.Z)([' <hui-warning .hass="','"> '," </hui-warning> "])),this.hass,(0,T.i)(this.hass,this._config.entity));var n=Number(i.state);if(i.state===L.nZ)return(0,b.dy)(r||(r=(0,f.Z)([" <hui-warning>","</hui-warning> "])),this.hass.localize("ui.panel.lovelace.warning.entity_unavailable",{entity:this._config.entity}));var l=this._config.attribute?i.attributes[this._config.attribute]:i.state;if(isNaN(l))return(0,b.dy)(o||(o=(0,f.Z)([" <hui-warning>","</hui-warning> "])),this.hass.localize(this._config.attribute?"ui.panel.lovelace.warning.attribute_not_numeric":"ui.panel.lovelace.warning.entity_non_numeric",{entity:this._config.entity,attribute:this._config.attribute}));var u=null!==(t=this._config.name)&&void 0!==t?t:(0,C.C)(i);return(0,b.dy)(s||(s=(0,f.Z)([' <ha-card class="','" @action="','" .actionHandler="','" tabindex="','"> <ha-gauge .min="','" .max="','" .value="','" .formatOptions="','" .locale="','" .label="','" style="','" .needle="','" .levels="','"></ha-gauge> <div class="name" .title="','">',"</div> </ha-card> "])),(0,w.$)({action:(0,E.q)(this._config)}),this._handleAction,(0,P.K)({hasHold:(0,E._)(this._config.hold_action),hasDoubleClick:(0,E._)(this._config.double_tap_action)}),(0,k.o)(!this._config.tap_action||(0,E._)(this._config.tap_action)?"0":void 0),this._config.min,this._config.max,l,(0,S.l4)(i,this.hass.entities[i.entity_id]),this.hass.locale,this._config.unit||(null===(e=this.hass)||void 0===e?void 0:e.states[this._config.entity].attributes.unit_of_measurement)||"",(0,Z.V)({"--gauge-color":this._computeSeverity(n)}),this._config.needle,this._config.needle?this._severityLevels():void 0,u,u)}},{key:"shouldUpdate",value:function(t){return(0,I.G2)(this,t)}},{key:"updated",value:function(t){if((0,m.Z)(e,"updated",this,3)([t]),this._config&&this.hass){var i=t.get("hass"),n=t.get("_config");i&&n&&i.themes===this.hass.themes&&n.theme===this._config.theme||(0,M.R)(this,this.hass.themes,this._config.theme)}}},{key:"_computeSeverity",value:function(t){if(!this._config.needle){var e=this._config.segments;if(e){e=(0,v.Z)(e).sort(function(t,e){return t.from-e.from});for(var i=0;i<e.length;i++){var n,a=e[i];if(a&&t>=a.from&&(i+1===e.length||t<(null===(n=e[i+1])||void 0===n?void 0:n.from)))return a.color}return Y.normal}var r=this._config.severity;if(!r)return Y.normal;var o,s=Object.keys(r).map(function(t){return[t,r[t]]}),l=(0,h.Z)(s);try{for(l.s();!(o=l.n()).done;){var u=o.value;if(null==Y[u[0]]||isNaN(u[1]))return Y.normal}}catch(c){l.e(c)}finally{l.f()}return s.sort(function(t,e){return t[1]-e[1]}),t>=s[0][1]&&t<s[1][1]?Y[s[0][0]]:t>=s[1][1]&&t<s[2][1]?Y[s[1][0]]:t>=s[2][1]?Y[s[2][0]]:Y.normal}}},{key:"_severityLevels",value:function(){var t=this._config.segments;if(t)return t.map(function(t){return{level:null==t?void 0:t.from,stroke:null==t?void 0:t.color,label:null==t?void 0:t.label}});var e=this._config.severity;return e?Object.keys(e).map(function(t){return{level:e[t],stroke:Y[t]}}):[{level:0,stroke:Y.normal}]}},{key:"_handleAction",value:function(t){(0,z.G)(this,this.hass,this._config,t.detail.action)}}],[{key:"getConfigElement",value:(n=(0,c.Z)((0,u.Z)().m(function t(){return(0,u.Z)().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,i.e("67852").then(i.bind(i,42137));case 1:return t.a(2,document.createElement("hui-gauge-card-editor"))}},t)})),function(){return n.apply(this,arguments)})},{key:"getStubConfig",value:function(t,e,i){return{type:"gauge",entity:(0,B.j)(t,1,e,i,["counter","input_number","number","sensor"],function(t){return!isNaN(Number(t.state))})[0]||""}}}]);var n}(b.oi);j.styles=(0,b.iv)(l||(l=(0,f.Z)(["ha-card{height:100%;overflow:hidden;padding:16px;display:flex;align-items:center;justify-content:center;flex-direction:column;box-sizing:border-box}ha-card.action{cursor:pointer}ha-card:focus{outline:0}ha-gauge{width:100%;max-width:250px}.name{text-align:center;line-height:initial;color:var(--primary-text-color);width:100%;font-size:var(--ha-font-size-m);margin-top:8px}"]))),(0,y.__decorate)([(0,x.Cb)({attribute:!1})],j.prototype,"hass",void 0),(0,y.__decorate)([(0,x.SB)()],j.prototype,"_config",void 0),j=(0,y.__decorate)([(0,x.Mo)("hui-gauge-card")],j),n()}catch(q){n(q)}})},83533:function(t,e,i){i.d(e,{Ff:function(){return a},Fv:function(){return n},IU:function(){return r}});var n=function(t,e,i){return isNaN(t)||isNaN(e)||isNaN(i)?0:t>i?i:t<e?e:t},a=function(t,e,i){return 100*(t-e)/(i-e)},r=function(t){return Math.round(10*t)/10}}}]);
//# sourceMappingURL=62298.e85416f9b168dc4e.js.map