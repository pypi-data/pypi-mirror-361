[1m========================================================================= test session starts =========================================================================[0m
platform darwin -- Python 3.13.5, pytest-8.4.0, pluggy-1.6.0 -- /Users/les/Projects/jinja2-async-environment/.venv/bin/python
cachedir: .pytest_cache
benchmark: 5.1.0 (defaults: timer=time.perf_counter disable_gc=False min_rounds=5 min_time=0.000005 max_time=1.0 calibration_precision=10 warmup=False warmup_iterations=100000)
rootdir: /Users/les/Projects/jinja2-async-environment
configfile: pyproject.toml
plugins: xdist-3.7.0, anyio-4.9.0, timeout-2.4.0, cov-6.2.1, mock-3.14.1, benchmark-5.1.0, asyncio-1.0.0
timeout: 300.0s
timeout method: thread
timeout func_only: False
asyncio: mode=Mode.AUTO, asyncio_default_fixture_loop_scope=function, asyncio_default_test_loop_scope=function
[1mcollecting ... [0m[1mcollected 23 items                                                                                                                                                    [0m

tests/test_environment.py::TestAsyncEnvironment::test_init [32mPASSED[0m[32m                                                                                               [  4%][0m
tests/test_environment.py::TestAsyncEnvironment::test_get_template_not_implemented [32mPASSED[0m[32m                                                                       [  8%][0m
tests/test_environment.py::TestAsyncEnvironment::test_select_template_not_implemented [32mPASSED[0m[32m                                                                    [ 13%][0m
tests/test_environment.py::TestAsyncEnvironment::test_get_or_select_template_not_implemented [32mPASSED[0m[32m                                                             [ 17%][0m
tests/test_environment.py::TestAsyncEnvironment::test_get_template_async_with_template_object [32mPASSED[0m[32m                                                            [ 21%][0m
tests/test_environment.py::TestAsyncEnvironment::test_get_template_async_with_parent [32mPASSED[0m[32m                                                                     [ 26%][0m
tests/test_environment.py::TestAsyncEnvironment::test_get_template_async_with_globals [32mPASSED[0m[32m                                                                    [ 30%][0m
tests/test_environment.py::TestAsyncEnvironment::test_select_template_async_with_empty_list [32mPASSED[0m[32m                                                              [ 34%][0m
tests/test_environment.py::TestAsyncEnvironment::test_select_template_async_with_undefined [32mPASSED[0m[32m                                                               [ 39%][0m
tests/test_environment.py::TestAsyncEnvironment::test_select_template_async_with_template_object [32mPASSED[0m[32m                                                         [ 43%][0m
tests/test_environment.py::TestAsyncEnvironment::test_select_template_async_with_parent [32mPASSED[0m[32m                                                                  [ 47%][0m
tests/test_environment.py::TestAsyncEnvironment::test_select_template_async_not_found [32mPASSED[0m[32m                                                                    [ 52%][0m
tests/test_environment.py::TestAsyncEnvironment::test_get_or_select_template_async_with_string [32mPASSED[0m[32m                                                           [ 56%][0m
tests/test_environment.py::TestAsyncEnvironment::test_get_or_select_template_async_with_template_object [32mPASSED[0m[32m                                                  [ 60%][0m
tests/test_environment.py::TestAsyncEnvironment::test_get_or_select_template_async_with_list [32mPASSED[0m[32m                                                             [ 65%][0m
tests/test_environment.py::TestAsyncEnvironment::test_load_template_async_with_template_object [32mPASSED[0m[32m                                                           [ 69%][0m
tests/test_environment.py::TestAsyncEnvironment::test_load_template_async_with_string [32mPASSED[0m[32m                                                                    [ 73%][0m
tests/test_environment.py::TestAsyncEnvironment::test_load_template_async_with_iterable [32mPASSED[0m[32m                                                                  [ 78%][0m
tests/test_environment.py::TestAsyncEnvironment::test_load_template_async_with_iterable_all_not_found [32mPASSED[0m[32m                                                    [ 82%][0m
tests/test_environment.py::TestAsyncEnvironment::test_get_template_no_loader [32mPASSED[0m[32m                                                                             [ 86%][0m
tests/test_environment.py::TestAsyncEnvironment::test_get_template_with_cache_hit [32mPASSED[0m[32m                                                                        [ 91%][0m
tests/test_environment.py::TestAsyncEnvironment::test_get_template_with_cache_hit_and_globals [32mPASSED[0m[32m                                                            [ 95%][0m
tests/test_environment.py::TestAsyncEnvironment::test_get_template_with_cache_miss [32mPASSED[0m[32m                                                                       [100%][0m[31m[1m
ERROR: Coverage failure: total of 30 is less than fail-under=42
[0m

=========================================================================== tests coverage ============================================================================
__________________________________________________________ coverage: platform darwin, python 3.13.5-final-0 ___________________________________________________________

Name                                      Stmts   Miss  Cover
-------------------------------------------------------------
jinja2_async_environment/bccache.py          45     20    56%
jinja2_async_environment/compiler.py        237    199    16%
jinja2_async_environment/environment.py     115     28    76%
jinja2_async_environment/loaders.py         320    252    21%
-------------------------------------------------------------
TOTAL                                       717    499    30%
[31m[1mFAIL Required test coverage of 42% not reached. Total coverage: 30.40%
[0m[32m========================================================================= [32m[1m23 passed[0m[32m in 0.78s[0m[32m ==========================================================================[0m
